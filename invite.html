<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BNIè¯åœ°ç”¢ç·šä¸Šé‘½çŸ³åˆ†æœƒ - æ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦å…¨çƒå‰10å</title>
    
    <!-- ğŸš€ SEO å„ªåŒ– -->
    <meta name="description" content="å…¨å°å”¯ä¸€æˆ¿åœ°ç”¢ä¸»é¡Œå¼BNIåˆ†æœƒï¼Œæ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦å…¨çƒå‰10åã€‚æ¶µè“‹åŒ…ç§Ÿä»£ç®¡ã€è£ä¿®å·¥ç¨‹ã€é‡‘èæŠ•è³‡ã€æ³•å¾‹å»ºç¯‰ç­‰å®Œæ•´æˆ¿åœ°ç”¢ç”Ÿæ…‹åœˆã€‚">
    <meta name="keywords" content="BNI, è¯åœ°ç”¢, æˆ¿åœ°ç”¢, åŒ…ç§Ÿä»£ç®¡, æˆ¿åœ°ç”¢æŠ•è³‡, åˆ†æœƒ">
    <meta name="author" content="è¯åœ°ç”¢é‘½çŸ³åˆ†æœƒ">
    
    <!-- ğŸš€ Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="BNIè¯åœ°ç”¢ç·šä¸Šé‘½çŸ³åˆ†æœƒ - æ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦å…¨çƒå‰10å">
    <meta property="og:description" content="å…¨å°å”¯ä¸€æˆ¿åœ°ç”¢ä¸»é¡Œå¼BNIåˆ†æœƒï¼Œæ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦å…¨çƒå‰10å">
    
    <!-- ğŸš€ Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BNIè¯åœ°ç”¢ç·šä¸Šé‘½çŸ³åˆ†æœƒ">
    <meta name="twitter:description" content="å…¨å°å”¯ä¸€æˆ¿åœ°ç”¢ä¸»é¡Œå¼BNIåˆ†æœƒï¼Œæ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦å…¨çƒå‰10å">
    
    <!-- ğŸš€ æ€§èƒ½å„ªåŒ– -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- ğŸš€ çµæ§‹åŒ–æ•¸æ“š (Schema.org) - æå‡ SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "BNIè¯åœ°ç”¢ç·šä¸Šé‘½çŸ³åˆ†æœƒ",
        "description": "å…¨å°å”¯ä¸€æˆ¿åœ°ç”¢ä¸»é¡Œå¼BNIåˆ†æœƒï¼Œæ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦å…¨çƒå‰10å",
        "url": "https://hua-real-estate.pages.dev/invite",
        "memberOf": {
            "@type": "Organization",
            "name": "BNI"
        },
        "areaServed": {
            "@type": "Country",
            "name": "Taiwan"
        }
    }
    </script>
    
    <!-- ğŸš€ DNS é è§£æå’Œé é€£æ¥ -->
    <link rel="dns-prefetch" href="https://script.google.com">
    <link rel="preconnect" href="https://script.google.com" crossorigin>
    <link rel="dns-prefetch" href="https://docs.google.com">
    
    <!-- ğŸš€ é åŠ è¼‰é—œéµè³‡æº -->
    <!-- Google Sheets è¼‰å…¥å™¨å·²ç§»é™¤ï¼Œç¾åœ¨ä½¿ç”¨ Supabase æ•¸æ“šåº« -->
    
    <!-- ğŸš€ å„ªåŒ–ï¼šé é€£æ¥ Google Formsï¼ˆCTAæŒ‰éˆ•ï¼‰ -->
    <link rel="preconnect" href="https://docs.google.com" crossorigin>
    
    <!-- ğŸš€ å„ªåŒ–ï¼šè¨­ç½®è³‡æºæç¤ºå„ªå…ˆç´š -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    <!-- å…§åµŒ faviconï¼Œé¿å… favicon.ico 404 -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%234a69bd' width='32' height='32' rx='4'/%3E%3Ctext x='16' y='22' text-anchor='middle' fill='white' font-size='16' font-family='sans-serif'%3Eè¯%3C/text%3E%3C/svg%3E">
    
    <!-- ğŸš€ å„ªåŒ–ï¼šé é€£æ¥å¸¸è¦‹åœ–ç‰‡CDNåŸŸåï¼ˆå¦‚æœåœ–ç‰‡å­˜æ”¾åœ¨CDNä¸Šï¼‰ -->
    <!-- å¦‚æœæ‚¨çš„åœ–ç‰‡å­˜æ”¾åœ¨ç‰¹å®šCDNï¼Œå¯ä»¥åœ¨é€™è£¡æ·»åŠ é é€£æ¥ -->
    <!-- <link rel="preconnect" href="https://your-cdn-domain.com" crossorigin> -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            /* ğŸš€ å„ªåŒ–ï¼šæ¸›å°‘é‡ç¹ª */
            text-rendering: optimizeLegibility;
        }
        
        /* ğŸ¨ å„ªé›…çš„éª¨æ¶å±æ¨£å¼ */
        .skeleton {
            background: linear-gradient(
                90deg,
                #f0f0f0 0%,
                #e8e8e8 20%,
                #f8f8f8 40%,
                #e8e8e8 60%,
                #f0f0f0 100%
            );
            background-size: 400% 100%;
            animation: skeleton-shimmer 2s ease-in-out infinite;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        @keyframes skeleton-shimmer {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }
        
        .skeleton-card {
            width: 100%;
            height: 200px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .skeleton-card::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 3px solid #e0e0e0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: skeleton-spin 1s linear infinite;
        }
        
        @keyframes skeleton-spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        /* å…§å®¹è¼‰å…¥å®Œæˆå¾Œéš±è—éª¨æ¶å± */
        .content-loaded .skeleton {
            display: none;
        }
        
        .hero {
            background: 
                radial-gradient(circle at 20% 80%, rgba(60, 60, 120, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(100, 40, 80, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(40, 80, 120, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #2c3e50 0%, #34495e 30%, #4a69bd 70%, #5f4bb6 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 30%),
                radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 60%);
            animation: heroShimmer 8s ease-in-out infinite;
        }
        
        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="white" opacity="0.03"><circle cx="20" cy="20" r="2"/><circle cx="80" cy="40" r="1.5"/><circle cx="40" cy="80" r="1"/><circle cx="90" cy="90" r="2.5"/><circle cx="10" cy="60" r="1.8"/></svg>');
            background-size: 200px 200px;
            animation: heroStars 20s linear infinite;
        }
        
        @keyframes heroShimmer {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.05);
            }
        }
        
        @keyframes heroStars {
            0% {
                transform: translateX(0) translateY(0);
            }
            100% {
                transform: translateX(-200px) translateY(-200px);
            }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.4);
            animation: fadeInUp 1s ease-out;
        }
        
        .bni-text {
            background: linear-gradient(135deg, #ff0000 0%, #ff3333 30%, #ff6666 60%, #ff9999 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            text-shadow: 
                0 0 2px rgba(255,0,0,0.4),
                2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .huadi-text {
            background: linear-gradient(135deg, #d97706 0%, #ea580c 30%, #f97316 60%, #fb923c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            text-shadow: 
                0 0 2px rgba(217,119,6,0.4),
                2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .online-text {
            background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 50%, #e6f3ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }
        
        .diamond-text {
            background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 30%, #9ca3af 50%, #6b7280 70%, #374151 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            animation: diamondShine 3s ease-in-out infinite;
            position: relative;
        }
        
        @keyframes diamondShine {
            0%, 100% {
                text-shadow: 
                    0 0 5px rgba(255,255,255,0.3),
                    0 0 10px rgba(255,255,255,0.2),
                    0 0 15px rgba(255,255,255,0.1);
                filter: brightness(1);
            }
            25% {
                text-shadow: 
                    0 0 8px rgba(255,255,255,0.6),
                    0 0 16px rgba(255,255,255,0.4),
                    0 0 24px rgba(255,255,255,0.2),
                    0 0 32px rgba(255,255,255,0.1);
                filter: brightness(1.2);
            }
            50% {
                text-shadow: 
                    0 0 12px rgba(255,255,255,0.8),
                    0 0 24px rgba(255,255,255,0.6),
                    0 0 36px rgba(255,255,255,0.4),
                    0 0 48px rgba(255,255,255,0.2);
                filter: brightness(1.5);
            }
            75% {
                text-shadow: 
                    0 0 8px rgba(255,255,255,0.6),
                    0 0 16px rgba(255,255,255,0.4),
                    0 0 24px rgba(255,255,255,0.2),
                    0 0 32px rgba(255,255,255,0.1);
                filter: brightness(1.2);
            }
        }
        
        
        .chapter-text {
            background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 50%, #e6f3ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }
        
        .hero .subtitle {
            font-size: 1.5rem;
            margin-bottom: 40px;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.2s both;
        }
        
        .mobile-break {
            display: none;
        }
        
        .highlight-text {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #fff176 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            animation: highlightPulse 2s ease-in-out infinite;
        }
        
        @keyframes highlightPulse {
            0%, 100% {
                transform: scale(1);
                filter: brightness(1);
            }
            50% {
                transform: scale(1.05);
                filter: brightness(1.3);
            }
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, 
                #ffd700 0%, 
                #ffed4e 15%, 
                #ffd700 30%, 
                #ffed4e 45%, 
                #ffd700 60%, 
                #ffed4e 75%, 
                #ffd700 90%, 
                #ffed4e 100%);
            color: #8b4513;
            padding: 20px 40px;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 700;
            box-shadow: 
                0 4px 15px rgba(255, 215, 0, 0.4),
                0 8px 25px rgba(255, 215, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            animation: fadeInUp 1s ease-out 0.4s both, goldShine 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            border: 2px solid rgba(255, 215, 0, 0.8);
            cursor: pointer;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            margin-top: 10px;
        }
        
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .cta-button:hover::before {
            left: 100%;
        }
        
        .cta-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 
                0 6px 20px rgba(255, 215, 0, 0.6),
                0 12px 35px rgba(255, 215, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, 
                #ffed4e 0%, 
                #ffd700 15%, 
                #ffed4e 30%, 
                #ffd700 45%, 
                #ffed4e 60%, 
                #ffd700 75%, 
                #ffed4e 90%, 
                #ffd700 100%);
            border-color: rgba(255, 215, 0, 1);
        }
        
        .event-showcase {
            padding: 40px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        
        .event-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .event-date-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 30%, #ff6b6b 60%, #ff4757 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 50px;
            margin-top: 0;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .event-date-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: badgeShine 3s ease-in-out infinite;
        }
        
        @keyframes badgeShine {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }
        
        .date-number {
            font-size: 1.8rem;
            font-weight: 900;
            margin-right: 12px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .date-text {
            font-size: 1.2rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        .event-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #6c757d;
            margin-bottom: 40px;
            font-weight: 500;
        }
        
        .event-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .event-grid-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 2.5rem 1rem;
            color: #666;
            font-size: 1rem;
            background: rgba(255,255,255,0.6);
            border-radius: 15px;
        }
        
        .event-card {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
            /* ğŸš€ å„ªåŒ–ï¼šæ·»åŠ å¯¬é«˜æ¯”å ä½ç¬¦ï¼Œé˜²æ­¢ CLS */
            aspect-ratio: 4 / 3;
            /* ğŸš€ å„ªåŒ–ï¼šåªåœ¨æ‡¸åœæ™‚å•Ÿç”¨ will-changeï¼Œæ¸›å°‘å…§å­˜ä½”ç”¨ */
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            will-change: transform; /* åªåœ¨æ‡¸åœæ™‚å•Ÿç”¨ */
        }
        
        .event-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* ğŸš€ å„ªåŒ–ï¼šç¢ºä¿åœ–ç‰‡å¡«å……å®¹å™¨ */
            display: block;
            transition: transform 0.3s ease;
            /* ğŸš€ å„ªåŒ–ï¼šç§»é™¤ will-changeï¼Œæ¸›å°‘å…§å­˜ä½”ç”¨ï¼Œåªåœ¨æ‡¸åœæ™‚å•Ÿç”¨ */
            /* ğŸš€ å„ªåŒ–ï¼šåœ–ç‰‡è¼‰å…¥å„ªåŒ– */
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }
        
        .event-card:hover .event-image {
            transform: scale(1.05);
            will-change: transform; /* åªåœ¨æ‡¸åœæ™‚å•Ÿç”¨ */
        }
        
        .event-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            color: white;
        }
        
        .event-card:hover .event-overlay {
            opacity: 1;
        }
        
        .event-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .event-overlay p {
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }
        
        /* æ¨¡æ…‹æ¡†æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            cursor: pointer;
        }
        
        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        
        .close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }
        
        .close:hover {
            color: #bbb;
        }

        .features {
            padding: 50px 0;
            background: #f8f9fa;
        }
        
        .section-title {
            text-align: center;
            font-size: 2.4rem;
            margin-bottom: 0;
            background: linear-gradient(135deg, #2c3e50 0%, #667eea 50%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            font-weight: 700;
        }
        
        
        .date-highlight {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 30%, #ff6b6b 60%, #ff4757 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 
                2px 2px 0px #ff4757,
                4px 4px 0px #ff3742,
                6px 6px 0px #ff2f3a,
                8px 8px 0px #ff2833,
                10px 10px 0px #ff212c;
            font-weight: 900;
            position: relative;
            display: inline-block;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }
        
        .feature-card {
            background: white;
            padding: 40px 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            /* ğŸš€ å„ªåŒ–ï¼šç§»é™¤ will-changeï¼Œæ¸›å°‘å…§å­˜ä½”ç”¨ */
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border-color: #667eea;
            will-change: transform; /* åªåœ¨æ‡¸åœæ™‚å•Ÿç”¨ */
        }
        
        .feature-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .feature-card p {
            color: #7f8c8d;
            line-height: 1.8;
        }
        
        .resources-showcase {
            padding: 40px 0;
            background: #f8f9fa;
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }
        
        .resource-category {
            background: white;
            padding: 30px 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            /* ğŸš€ å„ªåŒ–ï¼šç§»é™¤ will-changeï¼Œæ¸›å°‘å…§å­˜ä½”ç”¨ */
        }
        
        .resource-category:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-left-color: #667eea;
            will-change: transform; /* åªåœ¨æ‡¸åœæ™‚å•Ÿç”¨ */
        }
        
        .resource-category h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .resource-category ul {
            list-style: none;
            padding: 0;
        }
        
        .resource-category li {
            padding: 8px 0;
            color: #555;
            position: relative;
            padding-left: 20px;
            line-height: 1.6;
        }
        
        .resource-category li::before {
            content: 'â€¢';
            color: #667eea;
            font-weight: bold;
            position: absolute;
            left: 0;
            top: 6px;
            font-size: 1rem;
        }
        
        .benefits {
            padding: 50px 0;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
        }
        
        .benefits-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }
        
        .benefits-text h2 {
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: #ffffff;
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .benefits-list {
            list-style: none;
        }
        
        .benefits-list li {
            margin-bottom: 20px;
            padding-left: 30px;
            position: relative;
            font-size: 1.1rem;
        }
        
        .benefits-list li::before {
            content: 'âœ¨';
            position: absolute;
            left: 0;
            font-size: 1.2rem;
        }
        
        .highlight-box {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .cta-section {
            padding: 50px 0;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .cta-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        .cta-section h2 {
            font-size: 3rem;
            margin-bottom: 30px;
            color: #ffffff;
            font-weight: 800;
            text-shadow: 
                0 0 5px rgba(255,255,255,0.4),
                0 0 10px rgba(255,255,255,0.2),
                2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .cta-section p {
            font-size: 1.3rem;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px); /* æ¸›å°‘ç§»å‹•è·é›¢ */
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ğŸš€ å„ªåŒ–ï¼šæ¸›å°‘é‡æ’é‡ç¹ª */
        .hero, .container, .feature-card {
            contain: layout style paint; /* CSS containment */
        }
        
        /* ğŸš€ å„ªåŒ–ï¼šåœ–ç‰‡è¼‰å…¥æ™‚çš„æ¼¸å…¥æ•ˆæœ */
        .event-image {
            opacity: 0;
            animation: fadeInImage 0.3s ease-in forwards;
        }
        
        @keyframes fadeInImage {
            to { opacity: 1; }
        }
        
        /* ğŸš€ å„ªåŒ–ï¼šåœ–ç‰‡å·²è¼‰å…¥æ™‚ç«‹å³é¡¯ç¤º */
        .event-image.loaded {
            opacity: 1;
            animation: none;
        }

        @keyframes goldShine {
            0%, 100% {
                box-shadow: 
                    0 4px 15px rgba(255, 215, 0, 0.4),
                    0 8px 25px rgba(255, 215, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.2);
                filter: brightness(1);
            }
            50% {
                box-shadow: 
                    0 4px 15px rgba(255, 215, 0, 0.6),
                    0 8px 25px rgba(255, 215, 0, 0.5),
                    0 0 20px rgba(255, 215, 0, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.8),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.2);
                filter: brightness(1.1);
            }
        }
        
        @media (max-width: 1024px) and (min-width: 769px) {
            .hero h1 {
                font-size: 3rem;
            }
            
            .hero .subtitle {
                font-size: 1.3rem;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 35px;
            }
            
            .resources-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
            }
        }
        
        @media (max-width: 768px) {
            .hero {
                padding: 50px 0;
                background: 
                    radial-gradient(circle at 20% 80%, rgba(60, 60, 120, 0.4) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(100, 40, 80, 0.3) 0%, transparent 50%),
                    linear-gradient(135deg, #2c3e50 0%, #34495e 30%, #4a69bd 70%, #5f4bb6 100%);
            }
            
            .hero h1 {
                font-size: 2.5rem;
                margin-bottom: 20px;
                line-height: 1.3;
                font-weight: 800;
                text-shadow: 2px 2px 8px rgba(0,0,0,0.4);
            }
            
            .bni-text {
                background: linear-gradient(135deg, #ff0000 0%, #ff3333 30%, #ff6666 60%, #ff9999 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: #ff0000; /* å‚™ç”¨é¡è‰² */
                font-weight: 800;
                text-shadow: 
                    0 0 4px rgba(255,0,0,0.6),
                    0 0 8px rgba(255,0,0,0.4),
                    0 0 12px rgba(255,0,0,0.2),
                    2px 2px 4px rgba(0,0,0,0.5),
                    4px 4px 8px rgba(0,0,0,0.3),
                    6px 6px 12px rgba(0,0,0,0.2);
                filter: drop-shadow(0 0 6px rgba(255,0,0,0.3));
            }
            
            .huadi-text {
                background: linear-gradient(135deg, #d97706 0%, #ea580c 30%, #f97316 60%, #fb923c 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: #d97706; /* å‚™ç”¨é¡è‰² */
                font-weight: 800;
                text-shadow: 
                    0 0 4px rgba(217,119,6,0.6),
                    0 0 8px rgba(217,119,6,0.4),
                    0 0 12px rgba(217,119,6,0.2),
                    2px 2px 4px rgba(0,0,0,0.5),
                    4px 4px 8px rgba(0,0,0,0.3),
                    6px 6px 12px rgba(0,0,0,0.2);
                filter: drop-shadow(0 0 6px rgba(217,119,6,0.3));
            }
            
            .online-text {
                background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 50%, #e6f3ff 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: inherit; /* å‚™ç”¨é¡è‰² */
                font-weight: 600;
            }
            
            .diamond-text {
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 20%, #e2e8f0 40%, #cbd5e0 60%, #a0aec0 80%, #718096 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: #ffffff; /* å‚™ç”¨é¡è‰² */
                font-weight: 800;
                animation: diamondShineMobile 3s ease-in-out infinite;
                position: relative;
                text-shadow: 
                    2px 2px 4px rgba(0,0,0,0.3),
                    4px 4px 8px rgba(0,0,0,0.2),
                    6px 6px 12px rgba(0,0,0,0.1);
                filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
            }
            
            @keyframes diamondShineMobile {
                0%, 100% {
                    text-shadow: 
                        0 0 3px rgba(255,255,255,0.2),
                        0 0 6px rgba(255,255,255,0.1);
                    filter: brightness(1);
                }
                50% {
                    text-shadow: 
                        0 0 5px rgba(255,255,255,0.4),
                        0 0 10px rgba(255,255,255,0.2);
                    filter: brightness(1.2);
                }
            }
            
            .chapter-text {
                background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 50%, #e6f3ff 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: inherit; /* å‚™ç”¨é¡è‰² */
                font-weight: 600;
            }
            
            .hero .subtitle {
                font-size: 1.2rem;
                margin-bottom: 35px;
                padding: 0 15px;
                line-height: 1.5;
                font-weight: 500;
                opacity: 0.95;
                text-align: center;
            }
            
            .mobile-break {
                display: block;
            }
            
            /* æ‰‹æ©Ÿç‰ˆï¼šBNI/è¯åœ°ç”¢ æ¡ç”¨ç´”è‰²ä¸¦ç§»é™¤éœ§åŒ–æ•ˆæœ */
            .bni-text {
                background: none !important;
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                color: #ff0000 !important; /* äº®ç´… */
                text-shadow: 
                    1px 1px 0 #cc0000,
                    2px 2px 0 #990000,
                    3px 3px 0 #660000,
                    4px 4px 8px rgba(0,0,0,0.3) !important;
                filter: none !important;
            }
            .huadi-text {
                background: none !important;
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                color: #d97706 !important; /* æ·ºå’–å•¡/ç¥ç€è‰² */
                text-shadow: 
                    1px 1px 0 #b8650a,
                    2px 2px 0 #9c5508,
                    3px 3px 0 #804506,
                    4px 4px 8px rgba(0,0,0,0.3) !important;
                filter: none !important;
            }

            .highlight-text {
                color: #ffd700 !important; /* æ‰‹æ©Ÿç‰ˆä½¿ç”¨ç´”è‰²ç¢ºä¿å¯è¦‹ */
                background: none !important; /* ç§»é™¤æ¼¸å±¤èƒŒæ™¯ */
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                font-weight: 600;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
                animation: none !important;
            }
            
            @keyframes highlightPulseMobile {
                0%, 100% {
                    transform: scale(1);
                    filter: brightness(1);
                }
                50% {
                    transform: scale(1.02);
                    filter: brightness(1.2);
                }
            }
            
            .cta-button {
                padding: 18px 35px;
                font-size: 1.2rem;
                margin: 15px;
                border-radius: 45px;
                font-weight: 800;
                min-height: 56px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-top: 5px;
                color: #8b4513 !important;
                background: linear-gradient(135deg, 
                    #ffd700 0%, 
                    #ffed4e 15%, 
                    #ffd700 30%, 
                    #ffed4e 45%, 
                    #ffd700 60%, 
                    #ffed4e 75%, 
                    #ffd700 90%, 
                    #ffed4e 100%) !important;
                box-shadow: 
                    0 4px 15px rgba(255, 215, 0, 0.4),
                    0 8px 25px rgba(255, 215, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.2) !important;
                border: 2px solid rgba(255, 215, 0, 0.8) !important;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            }
            
            .event-showcase {
                padding: 25px 0;
            }
            
            .event-header {
                margin-bottom: 15px;
            }
            
            .event-date-badge {
                padding: 5px 12px;
                margin-top: 0;
                border-radius: 40px;
                box-shadow: 0 5px 18px rgba(255, 107, 107, 0.25);
            }
            
            .date-number {
                font-size: 1.5rem;
                margin-right: 10px;
            }
            
            .date-text {
                font-size: 1.1rem;
                font-weight: 700;
            }
            
            .event-subtitle {
                font-size: 1.1rem;
                margin-bottom: 30px;
                padding: 0 15px;
                line-height: 1.4;
            }
            
            .event-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                padding: 0 15px;
            }
            
            .event-card {
                border-radius: 12px;
            }
            
            .event-overlay p {
                font-size: 0.9rem;
            }
            
            .close {
                top: 15px;
                right: 25px;
                font-size: 30px;
            }

            .features {
                padding: 25px 0;
                background: #f8fafc;
            }
            
            .section-title {
                font-size: 1.3rem; /* å¢åŠ 0.1rem */
                margin-bottom: 30px;
                padding: 0 8px;
                font-weight: 800;
                background: linear-gradient(135deg, #1a202c 0%, #4a69bd 50%, #6c5ce7 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: inherit; /* å‚™ç”¨é¡è‰² */
                line-height: 1.2;
                white-space: nowrap; /* å¼·åˆ¶ä¸æ›è¡Œ */
            }
            
            .date-highlight {
                background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 30%, #ff6b6b 60%, #ff4757 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 
                    1px 1px 0px #ff4757,
                    2px 2px 0px #ff3742,
                    3px 3px 0px #ff2f3a,
                    4px 4px 0px #ff2833,
                    5px 5px 0px #ff212c;
                font-weight: 900;
                position: relative;
                display: inline-block;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-top: 30px;
                padding: 0 8px;
            }
            
            .feature-card {
                padding: 20px 15px;
                margin: 0;
                border-radius: 20px;
                box-shadow: 0 6px 20px rgba(0,0,0,0.08);
                background: white;
                border: 1px solid #e2e8f0;
            }
            
            .feature-icon {
                font-size: 2.5rem;
                margin-bottom: 12px;
            }
            
            .feature-card h3 {
                font-size: 1.1rem;
                margin-bottom: 10px;
                color: #2d3748;
                font-weight: 600;
            }
            
            .feature-card p {
                font-size: 0.85rem;
                line-height: 1.5;
                color: #4a5568;
            }
            
            .benefits {
                padding: 25px 0;
                background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            }
            
            .benefits-content {
                grid-template-columns: 1fr;
                gap: 25px;
                padding: 0 8px;
            }
            
            .benefits-text h2 {
                font-size: 2.2rem;
                margin-bottom: 30px;
                text-align: center;
                color: #ffffff;
                font-weight: 800;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            }
            
            .benefits-list {
                padding: 0;
            }
            
            .benefits-list li {
                margin-bottom: 15px;
                font-size: 0.95rem;
                line-height: 1.5;
                padding-left: 20px;
                font-weight: 500;
                white-space: nowrap;
                position: relative;
            }
            
            .benefits-list li::before {
                content: 'âœ¨';
                position: absolute;
                left: 0;
                top: 0;
                font-size: 1rem;
            }
            
            .highlight-box {
                padding: 30px 25px;
                margin: 0;
                border-radius: 20px;
                background: rgba(255,255,255,0.15);
                backdrop-filter: blur(15px);
            }
            
            .highlight-box h3 {
                font-size: 1.5rem;
                margin-bottom: 20px;
                font-weight: 600;
            }
            
            .highlight-box p {
                font-size: 1.05rem;
                line-height: 1.7;
                font-weight: 400;
            }
            
            .cta-section {
                padding: 25px 0;
                background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            }
            
            .cta-section h2 {
                font-size: 2rem;
                margin-bottom: 25px;
                padding: 0 20px;
                line-height: 1.4;
                font-weight: 800;
                color: #ffffff;
                text-shadow: 
                    0 0 4px rgba(255,255,255,0.4),
                    0 0 8px rgba(255,255,255,0.2),
                    2px 2px 4px rgba(0,0,0,0.3);
            }
            
            .cta-section p {
                font-size: 1.15rem;
                margin-bottom: 35px;
                padding: 0 20px;
                line-height: 1.6;
                font-weight: 400;
            }
            
            .resources-showcase {
                padding: 25px 0;
                background: #f8fafc;
            }
            
            .resources-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-top: 25px;
                padding: 0 8px;
            }
            
            .resource-category {
                padding: 18px 12px;
                margin: 0;
                border-radius: 15px;
                background: white;
                box-shadow: 0 6px 20px rgba(0,0,0,0.06);
                border: 1px solid #e2e8f0;
            }
            
            .resource-category h3 {
                font-size: 1rem;
                margin-bottom: 10px;
                color: #2d3748;
                font-weight: 600;
            }
            
            .resource-category li {
                padding: 4px 0 4px 15px;
                font-size: 0.8rem;
                line-height: 1.4;
                color: #4a5568;
                position: relative;
            }
            
            .resource-category li::before {
                content: 'â€¢';
                color: #667eea;
                font-weight: bold;
                position: absolute;
                left: 0;
                top: 4px;
                font-size: 0.9rem;
            }
            
            .floating-elements::before,
            .floating-elements::after {
                width: 70px;
                height: 70px;
            }
        }
        
        @media (max-width: 480px) {
            .hero {
                padding: 40px 0;
            }
            
            .hero h1 {
                font-size: 2rem;
                margin-bottom: 18px;
                line-height: 1.2;
                font-weight: 800;
            }
            
            .bni-text {
                background: linear-gradient(135deg, #ff0000 0%, #ff3333 30%, #ff6666 60%, #ff9999 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: #ff0000; /* å‚™ç”¨é¡è‰² */
                font-weight: 800;
                text-shadow: 
                    0 0 4px rgba(255,0,0,0.6),
                    0 0 8px rgba(255,0,0,0.4),
                    0 0 12px rgba(255,0,0,0.2),
                    2px 2px 4px rgba(0,0,0,0.5),
                    4px 4px 8px rgba(0,0,0,0.3),
                    6px 6px 12px rgba(0,0,0,0.2);
                filter: drop-shadow(0 0 6px rgba(255,0,0,0.3));
            }
            
            .huadi-text {
                background: linear-gradient(135deg, #d97706 0%, #ea580c 30%, #f97316 60%, #fb923c 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: #d97706; /* å‚™ç”¨é¡è‰² */
                font-weight: 800;
                text-shadow: 
                    0 0 4px rgba(217,119,6,0.6),
                    0 0 8px rgba(217,119,6,0.4),
                    0 0 12px rgba(217,119,6,0.2),
                    2px 2px 4px rgba(0,0,0,0.5),
                    4px 4px 8px rgba(0,0,0,0.3),
                    6px 6px 12px rgba(0,0,0,0.2);
                filter: drop-shadow(0 0 6px rgba(217,119,6,0.3));
            }
            
            .online-text {
                background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 50%, #e6f3ff 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: inherit; /* å‚™ç”¨é¡è‰² */
                font-weight: 600;
            }
            
            .diamond-text {
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 20%, #e2e8f0 40%, #cbd5e0 60%, #a0aec0 80%, #718096 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: #ffffff; /* å‚™ç”¨é¡è‰² */
                font-weight: 800;
                animation: diamondShineMobile 3s ease-in-out infinite;
                position: relative;
                text-shadow: 
                    2px 2px 4px rgba(0,0,0,0.3),
                    4px 4px 8px rgba(0,0,0,0.2),
                    6px 6px 12px rgba(0,0,0,0.1);
                filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
            }
            
            @keyframes diamondShineMobile {
                0%, 100% {
                    text-shadow: 
                        0 0 3px rgba(255,255,255,0.2),
                        0 0 6px rgba(255,255,255,0.1);
                    filter: brightness(1);
                }
                50% {
                    text-shadow: 
                        0 0 5px rgba(255,255,255,0.4),
                        0 0 10px rgba(255,255,255,0.2);
                    filter: brightness(1.2);
                }
            }
            
            .chapter-text {
                background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 50%, #e6f3ff 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: inherit; /* å‚™ç”¨é¡è‰² */
                font-weight: 600;
            }
            
            .hero .subtitle {
                font-size: 1.1rem;
                margin-bottom: 30px;
                padding: 0 20px;
                line-height: 1.4;
                font-weight: 500;
                text-align: center;
            }
            
            .mobile-break {
                display: block;
            }
            
            /* æ‰‹æ©Ÿç‰ˆï¼šBNI/è¯åœ°ç”¢ æ¡ç”¨ç´”è‰²ä¸¦ç§»é™¤éœ§åŒ–æ•ˆæœ */
            .bni-text {
                background: none !important;
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                color: #ff0000 !important; /* äº®ç´… */
                text-shadow: 
                    1px 1px 0 #cc0000,
                    2px 2px 0 #990000,
                    3px 3px 0 #660000,
                    4px 4px 8px rgba(0,0,0,0.3) !important;
                filter: none !important;
            }
            .huadi-text {
                background: none !important;
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                color: #d97706 !important; /* æ·ºå’–å•¡/ç¥ç€è‰² */
                text-shadow: 
                    1px 1px 0 #b8650a,
                    2px 2px 0 #9c5508,
                    3px 3px 0 #804506,
                    4px 4px 8px rgba(0,0,0,0.3) !important;
                filter: none !important;
            }
            
            .highlight-text {
                color: #ffd700 !important; /* æ‰‹æ©Ÿç‰ˆä½¿ç”¨ç´”è‰²ç¢ºä¿å¯è¦‹ */
                background: none !important; /* ç§»é™¤æ¼¸å±¤èƒŒæ™¯ */
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                font-weight: 600;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
                animation: none !important;
            }
            
            @keyframes highlightPulseMobile {
                0%, 100% {
                    transform: scale(1);
                    filter: brightness(1);
                }
                50% {
                    transform: scale(1.02);
                    filter: brightness(1.2);
                }
            }
            
            .cta-button {
                padding: 16px 30px;
                font-size: 1.1rem;
                border-radius: 40px;
                font-weight: 800;
                min-height: 52px;
                margin: 10px;
                margin-top: 5px;
                color: #8b4513 !important;
                background: linear-gradient(135deg, 
                    #ffd700 0%, 
                    #ffed4e 15%, 
                    #ffd700 30%, 
                    #ffed4e 45%, 
                    #ffd700 60%, 
                    #ffed4e 75%, 
                    #ffd700 90%, 
                    #ffed4e 100%) !important;
                box-shadow: 
                    0 4px 15px rgba(255, 215, 0, 0.4),
                    0 8px 25px rgba(255, 215, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.2) !important;
                border: 2px solid rgba(255, 215, 0, 0.8) !important;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            }
            
            .event-showcase {
                padding: 20px 0;
            }
            
            .event-header {
                margin-bottom: 12px;
            }
            
            .event-date-badge {
                padding: 4px 10px;
                margin-top: 0;
                border-radius: 35px;
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.2);
            }
            
            .date-number {
                font-size: 1.3rem;
                margin-right: 8px;
            }
            
            .date-text {
                font-size: 1rem;
                font-weight: 700;
            }
            
            .event-subtitle {
                font-size: 1rem;
                margin-bottom: 25px;
                padding: 0 20px;
                line-height: 1.3;
            }
            
            .event-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                padding: 0 20px;
            }
            
            .event-card {
                border-radius: 10px;
            }
            
            .event-overlay p {
                font-size: 0.85rem;
            }
            
            .close {
                top: 10px;
                right: 20px;
                font-size: 25px;
            }

            .features {
                padding: 20px 0;
            }
            
            .section-title {
                font-size: 1.2rem; /* å¢åŠ 0.1rem */
                margin-bottom: 25px;
                padding: 0 8px;
                font-weight: 800;
                background: linear-gradient(135deg, #1a202c 0%, #4a69bd 50%, #6c5ce7 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: inherit; /* å‚™ç”¨é¡è‰² */
                line-height: 1.2;
                white-space: nowrap; /* å¼·åˆ¶ä¸æ›è¡Œ */
            }
            
            .date-highlight {
                background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 30%, #ff6b6b 60%, #ff4757 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 
                    1px 1px 0px #ff4757,
                    2px 2px 0px #ff3742,
                    3px 3px 0px #ff2f3a,
                    4px 4px 0px #ff2833,
                    5px 5px 0px #ff212c;
                font-weight: 900;
                position: relative;
                display: inline-block;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                padding: 0 5px;
            }
            
            .feature-card {
                padding: 15px 10px;
                margin: 0;
                border-radius: 15px;
            }
            
            .feature-icon {
                font-size: 2rem;
                margin-bottom: 8px;
            }
            
            .feature-card h3 {
                font-size: 1rem;
                margin-bottom: 8px;
                font-weight: 600;
            }
            
            .feature-card p {
                font-size: 0.8rem;
                line-height: 1.4;
            }
            
            .benefits {
                padding: 20px 0;
            }
            
            .benefits-text h2 {
                font-size: 1.9rem;
                margin-bottom: 25px;
                color: #ffffff;
                font-weight: 800;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            }
            
            .benefits-list li {
                font-size: 0.9rem;
                margin-bottom: 12px;
                line-height: 1.4;
                padding-left: 18px;
                font-weight: 500;
                white-space: nowrap;
                position: relative;
            }
            
            .benefits-list li::before {
                content: 'âœ¨';
                position: absolute;
                left: 0;
                top: 0;
                font-size: 0.9rem;
            }
            
            .highlight-box {
                padding: 25px 20px;
                margin: 0;
                border-radius: 18px;
            }
            
            .highlight-box h3 {
                font-size: 1.3rem;
                margin-bottom: 15px;
                font-weight: 600;
            }
            
            .highlight-box p {
                font-size: 1rem;
                line-height: 1.6;
            }
            
            .cta-section {
                padding: 20px 0;
            }
            
            .cta-section h2 {
                font-size: 1.7rem;
                padding: 0 25px;
                line-height: 1.3;
                font-weight: 800;
                color: #ffffff;
                text-shadow: 
                    0 0 3px rgba(255,255,255,0.4),
                    0 0 6px rgba(255,255,255,0.2),
                    2px 2px 4px rgba(0,0,0,0.3);
            }
            
            .cta-section p {
                font-size: 1.05rem;
                padding: 0 25px;
                line-height: 1.5;
                font-weight: 400;
            }
            
            .resources-showcase {
                padding: 20px 0;
            }
            
            .resources-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin-top: 30px;
                padding: 0 5px;
            }
            
            .resource-category {
                padding: 15px 10px;
                margin: 0;
                border-radius: 12px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.08);
                border: 1px solid rgba(0,0,0,0.05);
            }
            
            .resource-category h3 {
                font-size: 0.95rem;
                margin-bottom: 8px;
                font-weight: 600;
                color: #2c3e50;
                border-bottom: 1px solid #e9ecef;
                padding-bottom: 5px;
            }
            
            .resource-category li {
                padding: 3px 0 3px 12px;
                font-size: 0.75rem;
                line-height: 1.3;
                border-bottom: 1px solid rgba(0,0,0,0.05);
                position: relative;
            }
            
            .resource-category li::before {
                content: 'â€¢';
                color: #667eea;
                font-weight: bold;
                position: absolute;
                left: 0;
                top: 3px;
                font-size: 0.8rem;
            }
            
            .resource-category li:last-child {
                border-bottom: none;
            }
            
            /* æ‰‹æ©Ÿç‰ˆå„ªåŒ–å‹•æ…‹æ•ˆæœ - æ¸›å°‘æ¨¡ç³Šå’Œå¹²æ“¾ */
            .highlight-text {
                color: #ffd700 !important; /* æ‰‹æ©Ÿç‰ˆä½¿ç”¨ç´”è‰²ç¢ºä¿å¯è¦‹ */
                background: none !important; /* ç§»é™¤æ¼¸å±¤èƒŒæ™¯ */
                -webkit-background-clip: unset !important;
                -webkit-text-fill-color: unset !important;
                background-clip: unset !important;
                animation: none !important;
            }
            
            .diamond-text {
                animation: diamondShineMobile 4s ease-in-out infinite;
            }
            
            @keyframes highlightPulseMobile {
                0%, 100% {
                    transform: scale(1);
                    filter: brightness(1);
                }
                50% {
                    transform: scale(1.01);
                    filter: brightness(1.1);
                }
            }
            
            @keyframes diamondShineMobile {
                0%, 100% {
                    text-shadow: 
                        0 0 2px rgba(255,255,255,0.1),
                        0 0 4px rgba(255,255,255,0.05);
                    filter: brightness(1);
                }
                50% {
                    text-shadow: 
                        0 0 3px rgba(255,255,255,0.2),
                        0 0 6px rgba(255,255,255,0.1);
                    filter: brightness(1.1);
                }
            }
        }
        
        .floating-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .floating-elements::before,
        .floating-elements::after {
            content: '';
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-elements::before {
            top: 20%;
            left: 10%;
            animation-delay: -2s;
        }
        
        .floating-elements::after {
            top: 60%;
            right: 10%;
            animation-delay: -4s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* é ‚éƒ¨åŠ è¼‰é€²åº¦æ¢ - å„ªåŒ–ï¼šæ¸›å°‘å‹•ç•«æ™‚é–“ */
        #loading-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform-origin: left;
            animation: loading-progress 1.5s ease-out forwards;
            z-index: 9999;
            box-shadow: 0 2px 5px rgba(102, 126, 234, 0.5);
            will-change: transform; /* GPU åŠ é€Ÿ */
        }
        
        @keyframes loading-progress {
            0% { transform: scaleX(0); }
            50% { transform: scaleX(0.7); }
            100% { transform: scaleX(1); opacity: 0; }
        }
        
        /* ğŸš€ å„ªåŒ–ï¼šåˆå§‹è¼‰å…¥æ™‚æ¸›å°‘å‹•ç•«ï¼Œæå‡æ€§èƒ½ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* ğŸš€ å„ªåŒ–ï¼šæ–°èé€£çµæ¨£å¼ï¼ˆç§»é™¤å…§è¯æ¨£å¼ï¼‰ */
        .news-link {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
            text-align: center;
            line-height: 1.4;
        }
        
        .news-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        
        .news-link:focus {
            outline: 2px solid #fff;
            outline-offset: 2px;
        }
        
        /* ä¸Šå‚³å…¥å£åœ–æ¨™æŒ‰éˆ• */
        .upload-trigger-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            z-index: 9998; /* æé«˜ z-indexï¼Œç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
            border: none;
            color: white;
            pointer-events: auto; /* ç¢ºä¿å¯ä»¥é»æ“Š */
        }
        
        .upload-trigger-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .upload-trigger-btn:active {
            transform: scale(0.95);
        }
        
        /* Footer ä¸­çš„ä¸Šå‚³æŒ‰éˆ•æ¨£å¼è¦†è“‹ */
        footer .upload-trigger-btn {
            position: relative;
            bottom: auto;
            right: auto;
            width: 50px;
            height: 50px;
            font-size: 24px;
        }
        
        /* å¯†ç¢¼é©—è­‰å½ˆçª— */
        .password-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
        }
        
        .password-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .password-modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .password-modal-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .password-modal-header h3 {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .password-modal-header p {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .password-section {
            margin-bottom: 20px;
        }
        
        .password-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .password-input {
            flex: 1;
            min-width: 200px;
            padding: 12px 20px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .password-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .password-button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .password-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }
        
        .password-error {
            color: #dc3545;
            margin-top: 10px;
            font-size: 0.9rem;
            display: none;
        }
        
        .password-modal-content {
            position: relative;
        }
        
        .password-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 28px;
            color: #6c757d;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            background: rgba(108, 117, 125, 0.1);
            line-height: 1;
        }
        
        .password-modal-close:hover {
            background: rgba(108, 117, 125, 0.2);
            color: #2c3e50;
            transform: rotate(90deg) scale(1.1);
        }
        
        .password-modal-close:active {
            transform: rotate(90deg) scale(0.95);
        }
        
        /* åœ–ç‰‡ä¸Šå‚³å½ˆçª— */
        .upload-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }
        
        .upload-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .upload-modal-content {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            padding: 0;
            border-radius: 24px;
            max-width: 950px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1);
            animation: modalSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .upload-modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px 40px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .upload-modal-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .upload-modal-header h2 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .upload-modal-header h2::before {
            content: 'ğŸ“¸';
            font-size: 2rem;
        }
        
        .upload-modal-close {
            position: absolute;
            top: 25px;
            right: 25px;
            font-size: 28px;
            color: white;
            cursor: pointer;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            z-index: 10;
        }
        
        .upload-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg) scale(1.1);
        }
        
        .upload-modal-body {
            padding: 40px;
            overflow-y: auto;
            flex: 1;
        }
        
        .upload-area {
            display: block;
        }
        
        .upload-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-top: 30px;
        }
        
        .upload-item {
            position: relative;
            border: 3px dashed #e0e7ff;
            border-radius: 20px;
            padding: 30px 20px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: linear-gradient(145deg, #ffffff 0%, #f8f9ff 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
            overflow: hidden;
        }
        
        .upload-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .upload-item:hover {
            border-color: #667eea;
            background: linear-gradient(145deg, #f0f4ff 0%, #e6f3ff 100%);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }
        
        .upload-item:hover::before {
            left: 100%;
        }
        
        .upload-item.dragover {
            border-color: #667eea;
            background: linear-gradient(145deg, #e6f3ff 0%, #d6e9ff 100%);
            transform: scale(1.03);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.3);
        }
        
        .upload-label {
            display: block;
            cursor: pointer;
            padding: 15px;
            position: relative;
            z-index: 1;
        }
        
        .upload-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .upload-text {
            font-size: 1.1rem;
            color: #495057;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .upload-hint {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .upload-input {
            display: none;
        }
        
        .upload-preview {
            margin-top: 20px;
            max-width: 100%;
            max-height: 250px;
            border-radius: 16px;
            display: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid #e0e7ff;
            object-fit: cover;
            width: 100%;
        }
        
        .upload-preview.show {
            display: block;
            animation: previewFadeIn 0.4s ease;
        }
        
        @keyframes previewFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .upload-progress {
            margin-top: 15px;
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            display: none;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .upload-progress.show {
            display: block;
        }
        
        .upload-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
            background-size: 200% 100%;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
            animation: progressShine 2s linear infinite;
        }
        
        @keyframes progressShine {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .upload-status {
            margin-top: 12px;
            font-size: 0.95rem;
            min-height: 24px;
            padding: 8px 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        .upload-status.success {
            color: #155724;
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }
        
        .upload-status.error {
            color: #721c24;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        
        .upload-status::before {
            font-size: 1.2rem;
        }
        
        .upload-status.success::before {
            content: 'âœ…';
        }
        
        .upload-status.error::before {
            content: 'âŒ';
        }
        
        .upload-button {
            margin-top: 30px;
            padding: 18px 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.15rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .upload-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .upload-button:hover:not(:disabled)::before {
            width: 300px;
            height: 300px;
        }
        
        .upload-button:hover:not(:disabled) {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .upload-button:active:not(:disabled) {
            transform: translateY(-1px) scale(0.98);
        }
        
        .upload-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* æˆåŠŸæç¤ºå½ˆçª— */
        .success-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .success-modal.active {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .success-modal-content {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 24px;
            max-width: 500px;
            width: 100%;
            padding: 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1);
            animation: successSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow: hidden;
        }
        
        @keyframes successSlideIn {
            from {
                transform: scale(0.8) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }
        
        .success-modal-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            padding: 30px 40px;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .success-modal-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: pulse 2s ease-in-out infinite;
        }
        
        .success-modal-header h3 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .success-modal-header h3::before {
            content: 'âœ…';
            font-size: 2.2rem;
            animation: bounce 0.6s ease;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .success-modal-body {
            padding: 35px 40px;
        }
        
        .success-file-list {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid #bae6fd;
        }
        
        .success-file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: white;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .success-file-item:last-child {
            margin-bottom: 0;
        }
        
        .success-file-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        
        .success-file-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .success-file-name {
            flex: 1;
            font-size: 0.95rem;
            font-weight: 600;
            color: #1e293b;
            word-break: break-all;
            line-height: 1.4;
        }
        
        .success-file-label {
            font-size: 0.85rem;
            color: #64748b;
            font-weight: 500;
            margin-right: 8px;
        }
        
        .success-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        .success-modal-button {
            padding: 12px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .success-modal-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .success-modal-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .success-modal-button.secondary {
            background: #f1f5f9;
            color: #475569;
            border: 2px solid #e2e8f0;
        }
        
        .success-modal-button.secondary:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .success-modal-content {
                max-width: 90%;
            }
            
            .success-modal-body {
                padding: 25px 20px;
            }
            
            .success-modal-actions {
                flex-direction: column;
            }
        }
        
        .upload-button::after {
            content: 'ğŸš€';
            font-size: 1.2rem;
        }
        
        @media (max-width: 768px) {
            .upload-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .upload-modal-header {
                padding: 25px 20px;
            }
            
            .upload-modal-header h2 {
                font-size: 1.5rem;
            }
            
            .upload-modal-body {
                padding: 25px 20px;
            }
            
            .upload-item {
                padding: 25px 15px;
            }
            
            .upload-icon {
                font-size: 3.5rem;
            }
            
            .upload-button {
                width: 100%;
                padding: 16px 30px;
                font-size: 1.05rem;
            }
            
            .password-input-group {
                flex-direction: column;
            }
            
            .password-input {
                width: 100%;
            }
            
            .password-button {
                width: 100%;
            }
            
            .upload-trigger-btn {
                width: 50px;
                height: 50px;
                font-size: 24px;
                bottom: 20px;
                right: 20px;
            }
            
            .upload-modal-close {
                top: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
                font-size: 24px;
            }
            
            .upload-modal-content {
                max-height: 95vh;
                border-radius: 20px;
            }
            
            .password-modal-content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- åŠ è¼‰é€²åº¦æ¢ -->
    <div id="loading-bar" role="progressbar" aria-label="é é¢è¼‰å…¥ä¸­" aria-hidden="true"></div>
    <section class="hero" role="banner">
        <div class="floating-elements"></div>
        <div class="container">
            <h1><span class="bni-text">BNI</span><span class="huadi-text">è¯åœ°ç”¢</span><span class="online-text">ç·šä¸Š</span><span class="diamond-text">é‘½çŸ³</span><span class="chapter-text">åˆ†æœƒ</span></h1>
            <p class="subtitle">å…¨å°å”¯ä¸€<span class="highlight-text">æˆ¿åœ°ç”¢ä¸»é¡Œå¼</span> BNI åˆ†æœƒ<br class="mobile-break">æ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦<span class="highlight-text">å…¨çƒå‰10å</span></p>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScKm2_Nzqao8v1wy0ZLMwLiGzA3as4Lh-RXginugjeMZ4gosg/viewform?usp=sharing&ouid=117191109196635337936" 
               class="cta-button pulse" 
               target="_blank" 
               rel="noopener noreferrer"
               id="hero-cta-button"
               aria-label="åŠ å…¥é«˜é€Ÿæˆé•·çš„é ‚å°–åˆ†æœƒ - é–‹å•Ÿå ±åè¡¨å–®">
                ğŸš€ åŠ å…¥é«˜é€Ÿæˆé•·çš„é ‚å°–åˆ†æœƒ
            </a>
        </div>
    </section>

    <main role="main">
    <section class="event-showcase" aria-labelledby="event-title">
        <div class="container">
            <div class="event-header">
                <h2 class="section-title" id="event-title">è¯åœ°ç”¢æ—©æœƒé›™å°ˆè¬›åŒå°</h2>
                <div class="event-date-badge">
                    <span class="date-text">ä¸²é€£æ›´å¤šå•†æ©Ÿ å…±å‰µåˆä½œæœªä¾†</span>
                </div>
            </div>
            <!-- è‡ªå‹•æ›´æ–°æ—¥æœŸè…³æœ¬ -->
            <script>
                (function() {
                    // è¨ˆç®—ä¸‹é€±å››çš„æ—¥æœŸï¼ˆé€±å›› 09:00 å¾Œè‡ªå‹•åˆ‡æ›ï¼‰
                    function getNextThursdayDate() {
                        const now = new Date();
                        const currentDay = now.getDay(); // 0=é€±æ—¥, 4=é€±å››
                        const currentHour = now.getHours();
                        
                        let targetDate = new Date(now);
                        
                        if (currentDay === 4) { // ä»Šå¤©æ˜¯é€±å››
                            if (currentHour >= 9) {
                                targetDate.setDate(targetDate.getDate() + 7);
                            }
                        } else if (currentDay > 4 || currentDay === 0) {
                            const daysUntilNextThursday = currentDay === 0 ? 4 : (11 - currentDay);
                            targetDate.setDate(targetDate.getDate() + daysUntilNextThursday);
                        } else {
                            const daysUntilThursday = 4 - currentDay;
                            targetDate.setDate(targetDate.getDate() + daysUntilThursday);
                        }
                        
                        return targetDate;
                    }
                    
                    // æ ¼å¼åŒ–æ—¥æœŸç‚º MM/DD
                    function formatDateMMDD(date) {
                        const month = String(date.getMonth() + 1).padStart(2, '0');
                        const day = String(date.getDate()).padStart(2, '0');
                        return `${month}/${day}`;
                    }
                    
                    // ç«‹å³æ›´æ–°æ¨™é¡Œ
                    const nextThursday = getNextThursdayDate();
                    const dateStr = formatDateMMDD(nextThursday);
                    const titleElement = document.getElementById('event-title');
                    if (titleElement) {
                        titleElement.textContent = `${dateStr}è¯åœ°ç”¢æ—©æœƒé›™å°ˆè¬›åŒå°`;
                    }
                })();
            </script>
            <div class="event-grid" id="event-grid">
                <!-- ğŸ¨ å„ªé›…çš„è¼‰å…¥å‹•ç•« -->
                <!-- ğŸš€ å„ªåŒ–ï¼šéª¨æ¶å±ä½¿ç”¨èˆ‡å¯¦éš›å¡ç‰‡ç›¸åŒçš„å¯¬é«˜æ¯”ï¼Œé˜²æ­¢ CLS -->
                <div class="skeleton skeleton-card" style="animation-delay: 0s; aspect-ratio: 4 / 3;"></div>
                <div class="skeleton skeleton-card" style="animation-delay: 0.1s; aspect-ratio: 4 / 3;"></div>
            </div>
            
            <!-- æ¯æ¬¡é‡æ–°æ•´ç†éƒ½å¾ Supabase è¼‰å…¥æœ€æ–°æ´»å‹•åœ–ç‰‡ï¼ˆä¸è®€å–æš«å­˜ï¼‰ -->
            <script>
                (function() {
                    // æ¯æ¬¡è¼‰å…¥é é¢æ™‚æ¸…é™¤æ´»å‹•åœ–ç‰‡æš«å­˜ï¼Œç¢ºä¿é‡æ–°æ•´ç†å¾Œé¡¯ç¤ºæœ€æ–°è³‡æ–™
                    try {
                        localStorage.removeItem('invite_event_images');
                    } catch (e) {}
                    
                    // ç¢ºä¿ supabaseClient è®Šé‡å·²è²æ˜ï¼ˆå¦‚æœé‚„æ²’è²æ˜ï¼‰
                    if (typeof window.supabaseClient === 'undefined') {
                        window.supabaseClient = null;
                    }
                    
                    try {
                        const cacheKey = 'invite_event_images';
                        const cached = localStorage.getItem(cacheKey);
                        if (cached) {
                            const imageData = JSON.parse(cached);
                            const cacheAge = Date.now() - imageData.timestamp;
                            
                            // å¦‚æœå¿«å–æœªéæœŸï¼ˆ7å¤©å…§ï¼‰
                            if (cacheAge < 7 * 24 * 60 * 60 * 1000 && imageData.image1 && imageData.image2) {
                                const eventGrid = document.getElementById('event-grid');
                                if (eventGrid) {
                                    // ç«‹å³é¡¯ç¤ºå¿«å–çš„åœ–ç‰‡
                                    eventGrid.innerHTML = `
                                        <div class="event-card" onclick="openModal('${imageData.image1.replace(/'/g, "\\'")}')">
                                            <img src="${imageData.image1.replace(/"/g, '&quot;')}" alt="å°ˆè¬›é å‘Š 1" class="event-image loaded" 
                                                 fetchpriority="high" decoding="async" loading="eager">
                                            <div class="event-overlay">
                                                <span class="event-icon">ğŸ”</span>
                                                <p>é»æ“Šæ”¾å¤§</p>
                                            </div>
                                        </div>
                                        <div class="event-card" onclick="openModal('${imageData.image2.replace(/'/g, "\\'")}')">
                                            <img src="${imageData.image2.replace(/"/g, '&quot;')}" alt="å°ˆè¬›é å‘Š 2" class="event-image loaded" 
                                                 fetchpriority="high" decoding="async" loading="eager">
                                            <div class="event-overlay">
                                                <span class="event-icon">ğŸ”</span>
                                                <p>é»æ“Šæ”¾å¤§</p>
                                            </div>
                                        </div>
                                    `;
                                    eventGrid.classList.add('content-loaded');
                                    console.log('âš¡ å·²ç«‹å³é¡¯ç¤ºå¿«å–çš„æ´»å‹•åœ–ç‰‡');
                                }
                            }
                        }
                    } catch (error) {
                        // å¿½ç•¥éŒ¯èª¤ï¼Œç¹¼çºŒæ­£å¸¸è¼‰å…¥æµç¨‹
                    }
                    
                    // ç«‹å³å¾æ•¸æ“šåº«è¼‰å…¥åœ–ç‰‡ï¼ˆç­‰å¾…è…³æœ¬åŠ è¼‰å®Œæˆï¼‰
                    (async function() {
                        // ç­‰å¾…ä¸€ä¸‹ç¢ºä¿æ‰€æœ‰è…³æœ¬éƒ½å·²åŠ è¼‰
                        await new Promise(resolve => {
                            if (document.readyState === 'loading') {
                                document.addEventListener('DOMContentLoaded', resolve);
                            } else {
                                setTimeout(resolve, 100);
                            }
                        });
                        
                        // æª¢æŸ¥ supabaseClient æ˜¯å¦å·²åˆå§‹åŒ–ï¼ˆä½¿ç”¨ window.supabaseClient æˆ–å…¨å±€è®Šé‡ï¼‰
                        const client = window.supabaseClient || (typeof supabaseClient !== 'undefined' ? supabaseClient : null);
                        
                        if (client) {
                            if (typeof loadEventImagesFromSupabase === 'function') {
                                loadEventImagesFromSupabase();
                            }
                            return;
                        }
                        
                        // å¦‚æœé‚„æ²’åˆå§‹åŒ–ï¼Œç­‰å¾…åˆå§‹åŒ–å‡½æ•¸å¯ç”¨
                        let retryCount = 0;
                        const maxRetries = 50; // æœ€å¤šç­‰å¾… 5 ç§’
                        
                        const checkAndLoad = setInterval(() => {
                            retryCount++;
                            
                            // æª¢æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–
                            const currentClient = window.supabaseClient || (typeof supabaseClient !== 'undefined' ? supabaseClient : null);
                            if (currentClient) {
                                clearInterval(checkAndLoad);
                                if (typeof loadEventImagesFromSupabase === 'function') {
                                    loadEventImagesFromSupabase();
                                }
                                return;
                            }
                            
                            // å¦‚æœåˆå§‹åŒ–å‡½æ•¸å¯ç”¨ï¼Œå˜—è©¦åˆå§‹åŒ–
                            if (typeof initSupabase === 'function') {
                                initSupabase().then(() => {
                                    clearInterval(checkAndLoad);
                                    if (typeof loadEventImagesFromSupabase === 'function') {
                                        loadEventImagesFromSupabase();
                                    }
                                }).catch((error) => {
                                    console.error('âŒ Supabase åˆå§‹åŒ–å¤±æ•—:', error);
                                });
                            }
                            
                            // å¦‚æœè¶…éæœ€å¤§é‡è©¦æ¬¡æ•¸ï¼Œé¡¯ç¤ºä½”ä½ä¸¦åœæ­¢
                            if (retryCount >= maxRetries) {
                                clearInterval(checkAndLoad);
                                console.warn('âš ï¸ Supabase åˆå§‹åŒ–è¶…æ™‚ï¼Œè«‹æª¢æŸ¥é…ç½®');
                                var eg = document.getElementById('event-grid');
                                if (eg && !eg.classList.contains('content-loaded')) {
                                    eg.innerHTML = '<div class="event-grid-empty">æš«ç„¡æ´»å‹•é å‘Š</div>';
                                    eg.classList.add('content-loaded');
                                }
                            }
                        }, 100);
                    })();
                })();
            </script>
        </div>
    </section>

    <!-- åœ–ç‰‡æ”¾å¤§æ¨¡æ…‹æ¡† -->
    <div id="imageModal" 
         class="modal" 
         onclick="closeModal()"
         role="dialog"
         aria-modal="true"
         aria-label="æ”¾å¤§åœ–ç‰‡"
         aria-hidden="true"
         tabindex="-1">
        <span class="close" 
              onclick="closeModal()"
              role="button"
              aria-label="é—œé–‰åœ–ç‰‡"
              tabindex="0">&times;</span>
        <img class="modal-content" 
             id="modalImage"
             alt="æ”¾å¤§é¡¯ç¤ºçš„æ´»å‹•åœ–ç‰‡"
             tabindex="0">
    </div>

    <!-- å¯†ç¢¼é©—è­‰å½ˆçª— -->
    <div class="password-modal" id="passwordModal">
        <div class="password-modal-content">
            <span class="password-modal-close" onclick="closePasswordModal()" aria-label="é—œé–‰å¯†ç¢¼é©—è­‰">&times;</span>
            <div class="password-modal-header">
                <h3>ğŸ”’ å¯†ç¢¼é©—è­‰</h3>
                <p>è«‹è¼¸å…¥å¯†ç¢¼ä»¥å•Ÿç”¨ä¸Šå‚³åŠŸèƒ½</p>
            </div>
            <div class="password-section">
                <div class="password-input-group">
                    <input type="password" 
                           id="passwordInput" 
                           class="password-input" 
                           placeholder="è¼¸å…¥å¯†ç¢¼"
                           autocomplete="off">
                    <button class="password-button" onclick="checkPassword()">ç¢ºèª</button>
                </div>
                <div class="password-error" id="passwordError">å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥</div>
            </div>
        </div>
    </div>

    <!-- åœ–ç‰‡ä¸Šå‚³å½ˆçª— -->
    <div class="upload-modal" id="uploadModal">
        <div class="upload-modal-content">
            <div class="upload-modal-header">
                <h2>åœ–ç‰‡ä¸Šå‚³ç®¡ç†</h2>
                <span class="upload-modal-close" onclick="closeUploadModal()">&times;</span>
            </div>
            <div class="upload-modal-body">
                <div class="upload-area" id="uploadArea">
                    <div id="configWarning" style="background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%); border: 2px solid #ffc107; border-radius: 12px; padding: 18px; margin-bottom: 24px; color: #856404; display: none; box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);">
                        <!-- é…ç½®ç‹€æ…‹å°‡ç”± JavaScript å‹•æ…‹æ›´æ–° -->
                    </div>
                    <div id="folderStructureInfo" style="display: none; background: linear-gradient(135deg, #e7f3ff 0%, #d6e9ff 100%); border: 2px solid #2196F3; border-radius: 12px; padding: 18px; margin-bottom: 24px; color: #1565C0; box-shadow: 0 4px 15px rgba(33, 150, 243, 0.2);">
                        <!-- æ–‡ä»¶åˆ†é¡çµæ§‹ä¿¡æ¯å°‡ç”± JavaScript å‹•æ…‹æ›´æ–° -->
                    </div>
                    <div class="upload-grid">
                        <div class="upload-item" id="uploadItem1">
                            <label class="upload-label" for="fileInput1">
                                <div class="upload-icon">ğŸ“·</div>
                                <div class="upload-text">é»æ“Šæˆ–æ‹–æ”¾åœ–ç‰‡ 1</div>
                                <div class="upload-hint">æ”¯æ´ JPGã€PNGã€GIF æ ¼å¼</div>
                                <input type="file" 
                                       id="fileInput1" 
                                       class="upload-input" 
                                       accept="image/*"
                                       onchange="handleFileSelect(event, 1)">
                            </label>
                            <img id="preview1" class="upload-preview" alt="é è¦½åœ–ç‰‡ 1">
                            <div class="upload-progress" id="progress1">
                                <div class="upload-progress-bar" id="progressBar1"></div>
                            </div>
                            <div class="upload-status" id="status1"></div>
                        </div>
                        
                        <div class="upload-item" id="uploadItem2">
                            <label class="upload-label" for="fileInput2">
                                <div class="upload-icon">ğŸ“·</div>
                                <div class="upload-text">é»æ“Šæˆ–æ‹–æ”¾åœ–ç‰‡ 2</div>
                                <div class="upload-hint">æ”¯æ´ JPGã€PNGã€GIF æ ¼å¼</div>
                                <input type="file" 
                                       id="fileInput2" 
                                       class="upload-input" 
                                       accept="image/*"
                                       onchange="handleFileSelect(event, 2)">
                            </label>
                            <img id="preview2" class="upload-preview" alt="é è¦½åœ–ç‰‡ 2">
                            <div class="upload-progress" id="progress2">
                                <div class="upload-progress-bar" id="progressBar2"></div>
                            </div>
                            <div class="upload-status" id="status2"></div>
                        </div>
                    </div>
                    
                    <button class="upload-button" id="uploadButton" onclick="uploadImages()" disabled>ä¸Šå‚³åœ–ç‰‡</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æˆåŠŸæç¤ºå½ˆçª— -->
    <div class="success-modal" id="successModal">
        <div class="success-modal-content">
            <div class="success-modal-header">
                <h3>ä¸Šå‚³æˆåŠŸ</h3>
            </div>
            <div class="success-modal-body">
                <div class="success-file-list">
                    <div class="success-file-item">
                        <span class="success-file-icon">ğŸ–¼ï¸</span>
                        <div class="success-file-name">
                            <span class="success-file-label">åœ–ç‰‡ 1ï¼š</span>
                            <span id="successFileName1"></span>
                        </div>
                    </div>
                    <div class="success-file-item">
                        <span class="success-file-icon">ğŸ–¼ï¸</span>
                        <div class="success-file-name">
                            <span class="success-file-label">åœ–ç‰‡ 2ï¼š</span>
                            <span id="successFileName2"></span>
                        </div>
                    </div>
                </div>
                <div class="success-modal-actions">
                    <button class="success-modal-button secondary" id="successModalStay">ç¹¼çºŒä¸Šå‚³</button>
                    <button class="success-modal-button primary" id="successModalClose">é—œé–‰çª—å£</button>
                </div>
            </div>
        </div>
    </div>


    <section class="features" aria-labelledby="features-title">
        <div class="container">
            <h2 class="section-title" id="features-title">åŠ å…¥åˆ†æœƒ<br>æ‚¨å°‡ç²å¾—é€™äº›é ‚å°–è³‡æº</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ </div>
                    <h3>åŒ…ç§Ÿä»£ç®¡å®Œæ•´ç”Ÿæ…‹åœˆ</h3>
                    <p>æ¶µè“‹é›™åŒ—ã€æ¡ƒåœ’ã€å°ä¸­ã€å°å—ã€é«˜é›„ç­‰å…¨å°åŒ…ç§Ÿä»£ç®¡å°ˆæ¥­åœ˜éšŠï¼Œå¾æˆ¿æºé–‹ç™¼åˆ°ç§Ÿå®¢ç®¡ç†ä¸€æ¢é¾æœå‹™</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ”§</div>
                    <h3>è£ä¿®å·¥ç¨‹è³‡æºåº«</h3>
                    <p>å®¤å…§è¨­è¨ˆå¸«ã€çµ±åŒ…å·¥ç¨‹ã€æ°´é›»å·¥ç­ã€æ²¹æ¼†å¸«å‚…ã€ç³»çµ±æ«ƒå» å•†ç­‰å®Œæ•´æ–½å·¥åœ˜éšŠï¼Œè®“æ‚¨çš„ç‰©ä»¶å¿«é€Ÿä¸Šç·š</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ’°</div>
                    <h3>é‡‘èæŠ•è³‡å°ˆæ¥­æ”¯æ´</h3>
                    <p>æˆ¿è²¸å°ˆå®¶ã€ç†è²¡é¡§å•ã€ä¿éšªè¦åŠƒå¸«ï¼Œæä¾›è³‡é‡‘èª¿åº¦ã€æŠ•è³‡ç­–ç•¥ã€é¢¨éšªè¦åŠƒç­‰å…¨æ–¹ä½è²¡å‹™è«®è©¢</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">âš–ï¸</div>
                    <h3>æ³•å¾‹å»ºç¯‰å°ˆæ¥­åœ˜éšŠ</h3>
                    <p>å°ˆæ¥­å¾‹å¸«ã€åœ°æ”¿å£«ã€å»ºç¯‰å¸«ã€åˆæ³•éš”å¥—é¡§å•ï¼Œå”åŠ©è™•ç†å¥‘ç´„ã€ç”¢æ¬Šã€æ³•è¦ç­‰æ‰€æœ‰æ³•å‹™å•é¡Œ</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ¯</div>
                    <h3>è¡ŒéŠ·ç§‘æŠ€æ•´åˆæœå‹™</h3>
                    <p>ç¤¾ç¾¤è¡ŒéŠ·ã€å»£å‘ŠæŠ•æ”¾ã€ç¶²ç«™å»ºç½®ã€AIç³»çµ±é–‹ç™¼ï¼Œå¹«æ‚¨æå‡æ¥­å‹™æ•ˆç‡å’Œå¸‚å ´ç«¶çˆ­åŠ›</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸŒ</div>
                    <h3>æµ·å¤–æŠ•è³‡æ‹“å±•æ©Ÿæœƒ</h3>
                    <p>æ¾³æ´²ã€æ–°åŠ å¡ã€æ—¥æœ¬ç­‰æµ·å¤–æˆ¿åœ°ç”¢æŠ•è³‡å°ˆå®¶ï¼Œå”åŠ©æ‚¨å¸ƒå±€åœ‹éš›å¸‚å ´ï¼Œåˆ†æ•£æŠ•è³‡é¢¨éšª</p>
                </div>
            </div>
        </div>
    </section>

    <section class="resources-showcase" aria-labelledby="resources-title">
        <div class="container">
            <h2 class="section-title" id="resources-title">100+ ä½æœƒå“¡<br>ç‚ºæ‚¨æä¾›çš„å¯¦æˆ°è³‡æº</h2>
            <div class="resources-grid">
                <div class="resource-category">
                    <h3>ğŸ¢ æˆ¿æºé–‹ç™¼èˆ‡ç®¡ç†</h3>
                    <ul>
                        <li>å…¨å°å„å€åŒ…ç§Ÿä»£ç®¡å°ˆæ¥­åœ˜éšŠ</li>
                        <li>æ³•æ‹å±‹ä»£æ¨™èˆ‡æŠ•è³‡æ©Ÿæœƒ</li>
                        <li>å±è€éƒ½æ›´æ•´åˆé–‹ç™¼è³‡æº</li>
                        <li>åˆæ³•éš”å¥—è¦åŠƒèˆ‡ç”³è«‹</li>
                        <li>æ°‘å®¿æ—…å®¿ç‡Ÿé‹ç®¡ç†</li>
                    </ul>
                </div>
                <div class="resource-category">
                    <h3>âš’ï¸ å°ˆæ¥­å·¥ç¨‹æœå‹™</h3>
                    <ul>
                        <li>å®¤å…§è¨­è¨ˆèˆ‡çµ±åŒ…å·¥ç¨‹</li>
                        <li>è»Ÿè£è¨­è¨ˆèˆ‡ç©ºé–“æ”¹é€ </li>
                        <li>æ°´é›»å·¥ç¨‹èˆ‡å†·æ°£å®‰è£</li>
                        <li>ç³»çµ±æ«ƒèˆ‡å»ºæä¾›æ‡‰</li>
                        <li>æ¸…æ½”æ¬å®¶èˆ‡ç¶­ä¿®æœå‹™</li>
                    </ul>
                </div>
                <div class="resource-category">
                    <h3>ğŸ’¼ é‡‘èèˆ‡æ³•å‹™</h3>
                    <ul>
                        <li>æˆ¿è²¸èˆ‡ç†è²¡è¦åŠƒè«®è©¢</li>
                        <li>ä¿éšªèˆ‡é¢¨éšªç®¡ç†</li>
                        <li>åœ°æ”¿å£«èˆ‡ç”¢æ¬Šæœå‹™</li>
                        <li>å¾‹å¸«èˆ‡å¥‘ç´„å¯©æŸ¥</li>
                        <li>ç¨…å‹™è¦åŠƒèˆ‡ç¯€ç¨…ç­–ç•¥</li>
                    </ul>
                </div>
                <div class="resource-category">
                    <h3>ğŸŒ è¡ŒéŠ·ç§‘æŠ€</h3>
                    <ul>
                        <li>ç¤¾ç¾¤è¡ŒéŠ·èˆ‡å»£å‘ŠæŠ•æ”¾</li>
                        <li>ç¶²ç«™å»ºç½®èˆ‡SEOå„ªåŒ–</li>
                        <li>çŸ­å½±éŸ³è£½ä½œèˆ‡ä»£æ“</li>
                        <li>AIç³»çµ±èˆ‡ç®¡ç†å·¥å…·</li>
                        <li>å“ç‰Œè¨­è¨ˆèˆ‡æ´»å‹•ä¼åŠƒ</li>
                    </ul>
                </div>
                <div class="resource-category">
                    <h3>ğŸŒ æµ·å¤–æŠ•è³‡</h3>
                    <ul>
                        <li>æ¾³æ´²æˆ¿åœ°ç”¢æŠ•è³‡èˆ‡ç§»æ°‘</li>
                        <li>æ–°åŠ å¡ç½®ç”¢èˆ‡è«®è©¢</li>
                        <li>æ—¥æœ¬æˆ¿ç”¢èˆ‡æ—…å®¿é–‹ç™¼</li>
                        <li>æ±å—äºå¸‚å ´æ‹“å±•</li>
                        <li>æµ·å¤–è³‡ç”¢é…ç½®è¦åŠƒ</li>
                    </ul>
                </div>
                <div class="resource-category">
                    <h3>ğŸ¯ å°ˆæ¥­åŸ¹è¨“</h3>
                    <ul>
                        <li>æˆ¿åœ°ç”¢æŠ•è³‡å¯¦æˆ°èª²ç¨‹</li>
                        <li>åŒ…ç§Ÿä»£ç®¡ç‡Ÿé‹åŸ¹è¨“</li>
                        <li>è²·æˆ¿è­°åƒ¹èˆ‡ç­–ç•¥æŒ‡å°</li>
                        <li>é¢¨æ°´å‘½ç†èˆ‡ç©ºé–“è¦åŠƒ</li>
                        <li>è²¡å•†æ•™è‚²èˆ‡ç†è²¡è¦åŠƒ</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="benefits" aria-labelledby="benefits-title">
        <div class="container">
            <div class="benefits-content">
                <div class="benefits-text">
                    <h2 id="benefits-title">ç³»çµ±åŒ–çš„å•†å‹™åˆä½œæ¨¡å¼</h2>
                    <div style="text-align: center; margin-bottom: 30px;">
                        <a href="https://tw.news.yahoo.com/%E5%85%A8%E5%8F%B0%E5%94%AF-%E6%88%BF%E5%9C%B0%E7%94%A2%E4%B8%BB%E9%A1%8C%E5%BC%8Fbni%E5%88%86%E6%9C%83-%E8%97%8D%E5%A4%AA%E5%A4%AA%E9%A0%98%E8%BB%8D-%E8%8F%AF%E5%9C%B0%E7%94%A2-%E6%89%93%E9%80%A0%E6%88%BF%E5%9C%B0%E7%94%A2%E7%95%8C%E6%9C%80%E5%BC%B7-070320469.html" 
                           target="_blank" 
                           rel="noopener noreferrer"
                           class="news-link"
                           aria-label="é–±è®€é›…è™æ–°èå ±å°ï¼šå…¨å°å”¯ä¸€æˆ¿åœ°ç”¢ä¸»é¡Œå¼BNIåˆ†æœƒ">
                            ğŸ“° é›…è™æ–°èå ±å°ï¼š<br>å…¨å°å”¯ä¸€æˆ¿åœ°ç”¢ä¸»é¡Œå¼BNIåˆ†æœƒ
                        </a>
                    </div>
                    <ul class="benefits-list">
                        <li>æ–°åˆ†æœƒæœƒå“¡æˆé•·é€Ÿåº¦<span class="highlight-text">å…¨çƒå‰ 10 å</span></li>
                        <li>å·²çªç ´ <span class="highlight-text">100+ ä½é ‚å°–æˆ¿åœ°ç”¢æœƒå“¡</span></li>
                        <li>ã€Œåˆä½œä¸æ˜¯é æƒ…åˆ†ï¼Œè€Œæ˜¯é <span class="highlight-text">ç³»çµ±</span>ã€- è—å¤ªå¤ª</li>
                        <li>æ¯é€±å›ºå®šç¯€å¥æ›´æ–°é€²åº¦ã€äº¤æ›è³‡æº</li>
                        <li>BNIã€Œ<span class="highlight-text">Givers Gain</span>ã€æ ¸å¿ƒåƒ¹å€¼ï¼Œå…ˆä»˜å‡ºå†æ”¶ç©«</li>
                        <li>è®“åˆä½œæ©Ÿæœƒä¸å†é é‹æ°£ï¼Œè€Œæ˜¯é <span class="highlight-text">æµç¨‹èˆ‡ç¯€å¥</span></li>
                    </ul>
                </div>
                <div class="highlight-box">
                    <h3>ğŸ¯ é©åˆå°è±¡</h3>
                    <p style="margin-top: 20px; font-size: 1.1rem; line-height: 1.8;">
                        <strong>æˆ¿åœ°ç”¢ä¸Šä¸‹æ¸¸å¾æ¥­è€…ï¼š</strong>æ­£åœ¨å°‹æ‰¾çœŸæ­£å¯é çš„<span class="highlight-text">åˆä½œç³»çµ±</span>èˆ‡<span class="highlight-text">é•·æœŸå¤¥ä¼´</span><br><br>
                        <strong>è€å±‹å±‹ä¸»ï¼š</strong>æ¡æœ‰è€å±‹ä½†ä¸çŸ¥å¦‚ä½•ä¿®ç¹•è™•ç†ï¼Œæˆ‘å€‘çš„<span class="highlight-text">è³‡é‡‘ã€äººæ‰ã€æ”¹é€ èˆ‡ç®¡ç†æ©Ÿåˆ¶</span>å·²ç‚ºæ‚¨æº–å‚™å¥½<br><br>
                        <strong>æƒ³è¦é€²å…¥æˆ¿åœ°ç”¢æ¥­ï¼š</strong>å¸Œæœ›å­¸ç¿’<span class="highlight-text">åŒ…ç§Ÿä»£ç®¡ã€æˆ¿åœ°ç”¢æŠ•è³‡</span>çš„å°ˆæ¥­äººå£«
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section class="cta-section" aria-labelledby="cta-title">
        <div class="container">
            <h2 id="cta-title">æº–å‚™å¥½åŠ å…¥æˆé•·é€Ÿåº¦<span class="highlight-text">å…¨çƒå‰10å</span>çš„<span class="highlight-text">é ‚å°–åˆ†æœƒ</span>äº†å—ï¼Ÿ</h2>
            <p><span class="highlight-text">100+ ä½æˆ¿åœ°ç”¢èè‹±</span>å·²ç¶“åŠ å…¥ï¼Œé€™ä¸æ˜¯ä¸€å ´ç¤¾äº¤ï¼Œè€Œæ˜¯ä¸€æ”¯çœŸæ­£è¦ã€Œ<span class="highlight-text">æ‰“åœ˜é«”æˆ°çš„ Power Team</span>ã€ï¼</p>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScKm2_Nzqao8v1wy0ZLMwLiGzA3as4Lh-RXginugjeMZ4gosg/viewform?usp=sharing&ouid=117191109196635337936" 
               class="cta-button" 
               target="_blank" 
               rel="noopener noreferrer"
               id="bottom-cta-button"
               aria-label="ç«‹å³å¡«å¯«å ±åè¡¨å–® - é–‹å•Ÿå ±åè¡¨å–®">
                ğŸ“ ç«‹å³å¡«å¯«å ±åè¡¨å–®
            </a>
            <p style="margin-top: 30px; font-size: 1rem; opacity: 0.8;">
                å¡«å¯«å®Œæˆå¾Œï¼Œæˆ‘å€‘å°‡å”åŠ©æ‚¨å®Œæˆå ±åç¨‹åº
            </p>
        </div>
    </section>

    </main>
    <footer role="contentinfo" style="background: #1a202c; color: #718096; text-align: center; padding: 20px 0; font-size: 0.9rem;">
        <div class="container" style="display: flex; justify-content: center; align-items: center; gap: 15px;">
            <p style="margin: 0;">è¯åœ°ç”¢é‘½çŸ³åˆ†æœƒ è³‡è¨Šçµ„-è”¡æ¿¬ç‘’è£½</p>
            <button class="upload-trigger-btn" id="uploadTriggerBtn" aria-label="é–‹å•Ÿåœ–ç‰‡ä¸Šå‚³" style="margin: 0;">
                ğŸ“¤
            </button>
        </div>
    </footer>

    <!-- Supabase JS å®¢æˆ¶ç«¯ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    
    <!-- ğŸš€ Google Apps Script è³‡æ–™è¼‰å…¥å™¨ - ä½¿ç”¨ defer éé˜»å¡è¼‰å…¥ -->
    <!-- ğŸš€ å„ªåŒ–ï¼šæ·»åŠ  integrity æª¢æŸ¥ï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰ä¸¦ç¢ºä¿éé˜»å¡ -->
    <script>
        // æª¢æ¸¬æ˜¯å¦åœ¨æœ¬åœ°æ–‡ä»¶ç³»çµ±æ‰“é–‹
        if (window.location.protocol === 'file:') {
            console.warn('âš ï¸ æª¢æ¸¬åˆ°åœ¨æœ¬åœ°æ–‡ä»¶ç³»çµ±æ‰“é–‹ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½ç„¡æ³•æ­£å¸¸å·¥ä½œ');
            console.warn('ğŸ’¡ å»ºè­°ä½¿ç”¨æœ¬åœ°æœå‹™å™¨é‹è¡Œï¼Œä¾‹å¦‚ï¼špython -m http.server 8000');
        }
    </script>
    <!-- Google Sheets è¼‰å…¥å™¨å·²ç§»é™¤ï¼Œç¾åœ¨ä½¿ç”¨ Supabase æ•¸æ“šåº« -->
    
    <!-- å¼·åˆ¶åˆ·æ–°å¿«æ·éµ -->
    <script>
        // ğŸš€ å„ªåŒ–ï¼šä½¿ç”¨ DOMContentLoaded ç¢ºä¿DOMå·²æº–å‚™å¥½
        document.addEventListener('DOMContentLoaded', function() {
            // ğŸš€ å„ªåŒ–ï¼šç”Ÿç”¢ç’°å¢ƒç§»é™¤æˆ–æ¢ä»¶åŒ–æ§åˆ¶å°æ—¥èªŒ
            const isDev = window.location.hostname === 'localhost' || 
                         window.location.hostname === '127.0.0.1' ||
                         window.location.hostname.includes('dev');
            
            // æ·»åŠ å¿«æ·éµï¼šCtrl + Shift + R å¼·åˆ¶åˆ·æ–°è³‡æ–™
            document.addEventListener('keydown', function(e) {
                // Ctrl + Shift + R
                if (e.ctrlKey && e.shiftKey && e.key === 'R') {
                    e.preventDefault();
                    if (isDev) {
                        console.log('ğŸ”„ å¼·åˆ¶åˆ·æ–°è³‡æ–™ä¸­...');
                    }
                    
                    // æ¸…é™¤å¿«å–
                    if (typeof window.SheetsDataLoader && typeof window.SheetsDataLoader.clearCache === 'function') {
                        window.SheetsDataLoader.clearCache();
                    } else if (typeof clearCache === 'function') {
                        clearCache();
                    }
                    
                    // é‡æ–°è¼‰å…¥é é¢
                    location.reload(true);
                }
            });
            
            // åœ¨æ§åˆ¶å°é¡¯ç¤ºæç¤ºï¼ˆåƒ…é–‹ç™¼ç’°å¢ƒï¼‰
            if (isDev) {
                console.log('%cğŸ’¡ æç¤ºï¼šæŒ‰ Ctrl + Shift + R å¯å¼·åˆ¶åˆ·æ–°æœ€æ–°è³‡æ–™', 'color: #4CAF50; font-size: 14px; font-weight: bold;');
            }
        });
    </script>

    <script>
        // ğŸš€ å„ªåŒ–ï¼šä½¿ç”¨ requestIdleCallback å»¶é²éé—œéµå‹•ç•«ï¼Œä¸¦æª¢æŸ¥ç³»çµ±åå¥½
        function initAnimations() {
            // æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦åå¥½æ¸›å°‘å‹•ç•«
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if (prefersReducedMotion) {
                return; // è·³éå‹•ç•«åˆå§‹åŒ–
            }
            
            const observerOptions = {
                threshold: 0.05, // é™ä½é–¾å€¼ï¼Œæ›´æ—©è§¸ç™¼å‹•ç•«
                rootMargin: '100px 0px -50px 0px' // é å…ˆè¼‰å…¥è¦–çª—å¤–çš„å…ƒç´ 
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        // å‹•ç•«å®Œæˆå¾Œåœæ­¢è§€å¯Ÿ
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            // ç‚ºå¡ç‰‡æ·»åŠ é€²å ´å‹•ç•«
            document.querySelectorAll('.feature-card').forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)'; // æ¸›å°‘ç§»å‹•è·é›¢ï¼Œæå‡æ€§èƒ½
                card.style.transition = `opacity 0.4s ease ${index * 0.05}s, transform 0.4s ease ${index * 0.05}s`;
                observer.observe(card);
            });
        }
        
        // ğŸš€ å„ªåŒ–ï¼šä½¿ç”¨ requestIdleCallback æˆ–å»¶é²åˆ°ä¸‹ä¸€å¹€
        if ('requestIdleCallback' in window) {
            requestIdleCallback(initAnimations, { timeout: 2000 });
        } else {
            // ä½¿ç”¨ requestAnimationFrame ç¢ºä¿ä¸é˜»å¡æ¸²æŸ“
            requestAnimationFrame(() => {
                setTimeout(initAnimations, 100);
            });
        }

        // ğŸš€ å„ªåŒ–ï¼šä½¿ç”¨äº‹ä»¶å§”è¨—æ¸›å°‘ç›£è½å™¨æ•¸é‡
        document.addEventListener('click', function(e) {
            const button = e.target.closest('.cta-button');
            if (!button) return;
            
            // å‰µå»ºæ¼£æ¼ªæ•ˆæœ
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.cssText = `
                position: absolute;
                border-radius: 50%;
                background: rgba(255,255,255,0.6);
                width: ${size}px;
                height: ${size}px;
                left: ${x}px;
                top: ${y}px;
                animation: ripple 0.6s linear;
                pointer-events: none;
            `;
            
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });

        // æ·»åŠ  CSS å‹•ç•«
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // åœ–ç‰‡æ”¾å¤§åŠŸèƒ½
        function openModal(imageSrc) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            if (!modal || !modalImg) return;
            
            modal.style.display = 'block';
            modalImg.src = imageSrc;
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»¾å‹•
            
            // ğŸš€ å¯è¨ªå•æ€§ï¼šèšç„¦åˆ°æ¨¡æ…‹æ¡†
            modal.focus();
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            if (!modal) return;
            
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = 'auto'; // æ¢å¾©æ»¾å‹•
            
            // ğŸš€ å¯è¨ªå•æ€§ï¼šè¿”å›ç„¦é»åˆ°è§¸ç™¼å…ƒç´ 
            const trigger = document.activeElement;
            if (trigger && trigger.closest('.event-card')) {
                trigger.focus();
            }
        }

        // æŒ‰ESCéµé—œé–‰æ¨¡æ…‹æ¡†
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('imageModal');
                if (modal && modal.style.display === 'block') {
                    closeModal();
                }
            }
        });
        
        // ğŸš€ å¯è¨ªå•æ€§ï¼šç‚ºæ¨¡æ…‹æ¡†æ·»åŠ éµç›¤æ”¯æŒ
        document.addEventListener('keydown', function(event) {
            const modal = document.getElementById('imageModal');
            if (modal && modal.style.display === 'block') {
                // Tab éµå¾ªç’°ç„¦é»
                if (event.key === 'Tab') {
                    const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    const firstElement = focusableElements[0];
                    const lastElement = focusableElements[focusableElements.length - 1];
                    
                    if (event.shiftKey && document.activeElement === firstElement) {
                        event.preventDefault();
                        lastElement.focus();
                    } else if (!event.shiftKey && document.activeElement === lastElement) {
                        event.preventDefault();
                        firstElement.focus();
                    }
                }
            }
        });
        
        // ==================== åœ–ç‰‡ä¸Šå‚³åŠŸèƒ½ ====================
        
        // å¯†ç¢¼é©—è­‰
        const UPLOAD_PASSWORD = '888';
        let isPasswordVerified = false;
        let selectedFiles = { 1: null, 2: null };
        
        // æ‰“é–‹å¯†ç¢¼é©—è­‰å½ˆçª—
        function openPasswordModal() {
            console.log('openPasswordModal è¢«èª¿ç”¨');
            const passwordModal = document.getElementById('passwordModal');
            if (!passwordModal) {
                console.error('âŒ æ‰¾ä¸åˆ°å¯†ç¢¼é©—è­‰å½ˆçª—å…ƒç´ ');
                alert('æ‰¾ä¸åˆ°å¯†ç¢¼é©—è­‰å½ˆçª—ï¼Œè«‹åˆ·æ–°é é¢é‡è©¦');
                return;
            }
            
            passwordModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            console.log('âœ… å¯†ç¢¼é©—è­‰å½ˆçª—å·²æ‰“é–‹');
            
            // èšç„¦åˆ°å¯†ç¢¼è¼¸å…¥æ¡†
            setTimeout(() => {
                const passwordInput = document.getElementById('passwordInput');
                if (passwordInput) {
                    passwordInput.focus();
                } else {
                    console.warn('âš ï¸ æ‰¾ä¸åˆ°å¯†ç¢¼è¼¸å…¥æ¡†');
                }
            }, 100);
        }
        
        // ç¢ºä¿å‡½æ•¸åœ¨å…¨å±€ä½œç”¨åŸŸå¯è¨ªå•
        window.openPasswordModal = openPasswordModal;
        
        // é—œé–‰å¯†ç¢¼é©—è­‰å½ˆçª—
        function closePasswordModal() {
            const passwordModal = document.getElementById('passwordModal');
            passwordModal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // æ¸…ç©ºå¯†ç¢¼è¼¸å…¥
            const passwordInput = document.getElementById('passwordInput');
            if (passwordInput) {
                passwordInput.value = '';
            }
            const passwordError = document.getElementById('passwordError');
            if (passwordError) {
                passwordError.style.display = 'none';
            }
        }
        
        // æ‰“é–‹ä¸Šå‚³å½ˆçª—
        function openUploadModal() {
            const uploadModal = document.getElementById('uploadModal');
            uploadModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // æª¢æŸ¥é…ç½®ç‹€æ…‹
            checkConfigStatus();
            
            // æ›´æ–°æ–‡ä»¶åˆ†é¡çµæ§‹ä¿¡æ¯
            updateFolderStructureInfo();
        }
        
        // æ›´æ–°æ–‡ä»¶åˆ†é¡çµæ§‹ä¿¡æ¯
        function updateFolderStructureInfo() {
            const infoDiv = document.getElementById('folderStructureInfo');
            if (!infoDiv) return;
            
            const examplePath = `${SUPABASE_CONFIG.projectName}/${SUPABASE_CONFIG.moduleName}/image1_1234567890.jpg`;
            
            infoDiv.innerHTML = `
                <strong>ğŸ“ æ–‡ä»¶åˆ†é¡çµæ§‹ï¼š</strong>
                <p style="margin: 10px 0 0 0; font-size: 0.9rem;">
                    ä¸Šå‚³çš„æ–‡ä»¶æœƒæŒ‰ä»¥ä¸‹çµæ§‹åˆ†é¡ï¼š<br>
                    <code>{é …ç›®åç¨±}/{åŠŸèƒ½æ¨¡å¡Š}/{æ–‡ä»¶å}</code><br>
                    <br>
                    ç•¶å‰é…ç½®ï¼š<br>
                    â€¢ é …ç›®åç¨±ï¼š<code>${SUPABASE_CONFIG.projectName}</code><br>
                    â€¢ åŠŸèƒ½æ¨¡å¡Šï¼š<code>${SUPABASE_CONFIG.moduleName}</code><br>
                    â€¢ å­˜å„²æ¡¶ï¼š<code>${SUPABASE_CONFIG.bucketName}</code><br>
                    <br>
                    å®Œæ•´è·¯å¾‘ç¤ºä¾‹ï¼š<br>
                    <code>${examplePath}</code>
                </p>
            `;
        }
        
        // æª¢æŸ¥é…ç½®ç‹€æ…‹
        function checkConfigStatus() {
            const configWarning = document.getElementById('configWarning');
            if (!configWarning) return;
            
            const hasAnonKey = SUPABASE_CONFIG.anonKey && SUPABASE_CONFIG.anonKey.trim() !== '';
            const hasSupabaseClient = supabaseClient !== null;
            
            if (hasAnonKey && hasSupabaseClient) {
                configWarning.style.display = 'none';
            } else {
                configWarning.style.display = 'block';
                configWarning.innerHTML = `
                    <strong style="color: #dc3545;">âš ï¸ Supabase æœªé…ç½®ï¼</strong>
                    <p style="margin: 10px 0 0 0; font-size: 0.9rem;">
                        è«‹åœ¨ä»£ç¢¼ä¸­æ‰¾åˆ° <code>SUPABASE_CONFIG</code> é…ç½®ï¼ˆç´„ç¬¬ 3090 è¡Œï¼‰<br>
                        <strong>é…ç½®æ­¥é©Ÿï¼š</strong><br>
                        1. è¨ªå•ï¼š<a href="https://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc/settings/api" target="_blank">Supabase API è¨­ç½®</a><br>
                        2. è¤‡è£½ "anon" æˆ– "public" key<br>
                        3. è¨­ç½® <code>SUPABASE_CONFIG.anonKey = "æ‚¨çš„key"</code><br>
                        <br>
                        åŒæ™‚ç¢ºèªå­˜å„²æ¡¶ "<code>${SUPABASE_CONFIG.bucketName}</code>" å·²å‰µå»ºä¸¦è¨­ç½®ç‚ºå…¬é–‹
                    </p>
                `;
            }
        }
        
        // é—œé–‰ä¸Šå‚³å½ˆçª—
        function closeUploadModal() {
            const uploadModal = document.getElementById('uploadModal');
            uploadModal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // é‡ç½®ä¸Šå‚³ç‹€æ…‹
            selectedFiles = { 1: null, 2: null };
            document.getElementById('fileInput1').value = '';
            document.getElementById('fileInput2').value = '';
            document.getElementById('preview1').classList.remove('show');
            document.getElementById('preview2').classList.remove('show');
            showStatus(1, '', '');
            showStatus(2, '', '');
            checkUploadButton();
        }
        
        // é¡¯ç¤ºæˆåŠŸæç¤ºå½ˆçª—
        function showSuccessModal(fileName1, fileName2, onClose, onStay) {
            const successModal = document.getElementById('successModal');
            const name1Element = document.getElementById('successFileName1');
            const name2Element = document.getElementById('successFileName2');
            const closeBtn = document.getElementById('successModalClose');
            const stayBtn = document.getElementById('successModalStay');
            
            // ç¾åŒ–æ–‡ä»¶åé¡¯ç¤ºï¼ˆåªé¡¯ç¤ºæ–‡ä»¶åï¼Œä¸é¡¯ç¤ºè·¯å¾‘å’Œæ™‚é–“æˆ³ï¼‰
            const beautifyFileName = (name) => {
                if (!name) return 'æœªçŸ¥æ–‡ä»¶';
                
                // å¦‚æœæ˜¯å®Œæ•´è·¯å¾‘ï¼Œåªå–æœ€å¾Œçš„æ–‡ä»¶åéƒ¨åˆ†
                let fileName = name.split('/').pop() || name;
                
                // å¦‚æœæ˜¯å¸¶æ™‚é–“æˆ³çš„æ–‡ä»¶åï¼ˆå¦‚ image1_1234567890.jpgï¼‰ï¼Œæå–ä¸¦ç¾åŒ–
                if (fileName.startsWith('image') && fileName.includes('_')) {
                    // æå–æ–‡ä»¶æ“´å±•å
                    const ext = fileName.split('.').pop() || '';
                    // æå–åœ–ç‰‡ç·¨è™Ÿï¼ˆ1 æˆ– 2ï¼‰
                    const match = fileName.match(/image(\d+)/);
                    const imageNum = match ? match[1] : '';
                    // è¿”å›ç¾åŒ–çš„åç¨±
                    return `åœ–ç‰‡ ${imageNum}.${ext}`;
                }
                
                // å¦‚æœæ–‡ä»¶åå¤ªé•·ï¼Œæˆªæ–·ä¸¦é¡¯ç¤ºçœç•¥è™Ÿ
                if (fileName.length > 30) {
                    const ext = fileName.split('.').pop() || '';
                    const nameWithoutExt = fileName.substring(0, fileName.lastIndexOf('.')) || fileName;
                    return nameWithoutExt.substring(0, 25) + '...' + (ext ? '.' + ext : '');
                }
                
                return fileName;
            };
            
            name1Element.textContent = beautifyFileName(fileName1);
            name2Element.textContent = beautifyFileName(fileName2);
            
            // ç¶å®šæŒ‰éˆ•äº‹ä»¶
            closeBtn.onclick = () => {
                successModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                if (onClose) onClose();
            };
            
            stayBtn.onclick = () => {
                successModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                if (onStay) onStay();
            };
            
            // é»æ“ŠèƒŒæ™¯é—œé–‰
            successModal.onclick = (e) => {
                if (e.target === successModal) {
                    successModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                    if (onClose) onClose();
                }
            };
            
            // é¡¯ç¤ºå½ˆçª—
            successModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // é©—è­‰å¯†ç¢¼
        function checkPassword() {
            const passwordInput = document.getElementById('passwordInput');
            const passwordError = document.getElementById('passwordError');
            
            if (passwordInput.value === UPLOAD_PASSWORD) {
                isPasswordVerified = true;
                passwordError.style.display = 'none';
                
                // é—œé–‰å¯†ç¢¼å½ˆçª—
                closePasswordModal();
                
                // æ‰“é–‹ä¸Šå‚³å½ˆçª—
                setTimeout(() => {
                    openUploadModal();
                }, 200);
            } else {
                passwordError.style.display = 'block';
                passwordInput.value = '';
                passwordInput.focus();
            }
        }
        
        // æŒ‰ Enter éµç¢ºèªå¯†ç¢¼
        document.getElementById('passwordInput')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });
        
        // é»æ“Šå½ˆçª—å¤–éƒ¨é—œé–‰
        document.getElementById('passwordModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closePasswordModal();
            }
        });
        
        document.getElementById('uploadModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeUploadModal();
            }
        });
        
        // æŒ‰ ESC éµé—œé–‰å½ˆçª—
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const passwordModal = document.getElementById('passwordModal');
                const uploadModal = document.getElementById('uploadModal');
                
                if (passwordModal && passwordModal.classList.contains('active')) {
                    closePasswordModal();
                } else if (uploadModal && uploadModal.classList.contains('active')) {
                    closeUploadModal();
                }
            }
        });
        
        // è™•ç†æ–‡ä»¶é¸æ“‡
        function handleFileSelect(event, index) {
            const file = event.target.files[0];
            if (!file) return;
            
            // é©—è­‰æ–‡ä»¶é¡å‹
            if (!file.type.startsWith('image/')) {
                showStatus(index, 'è«‹é¸æ“‡åœ–ç‰‡æ–‡ä»¶', 'error');
                return;
            }
            
            // é©—è­‰æ–‡ä»¶å¤§å°ï¼ˆæœ€å¤§ 10MBï¼‰
            if (file.size > 10 * 1024 * 1024) {
                showStatus(index, 'åœ–ç‰‡å¤§å°ä¸èƒ½è¶…é 10MB', 'error');
                return;
            }
            
            selectedFiles[index] = file;
            
            // é¡¯ç¤ºé è¦½
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById(`preview${index}`);
                preview.src = e.target.result;
                preview.classList.add('show');
                showStatus(index, 'åœ–ç‰‡å·²é¸æ“‡ï¼Œæº–å‚™ä¸Šå‚³', '');
            };
            reader.readAsDataURL(file);
            
            // å•Ÿç”¨ä¸Šå‚³æŒ‰éˆ•
            checkUploadButton();
        }
        
        // æ‹–æ”¾åŠŸèƒ½
        function setupDragAndDrop() {
            ['uploadItem1', 'uploadItem2'].forEach((itemId, index) => {
                const item = document.getElementById(itemId);
                const num = index + 1;
                
                item.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    item.classList.add('dragover');
                });
                
                item.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    item.classList.remove('dragover');
                });
                
                item.addEventListener('drop', function(e) {
                    e.preventDefault();
                    item.classList.remove('dragover');
                    
                    const file = e.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        const input = document.getElementById(`fileInput${num}`);
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        input.files = dataTransfer.files;
                        handleFileSelect({ target: input }, num);
                    }
                });
            });
        }
        
        // æª¢æŸ¥æ˜¯å¦å¯ä»¥ä¸Šå‚³
        function checkUploadButton() {
            const uploadButton = document.getElementById('uploadButton');
            if (selectedFiles[1] && selectedFiles[2]) {
                uploadButton.disabled = false;
            } else {
                uploadButton.disabled = true;
            }
        }
        
        // é¡¯ç¤ºç‹€æ…‹
        function showStatus(index, message, type) {
            const status = document.getElementById(`status${index}`);
            status.textContent = message;
            status.className = 'upload-status ' + type;
        }
        
        // ä¸Šå‚³åœ–ç‰‡åˆ° Cloudflare R2
        async function uploadImages() {
            if (!isPasswordVerified) {
                alert('è«‹å…ˆè¼¸å…¥æ­£ç¢ºçš„å¯†ç¢¼');
                return;
            }
            
            if (!selectedFiles[1] || !selectedFiles[2]) {
                alert('è«‹é¸æ“‡å…©å¼µåœ–ç‰‡');
                return;
            }
            
            // æª¢æŸ¥ Supabase é…ç½®
            // ä½¿ç”¨ window.supabaseClient æˆ–å±€éƒ¨è®Šé‡
            const currentClient = (typeof window !== 'undefined' && window.supabaseClient) || supabaseClient;
            if (!SUPABASE_CONFIG.anonKey || !currentClient) {
                const configMsg = 'âš ï¸ Supabase å°šæœªé…ç½®ï¼\n\n' +
                    'è«‹åœ¨ä»£ç¢¼ä¸­æ‰¾åˆ° SUPABASE_CONFIGï¼ˆç´„ç¬¬ 3141 è¡Œï¼‰\n' +
                    'è¨­ç½® anonKeyï¼š\n' +
                    '1. è¨ªå•ï¼šhttps://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc/settings/api\n' +
                    '2. è¤‡è£½ "anon" æˆ– "public" key\n' +
                    '3. åœ¨ä»£ç¢¼ä¸­è¨­ç½® SUPABASE_CONFIG.anonKey = "æ‚¨çš„key"\n\n' +
                    'åŒæ™‚ç¢ºèªï¼š\n' +
                    '- å­˜å„²æ¡¶ "' + SUPABASE_CONFIG.bucketName + '" å·²å‰µå»º\n' +
                    '- å­˜å„²æ¡¶è¨­ç½®ç‚ºå…¬é–‹ï¼ˆPublicï¼‰\n' +
                    '- å­˜å„²ç­–ç•¥å…è¨±ä¸Šå‚³ï¼ˆé‡è¦ï¼ï¼‰';
                
                alert(configMsg);
                showStatus(1, 'âŒ è«‹å…ˆé…ç½® Supabase', 'error');
                showStatus(2, 'âŒ è«‹å…ˆé…ç½® Supabase', 'error');
                return;
            }
            
            const uploadButton = document.getElementById('uploadButton');
            uploadButton.disabled = true;
            uploadButton.textContent = 'ä¸Šå‚³ä¸­...';
            
            try {
                // ä¸Šå‚³å…©å¼µåœ–ç‰‡åˆ° Supabase Storage
                const uploadPromises = [
                    uploadToSupabase(selectedFiles[1], 1),
                    uploadToSupabase(selectedFiles[2], 2)
                ];
                
                const results = await Promise.all(uploadPromises);
                
                if (results.every(r => r.success)) {
                    // åœ–ç‰‡ä¸Šå‚³æˆåŠŸï¼Œä¿å­˜åˆ° Supabase æ•¸æ“šåº«
                    const image1Url = results[0].url;
                    const image2Url = results[1].url;
                    
                    console.log('é–‹å§‹ä¿å­˜åˆ° Supabase æ•¸æ“šåº«:', { image1Url, image2Url });
                    
                    // ä¿å­˜åˆ° Supabase æ•¸æ“šåº«
                    try {
                        const saveSuccess = await saveEventImagesToSupabase(image1Url, image2Url);
                        if (saveSuccess) {
                            console.log('âœ… åœ–ç‰‡ URL å·²ä¿å­˜åˆ° Supabase æ•¸æ“šåº«');
                            // æ¸…é™¤å¿«å–ï¼Œé¿å…ä¸‹æ¬¡è¼‰å…¥ä»é¡¯ç¤ºèˆŠåœ–
                            try { localStorage.removeItem('invite_event_images'); } catch (e) {}
                            // é‡æ–°å¾è³‡æ–™åº«è¼‰å…¥ä¸¦æ›´æ–°ç•«é¢
                            loadEventImagesFromSupabase();
                        } else {
                            console.warn('âš ï¸ ä¿å­˜åˆ° Supabase æ•¸æ“šåº«å¤±æ•—ï¼Œä½†åœ–ç‰‡å·²ä¸Šå‚³æˆåŠŸ');
                        }
                    } catch (saveError) {
                        console.error('ä¿å­˜åˆ° Supabase æ•¸æ“šåº«æ™‚ç™¼ç”ŸéŒ¯èª¤:', saveError);
                    }
                    
                    // é¡¯ç¤ºç¾è§€çš„æˆåŠŸæ¶ˆæ¯
                    const fileName1 = results[0].originalFileName || results[0].fileName || 'åœ–ç‰‡ 1';
                    const fileName2 = results[1].originalFileName || results[1].fileName || 'åœ–ç‰‡ 2';
                    
                    // æ ¼å¼åŒ–æ–‡ä»¶åï¼ˆåªé¡¯ç¤ºæ–‡ä»¶åï¼Œä¸é¡¯ç¤ºè·¯å¾‘ï¼‰
                    const formatFileName = (name) => {
                        if (!name) return 'æœªçŸ¥æ–‡ä»¶';
                        // å¦‚æœæ˜¯å®Œæ•´è·¯å¾‘ï¼Œåªå–æœ€å¾Œçš„æ–‡ä»¶åéƒ¨åˆ†
                        const parts = name.split('/');
                        let fileName = parts[parts.length - 1];
                        // å¦‚æœæ˜¯å¸¶æ™‚é–“æˆ³çš„æ–‡ä»¶åï¼Œæå–åŸå§‹åç¨±ï¼ˆå¦‚æœå¯èƒ½ï¼‰
                        if (fileName.startsWith('image') && fileName.includes('_')) {
                            // ä¿æŒé¡¯ç¤ºï¼Œä½†å¯ä»¥ç¾åŒ–
                            return fileName;
                        }
                        return fileName;
                    };
                    
                    const displayName1 = formatFileName(fileName1);
                    const displayName2 = formatFileName(fileName2);
                    
                    // å‰µå»ºç¾è§€çš„æˆåŠŸæç¤ºå½ˆçª—
                    showSuccessModal(displayName1, displayName2, () => {
                        // é—œé–‰ä¸Šå‚³å½ˆçª—
                        closeUploadModal();
                    }, () => {
                        // é‡ç½®ç‹€æ…‹ä½†ä¿æŒå½ˆçª—æ‰“é–‹
                        selectedFiles = { 1: null, 2: null };
                        document.getElementById('fileInput1').value = '';
                        document.getElementById('fileInput2').value = '';
                        document.getElementById('preview1').classList.remove('show');
                        document.getElementById('preview2').classList.remove('show');
                        showStatus(1, '', '');
                        showStatus(2, '', '');
                        checkUploadButton();
                    });
                } else {
                    alert('âŒ éƒ¨åˆ†åœ–ç‰‡ä¸Šå‚³å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ§åˆ¶å°ç²å–è©³ç´°ä¿¡æ¯');
                }
            } catch (error) {
                console.error('ä¸Šå‚³éŒ¯èª¤:', error);
                alert('âŒ ä¸Šå‚³å¤±æ•—: ' + error.message);
            } finally {
                uploadButton.disabled = false;
                uploadButton.textContent = 'ä¸Šå‚³åœ–ç‰‡';
            }
        }
        
        // ä¸Šå‚³åˆ° Cloudflare R2
        // æ³¨æ„ï¼šCloudflare R2 ä½¿ç”¨ S3 å…¼å®¹ API
        // éœ€è¦é…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼ˆå»ºè­°ä½¿ç”¨ç’°å¢ƒè®Šé‡æˆ–å¾Œç«¯ APIï¼‰ï¼š
        // 1. R2_ACCESS_KEY_ID - Cloudflare R2 è¨ªå•å¯†é‘° ID
        // 2. R2_SECRET_ACCESS_KEY - Cloudflare R2 ç§˜å¯†è¨ªå•å¯†é‘°
        // 3. R2_ENDPOINT - R2 ç«¯é» URL
        // 4. R2_BUCKET_NAME - å­˜å„²æ¡¶åç¨±
        
        // R2 é…ç½®
        // âš ï¸ é‡è¦ï¼šç‚ºäº†å®‰å…¨ï¼Œå»ºè­°ä½¿ç”¨ Cloudflare Workers ä½œç‚ºå¾Œç«¯ API
        // è«‹å‰µå»ºä¸€å€‹ Cloudflare Worker ä¾†è™•ç†ä¸Šå‚³ï¼Œé¿å…åœ¨å‰ç«¯æš´éœ²è¨ªå•æ†‘è­‰
        // Supabase é…ç½®
        // é …ç›® URL: https://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc
        const SUPABASE_CONFIG = {
            url: 'https://sqgrnowrcvspxhuudrqc.supabase.co', // Supabase é …ç›® URL
            anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZ3Jub3dyY3ZzcHhodXVkcnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgyMTExNjYsImV4cCI6MjA4Mzc4NzE2Nn0.VMg-7oQTmPapHLGeLzEZ3l_5zcyCZRjJdw_X2J-8kRw', // Supabase anon key
            bucketName: 'hua-real-estate', // å­˜å„²æ¡¶åç¨±
            // åˆ†é¡è·¯å¾‘ï¼šé …ç›®åç¨±/åŠŸèƒ½æ¨¡å¡Š/å…·é«”ç”¨é€”
            // ä¾‹å¦‚ï¼šhua-real-estate/invite-photo/ ç”¨æ–¼é‚€è«‹é åœ–ç‰‡
            projectName: 'hua-real-estate', // é …ç›®åç¨±ï¼Œç”¨æ–¼åˆ†é¡
            moduleName: 'invite-photo' // åŠŸèƒ½æ¨¡å¡Šåç¨±
        };
        
        // åˆå§‹åŒ– Supabase å®¢æˆ¶ç«¯
        // ä½¿ç”¨ä¸åŒçš„è®Šé‡åé¿å…èˆ‡ Supabase åº«çš„å…¨å±€è®Šé‡è¡çª
        let supabaseClient = null;
        // åŒæ™‚è¨­ç½®ç‚º window å±¬æ€§ï¼Œæ–¹ä¾¿å…¶ä»–è…³æœ¬è¨ªå•
        if (typeof window !== 'undefined') {
            window.supabaseClient = null;
        }
        
        // å®‰å…¨ç²å– supabaseClient çš„è¼”åŠ©å‡½æ•¸
        function getSupabaseClient() {
            // å„ªå…ˆä½¿ç”¨ window.supabaseClientï¼ˆå¦‚æœå·²è¨­ç½®ï¼‰
            if (typeof window !== 'undefined' && window.supabaseClient) {
                return window.supabaseClient;
            }
            // å…¶æ¬¡ä½¿ç”¨å±€éƒ¨è®Šé‡
            if (typeof supabaseClient !== 'undefined' && supabaseClient !== null) {
                return supabaseClient;
            }
            return null;
        }
        
        function initSupabase() {
            return new Promise((resolve, reject) => {
                if (!SUPABASE_CONFIG.url || !SUPABASE_CONFIG.anonKey) {
                    console.warn('âš ï¸ Supabase é…ç½®ä¸å®Œæ•´ï¼Œè«‹è¨­ç½® anonKey');
                    reject(new Error('Supabase é…ç½®ä¸å®Œæ•´'));
                    return;
                }
                
                // æª¢æŸ¥ Supabase åº«æ˜¯å¦å·²è¼‰å…¥
                // UMD ç‰ˆæœ¬å¯èƒ½æš´éœ²ç‚º window.supabase æˆ– supabaseJs
                let supabaseLib = null;
                if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
                    supabaseLib = window.supabase;
                } else if (typeof supabaseJs !== 'undefined' && supabaseJs.createClient) {
                    supabaseLib = supabaseJs;
                } else if (typeof supabase !== 'undefined' && typeof supabase.createClient === 'function') {
                    // å¦‚æœ Supabase åº«æš´éœ²äº†å…¨å±€ supabase è®Šé‡
                    supabaseLib = supabase;
                }
                
                if (supabaseLib && supabaseLib.createClient) {
                    try {
                        supabaseClient = supabaseLib.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.anonKey);
                        // åŒæ™‚è¨­ç½®ç‚º window å±¬æ€§ï¼Œæ–¹ä¾¿å…¶ä»–è…³æœ¬è¨ªå•
                        window.supabaseClient = supabaseClient;
                        console.log('âœ… Supabase å®¢æˆ¶ç«¯åˆå§‹åŒ–æˆåŠŸ');
                        resolve(supabaseClient);
                    } catch (error) {
                        console.error('âŒ Supabase å®¢æˆ¶ç«¯åˆå§‹åŒ–å¤±æ•—:', error);
                        reject(error);
                    }
                } else {
                    const error = new Error('Supabase JS åº«æœªè¼‰å…¥ï¼Œè«‹æª¢æŸ¥ CDN é€£çµ');
                    console.error('âŒ', error.message);
                    reject(error);
                }
            });
        }
        
        // ç«‹å³åˆå§‹åŒ– Supabaseï¼ˆä¸ç­‰å¾…ï¼Œè®“åº«è¼‰å…¥å¾Œè‡ªå‹•åˆå§‹åŒ–ï¼‰
        // ä½¿ç”¨å¤šç¨®æ–¹å¼ç¢ºä¿ç›¡å¿«åˆå§‹åŒ–
        function tryInitSupabase() {
            if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
                initSupabase().catch(() => {}); // å¿½ç•¥éŒ¯èª¤ï¼Œè®“èª¿ç”¨è€…è™•ç†
                return true;
            }
            return false;
        }
        
        // ç«‹å³å˜—è©¦åˆå§‹åŒ–ï¼ˆåœ¨å¾Œå°é€²è¡Œï¼Œä¸é˜»å¡ï¼‰
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                // ç«‹å³å˜—è©¦ï¼Œå¦‚æœå¤±æ•—å‰‡é‡è©¦
                if (!tryInitSupabase()) {
                    // å¦‚æœ Supabase åº«é‚„æ²’è¼‰å…¥ï¼Œæ¯ 100ms é‡è©¦ä¸€æ¬¡ï¼Œæœ€å¤š 10 æ¬¡
                    let retryCount = 0;
                    const retryInterval = setInterval(() => {
                        if (tryInitSupabase() || retryCount >= 10) {
                            clearInterval(retryInterval);
                        }
                        retryCount++;
                    }, 100);
                }
            });
        } else {
            // å¦‚æœå·²ç¶“è¼‰å…¥ï¼Œç«‹å³å˜—è©¦
            if (!tryInitSupabase()) {
                let retryCount = 0;
                const retryInterval = setInterval(() => {
                    if (tryInitSupabase() || retryCount >= 10) {
                        clearInterval(retryInterval);
                    }
                    retryCount++;
                }, 100);
            }
        }
        
        // ä¸Šå‚³åˆ° Supabase Storage
        async function uploadToSupabase(file, index) {
            return new Promise(async (resolve, reject) => {
                const progressBar = document.getElementById(`progressBar${index}`);
                const progress = document.getElementById(`progress${index}`);
                progress.classList.add('show');
                
                try {
                    const currentClient = getSupabaseClient();
                    if (!currentClient) {
                        throw new Error('Supabase å®¢æˆ¶ç«¯æœªåˆå§‹åŒ–ï¼Œè«‹æª¢æŸ¥é…ç½®');
                    }
                    
                    // ç”Ÿæˆæ–‡ä»¶å
                    const timestamp = Date.now();
                    const fileExtension = file.name.split('.').pop() || 'jpg';
                    const fileName = `image${index}_${timestamp}.${fileExtension}`;
                    
                    // æ§‹å»ºåˆ†é¡è·¯å¾‘ï¼šé …ç›®åç¨±/åŠŸèƒ½æ¨¡å¡Š/æ–‡ä»¶å
                    // ä¾‹å¦‚ï¼šhua-real-estate/invite-photo/image1_1234567890.jpg
                    // ç¢ºä¿è·¯å¾‘æ ¼å¼æ­£ç¢ºï¼Œä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦
                    const sanitizedProjectName = SUPABASE_CONFIG.projectName.replace(/[^a-zA-Z0-9_-]/g, '');
                    const sanitizedModuleName = SUPABASE_CONFIG.moduleName.replace(/[^a-zA-Z0-9_-]/g, '');
                    const sanitizedFileName = fileName.replace(/[^a-zA-Z0-9._-]/g, '');
                    
                    const filePath = `${sanitizedProjectName}/${sanitizedModuleName}/${sanitizedFileName}`;
                    
                    // é©—è­‰è·¯å¾‘æ ¼å¼
                    if (!filePath || filePath.trim() === '' || filePath.includes('//') || filePath.startsWith('/')) {
                        throw new Error('æ–‡ä»¶è·¯å¾‘æ ¼å¼ç„¡æ•ˆ: ' + filePath);
                    }
                    
                    console.log('é–‹å§‹ä¸Šå‚³åˆ° Supabase:', {
                        bucket: SUPABASE_CONFIG.bucketName,
                        path: filePath,
                        originalFileName: file.name,
                        fileType: file.type,
                        fileSize: file.size
                    });
                    
                    // ä½¿ç”¨ Supabase Storage API ä¸Šå‚³
                    const client = getSupabaseClient();
                    if (!client) {
                        throw new Error('Supabase å®¢æˆ¶ç«¯æœªåˆå§‹åŒ–');
                    }
                    
                    const { data, error } = await client.storage
                        .from(SUPABASE_CONFIG.bucketName)
                        .upload(filePath, file, {
                            cacheControl: '3600',
                            upsert: false, // ä¸è¦†è“‹å·²å­˜åœ¨çš„æ–‡ä»¶
                            contentType: file.type || 'image/jpeg'
                        });
                    
                    if (error) {
                        progress.classList.remove('show');
                        let errorMsg = 'âŒ ä¸Šå‚³å¤±æ•—: ' + error.message;
                        
                        // ç‰¹æ®Šè™•ç†å„ç¨®éŒ¯èª¤
                        if (error.message.includes('row-level security') || error.message.includes('RLS')) {
                            errorMsg = 'âŒ ä¸Šå‚³å¤±æ•—ï¼šå­˜å„²ç­–ç•¥æœªé…ç½®\n\nè«‹åœ¨ Supabase Dashboard ä¸­é…ç½®å­˜å„²ç­–ç•¥ï¼Œå…è¨±åŒ¿åç”¨æˆ¶ä¸Šå‚³ã€‚\nè©³ç´°èªªæ˜è«‹æŸ¥çœ‹ï¼šSupabaseé…ç½®èªªæ˜.md';
                            console.error('Supabase RLS ç­–ç•¥éŒ¯èª¤:', error);
                            console.error('ğŸ’¡ è§£æ±ºæ–¹æ¡ˆï¼šéœ€è¦åœ¨ Supabase Dashboard ä¸­é…ç½®å­˜å„²ç­–ç•¥');
                        } else if (error.message.includes('InvalidKey') || error.message.includes('Invalid key')) {
                            errorMsg = 'âŒ ä¸Šå‚³å¤±æ•—ï¼šæ–‡ä»¶è·¯å¾‘æ ¼å¼éŒ¯èª¤\n\næ–‡ä»¶è·¯å¾‘: ' + filePath + '\nè«‹æª¢æŸ¥æ–‡ä»¶è·¯å¾‘æ˜¯å¦æ­£ç¢ºã€‚';
                            console.error('Supabase æ–‡ä»¶è·¯å¾‘éŒ¯èª¤:', error);
                            console.error('æ–‡ä»¶è·¯å¾‘:', filePath);
                            console.error('ğŸ’¡ è§£æ±ºæ–¹æ¡ˆï¼šæª¢æŸ¥æ–‡ä»¶è·¯å¾‘æ ¼å¼ï¼Œç¢ºä¿ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦');
                        } else {
                            console.error('Supabase ä¸Šå‚³éŒ¯èª¤:', error);
                            console.error('éŒ¯èª¤è©³æƒ…:', JSON.stringify(error, null, 2));
                        }
                        
                        showStatus(index, errorMsg, 'error');
                        reject(new Error(error.message));
                        return;
                    }
                    
                    // ç²å–å…¬é–‹ URLï¼ˆç¢ºä¿ä½¿ç”¨æ­£ç¢ºçš„å…¬é–‹ URL æ ¼å¼ï¼‰
                    // æ³¨æ„ï¼šgetPublicUrl åªéœ€è¦æ–‡ä»¶è·¯å¾‘ï¼Œä¸éœ€è¦å…¶ä»–åƒæ•¸
                    let publicUrl;
                    
                    try {
                        const client = getSupabaseClient();
                        if (!client) {
                            throw new Error('Supabase å®¢æˆ¶ç«¯æœªåˆå§‹åŒ–');
                        }
                        
                        const { data: urlData } = client.storage
                            .from(SUPABASE_CONFIG.bucketName)
                            .getPublicUrl(filePath);
                        
                        publicUrl = urlData.publicUrl;
                        
                        // é©—è­‰ URL æ ¼å¼æ˜¯å¦æ­£ç¢º
                        if (!publicUrl || !publicUrl.includes('/storage/v1/object/public/')) {
                            console.warn('âš ï¸ getPublicUrl è¿”å›çš„ URL æ ¼å¼ä¸æ­£ç¢ºï¼Œæ‰‹å‹•æ§‹å»º');
                            // æ‰‹å‹•æ§‹å»ºå…¬é–‹ URL
                            publicUrl = `${SUPABASE_CONFIG.url}/storage/v1/object/public/${SUPABASE_CONFIG.bucketName}/${filePath}`;
                        }
                    } catch (urlError) {
                        console.warn('âš ï¸ getPublicUrl å¤±æ•—ï¼Œæ‰‹å‹•æ§‹å»º URL:', urlError);
                        // å¦‚æœ getPublicUrl å¤±æ•—ï¼Œæ‰‹å‹•æ§‹å»ºå…¬é–‹ URL
                        publicUrl = `${SUPABASE_CONFIG.url}/storage/v1/object/public/${SUPABASE_CONFIG.bucketName}/${filePath}`;
                    }
                    
                    // é©—è­‰ filePath æ˜¯å¦æœ‰æ•ˆ
                    if (!filePath || filePath.trim() === '') {
                        throw new Error('æ–‡ä»¶è·¯å¾‘ç„¡æ•ˆ');
                    }
                    
                    // ç¢ºä¿ filePath ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆURL ç·¨ç¢¼ï¼‰
                    const encodedFilePath = encodeURIComponent(filePath).replace(/%2F/g, '/');
                    
                    console.log('æ–‡ä»¶è·¯å¾‘:', filePath);
                    console.log('ç”Ÿæˆçš„å…¬é–‹ URL:', publicUrl);
                    
                    progress.classList.remove('show');
                    showStatus(index, 'âœ… ä¸Šå‚³æˆåŠŸ', 'success');
                    console.log('ä¸Šå‚³æˆåŠŸ:', { path: filePath, url: publicUrl });
                    
                    resolve({ 
                        success: true, 
                        url: publicUrl, 
                        path: filePath,
                        originalFileName: file.name,
                        fileName: sanitizedFileName
                    });
                    
                } catch (error) {
                    progress.classList.remove('show');
                    showStatus(index, 'âŒ ' + error.message, 'error');
                    console.error('ä¸Šå‚³éŒ¯èª¤:', error);
                    reject(error);
                }
            });
        }
        
        // èˆŠçš„ R2 ä¸Šå‚³å‡½æ•¸ï¼ˆå·²å»¢æ£„ï¼Œä¿ç•™ç”¨æ–¼åƒè€ƒï¼‰
        async function uploadToR2_OLD(file, index) {
            return new Promise(async (resolve, reject) => {
                const progressBar = document.getElementById(`progressBar${index}`);
                const progress = document.getElementById(`progress${index}`);
                progress.classList.add('show');
                
                try {
                    // ç”Ÿæˆæ–‡ä»¶å
                    const timestamp = Date.now();
                    const fileExtension = file.name.split('.').pop() || 'jpg';
                    const fileName = `image${index}_${timestamp}.${fileExtension}`;
                    // ä¸Šå‚³åˆ° invite-photo ç›®éŒ„
                    const objectKey = `${R2_CONFIG.uploadPath}/${fileName}`;
                    
                    // æ§‹å»ºå®Œæ•´ URL
                    const url = `${R2_CONFIG.endpoint}/${R2_CONFIG.bucketName}/${objectKey}`;
                    
                    // æ–¹æ³• 1: ä½¿ç”¨ Worker API ä¸Šå‚³ï¼ˆæ¨è–¦ï¼Œé¿å… CORS å•é¡Œï¼‰
                    if (false && R2_CONFIG.apiEndpoint) {
                        // ä½¿ç”¨å¾Œç«¯ API ä¸Šå‚³
                        const formData = new FormData();
                        formData.append('file', file);
                        formData.append('fileName', fileName);
                        formData.append('index', index);
                        
                        const xhr = new XMLHttpRequest();
                        
                        xhr.upload.addEventListener('progress', function(e) {
                            if (e.lengthComputable) {
                                const percentComplete = (e.loaded / e.total) * 100;
                                progressBar.style.width = percentComplete + '%';
                            }
                        });
                        
                        xhr.addEventListener('load', function() {
                            if (xhr.status === 200) {
                                try {
                                    const response = JSON.parse(xhr.responseText);
                                    if (response.success) {
                                        progress.classList.remove('show');
                                        showStatus(index, 'âœ… ä¸Šå‚³æˆåŠŸ', 'success');
                                        resolve({ success: true, url: response.url || url });
                                    } else {
                                        throw new Error(response.error || 'ä¸Šå‚³å¤±æ•—');
                                    }
                                } catch (e) {
                                    progress.classList.remove('show');
                                    showStatus(index, 'âŒ è§£æéŸ¿æ‡‰å¤±æ•—', 'error');
                                    console.error('éŸ¿æ‡‰è§£æéŒ¯èª¤:', e, xhr.responseText);
                                    reject(e);
                                }
                            } else {
                                progress.classList.remove('show');
                                showStatus(index, 'âŒ ä¸Šå‚³å¤±æ•—: ' + xhr.status, 'error');
                                console.error('ä¸Šå‚³å¤±æ•—:', { status: xhr.status, response: xhr.responseText });
                                reject(new Error(`HTTP ${xhr.status}: ${xhr.statusText}`));
                            }
                        });
                        
                        xhr.addEventListener('error', function(e) {
                            progress.classList.remove('show');
                            showStatus(index, 'âŒ ç¶²çµ¡éŒ¯èª¤', 'error');
                            console.error('ç¶²çµ¡éŒ¯èª¤:', e);
                            reject(new Error('ç¶²çµ¡éŒ¯èª¤'));
                        });
                        
                        xhr.open('POST', R2_CONFIG.apiEndpoint);
                        xhr.send(formData);
                    } else if (R2_CONFIG.accessKeyId && R2_CONFIG.secretAccessKey) {
                        // æ–¹æ³• 2: ç›´æ¥ä½¿ç”¨ S3 å…¼å®¹ APIï¼ˆæœƒè¢« CORS é˜»æ­¢ï¼Œä¸æ¨è–¦ï¼‰
                        console.warn('âš ï¸ ç›´æ¥ä¸Šå‚³æœƒè¢« CORS é˜»æ­¢ï¼Œè«‹ä½¿ç”¨ Worker API');
                        console.log('é–‹å§‹ä¸Šå‚³åˆ° R2:', { url, objectKey, fileType: file.type, fileSize: file.size });
                        
                        try {
                            // ä½¿ç”¨ AWS Signature Version 4 ç°½åä¸Šå‚³
                            const xhr = new XMLHttpRequest();
                            
                            xhr.upload.addEventListener('progress', function(e) {
                                if (e.lengthComputable) {
                                    const percentComplete = (e.loaded / e.total) * 100;
                                    progressBar.style.width = percentComplete + '%';
                                }
                            });
                            
                            xhr.addEventListener('load', function() {
                                console.log('ä¸Šå‚³éŸ¿æ‡‰:', { status: xhr.status, statusText: xhr.statusText, response: xhr.responseText });
                                if (xhr.status === 200 || xhr.status === 201) {
                                    progress.classList.remove('show');
                                    showStatus(index, 'âœ… ä¸Šå‚³æˆåŠŸ', 'success');
                                    resolve({ success: true, url: url });
                                } else {
                                    progress.classList.remove('show');
                                    const errorText = xhr.responseText || xhr.statusText;
                                    showStatus(index, 'âŒ ä¸Šå‚³å¤±æ•—: ' + xhr.status, 'error');
                                    console.error('ä¸Šå‚³éŒ¯èª¤è©³æƒ…:', {
                                        status: xhr.status,
                                        statusText: xhr.statusText,
                                        responseText: errorText,
                                        headers: xhr.getAllResponseHeaders()
                                    });
                                    reject(new Error(`HTTP ${xhr.status}: ${errorText}`));
                                }
                            });
                            
                            xhr.addEventListener('error', function(e) {
                                progress.classList.remove('show');
                                showStatus(index, 'âŒ ç¶²çµ¡éŒ¯èª¤', 'error');
                                console.error('ç¶²çµ¡éŒ¯èª¤:', e);
                                reject(new Error('ç¶²çµ¡éŒ¯èª¤'));
                            });
                            
                            xhr.addEventListener('abort', function() {
                                progress.classList.remove('show');
                                showStatus(index, 'âŒ ä¸Šå‚³å·²å–æ¶ˆ', 'error');
                                reject(new Error('ä¸Šå‚³å·²å–æ¶ˆ'));
                            });
                            
                            // ç”Ÿæˆç°½åè«‹æ±‚
                            console.log('ç”Ÿæˆç°½å...');
                            const signedRequest = await generateSignedRequest(
                                'PUT',
                                url,
                                file.type || 'application/octet-stream',
                                file.size,
                                objectKey,
                                R2_CONFIG.accessKeyId,
                                R2_CONFIG.secretAccessKey,
                                R2_CONFIG.endpoint
                            );
                            
                            console.log('ç°½åç”Ÿæˆå®Œæˆï¼Œé–‹å§‹ä¸Šå‚³:', signedRequest.headers);
                            
                            xhr.open('PUT', url);
                            
                            // è¨­ç½®ç°½åé ­éƒ¨
                            Object.keys(signedRequest.headers).forEach(key => {
                                xhr.setRequestHeader(key, signedRequest.headers[key]);
                            });
                            
                            xhr.send(file);
                        } catch (signError) {
                            progress.classList.remove('show');
                            showStatus(index, 'âŒ ç°½åç”Ÿæˆå¤±æ•—', 'error');
                            console.error('ç°½åç”ŸæˆéŒ¯èª¤:', signError);
                            reject(new Error('ç°½åç”Ÿæˆå¤±æ•—: ' + signError.message));
                        }
                    } else if (R2_CONFIG.apiEndpoint) {
                        // æ–¹æ³• 2: ä½¿ç”¨å¾Œç«¯ API ä¸Šå‚³ï¼ˆæ¨è–¦ï¼‰
                        const formData = new FormData();
                        formData.append('file', file);
                        formData.append('fileName', fileName);
                        formData.append('index', index);
                        
                        const xhr = new XMLHttpRequest();
                        
                        xhr.upload.addEventListener('progress', function(e) {
                            if (e.lengthComputable) {
                                const percentComplete = (e.loaded / e.total) * 100;
                                progressBar.style.width = percentComplete + '%';
                            }
                        });
                        
                        xhr.addEventListener('load', function() {
                            if (xhr.status === 200) {
                                try {
                                    const response = JSON.parse(xhr.responseText);
                                    if (response.success) {
                                        progress.classList.remove('show');
                                        showStatus(index, 'âœ… ä¸Šå‚³æˆåŠŸ', 'success');
                                        resolve({ success: true, url: response.url || url });
                                    } else {
                                        throw new Error(response.error || 'ä¸Šå‚³å¤±æ•—');
                                    }
                                } catch (e) {
                                    progress.classList.remove('show');
                                    showStatus(index, 'âŒ è§£æéŸ¿æ‡‰å¤±æ•—', 'error');
                                    reject(e);
                                }
                            } else {
                                progress.classList.remove('show');
                                showStatus(index, 'âŒ ä¸Šå‚³å¤±æ•—: ' + xhr.status, 'error');
                                reject(new Error(`HTTP ${xhr.status}: ${xhr.statusText}`));
                            }
                        });
                        
                        xhr.addEventListener('error', function() {
                            progress.classList.remove('show');
                            showStatus(index, 'âŒ ç¶²çµ¡éŒ¯èª¤', 'error');
                            reject(new Error('ç¶²çµ¡éŒ¯èª¤'));
                        });
                        
                        xhr.open('POST', R2_CONFIG.apiEndpoint);
                        xhr.send(formData);
                    } else {
                        // æ–¹æ³• 3: é…ç½®æœªå®Œæˆ
                        progress.classList.remove('show');
                        const errorMsg = 'âŒ ä¸Šå‚³åŠŸèƒ½æœªé…ç½®\n\nè«‹åœ¨ä»£ç¢¼ä¸­é…ç½® R2_CONFIG.apiEndpointï¼ˆæ¨è–¦ï¼‰\næˆ–é…ç½® accessKeyId å’Œ secretAccessKey';
                        showStatus(index, errorMsg, 'error');
                        reject(new Error('è«‹é…ç½® R2_CONFIG.apiEndpoint æˆ–è¨ªå•æ†‘è­‰ã€‚è©³ç´°èªªæ˜è«‹æŸ¥çœ‹ï¼šåœ–ç‰‡ä¸Šå‚³é…ç½®èªªæ˜.md'));
                    }
                } catch (error) {
                    progress.classList.remove('show');
                    showStatus(index, 'âŒ ' + error.message, 'error');
                    reject(error);
                }
            });
        }
        
        // ç”Ÿæˆ AWS Signature Version 4 ç°½åè«‹æ±‚ï¼ˆç”¨æ–¼ S3 å…¼å®¹ APIï¼‰
        async function generateSignedRequest(method, url, contentType, contentLength, key, accessKeyId, secretAccessKey, endpoint) {
            try {
                const urlObj = new URL(url);
                const host = urlObj.hostname;
                let path = urlObj.pathname;
                
                // ç¢ºä¿è·¯å¾‘ä»¥ / é–‹é ­
                if (!path.startsWith('/')) {
                    path = '/' + path;
                }
                
                // ç²å–ç•¶å‰æ™‚é–“
                const now = new Date();
                const amzDate = now.toISOString().replace(/[:\-]|\.\d{3}/g, '').slice(0, 15) + 'Z';
                const dateStamp = amzDate.slice(0, 8);
                
                // å€åŸŸå’Œæœå‹™ï¼ˆR2 ä½¿ç”¨ autoï¼‰
                const region = 'auto';
                const service = 's3';
                
                // è¦ç¯„åŒ–è«‹æ±‚ - è·¯å¾‘éœ€è¦ URL ç·¨ç¢¼ä½†ä¿ç•™æ–œæ 
                // å…ˆå°‡è·¯å¾‘åˆ†æ®µç·¨ç¢¼ï¼Œç„¶å¾Œç”¨ / é€£æ¥
                const pathParts = path.split('/').map(part => encodeURIComponent(part));
                const canonicalUri = pathParts.join('/');
                const canonicalQueryString = '';
                
                // æ§‹å»ºè¦ç¯„åŒ–é ­éƒ¨ï¼ˆå¿…é ˆæŒ‰å­—æ¯é †åºï¼‰
                const canonicalHeaders = [
                    `host:${host}`,
                    `x-amz-content-sha256:UNSIGNED-PAYLOAD`,
                    `x-amz-date:${amzDate}`
                ].join('\n') + '\n';
                
                const signedHeaders = 'host;x-amz-content-sha256;x-amz-date';
                const payloadHash = 'UNSIGNED-PAYLOAD';
                
                const canonicalRequest = [
                    method,
                    canonicalUri,
                    canonicalQueryString,
                    canonicalHeaders,
                    signedHeaders,
                    payloadHash
                ].join('\n');
                
                console.log('Canonical Request:', canonicalRequest);
                
                // å‰µå»ºç°½åå­—ç¬¦ä¸²
                const algorithm = 'AWS4-HMAC-SHA256';
                const credentialScope = `${dateStamp}/${region}/${service}/aws4_request`;
                const canonicalRequestHash = await sha256(canonicalRequest);
                const stringToSign = [
                    algorithm,
                    amzDate,
                    credentialScope,
                    canonicalRequestHash
                ].join('\n');
                
                console.log('String to Sign:', stringToSign);
                
                // è¨ˆç®—ç°½å
                const kDate = await hmacSha256('AWS4' + secretAccessKey, dateStamp);
                const kRegion = await hmacSha256(kDate, region);
                const kService = await hmacSha256(kRegion, service);
                const kSigning = await hmacSha256(kService, 'aws4_request');
                const signature = await hmacSha256(kSigning, stringToSign);
                const signatureHex = await hexEncode(signature);
                
                // æ§‹å»ºæˆæ¬Šé ­
                const authorization = `${algorithm} Credential=${accessKeyId}/${credentialScope}, SignedHeaders=${signedHeaders}, Signature=${signatureHex}`;
                
                const headers = {
                    'Authorization': authorization,
                    'x-amz-date': amzDate,
                    'x-amz-content-sha256': payloadHash
                };
                
                // åªæœ‰åœ¨æœ‰ Content-Type æ™‚æ‰æ·»åŠ 
                if (contentType) {
                    headers['Content-Type'] = contentType;
                }
                
                console.log('ç”Ÿæˆçš„è«‹æ±‚é ­:', headers);
                
                return { headers };
            } catch (error) {
                console.error('ç°½åç”Ÿæˆéç¨‹éŒ¯èª¤:', error);
                throw error;
            }
        }
        
        // SHA-256 å“ˆå¸Œ
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            return hexEncode(hashBuffer);
        }
        
        // HMAC-SHA256
        async function hmacSha256(key, message) {
            try {
                const encoder = new TextEncoder();
                let keyBuffer;
                
                if (typeof key === 'string') {
                    keyBuffer = encoder.encode(key);
                } else if (key instanceof Uint8Array) {
                    keyBuffer = key;
                } else {
                    keyBuffer = new Uint8Array(key);
                }
                
                const messageBuffer = encoder.encode(message);
                
                const cryptoKey = await crypto.subtle.importKey(
                    'raw',
                    keyBuffer,
                    { name: 'HMAC', hash: 'SHA-256' },
                    false,
                    ['sign']
                );
                
                const signature = await crypto.subtle.sign('HMAC', cryptoKey, messageBuffer);
                return new Uint8Array(signature);
            } catch (error) {
                console.error('HMAC è¨ˆç®—éŒ¯èª¤:', error, { keyType: typeof key, message });
                throw error;
            }
        }
        
        // å°‡ ArrayBuffer è½‰æ›ç‚ºåå…­é€²åˆ¶å­—ç¬¦ä¸²
        function hexEncode(buffer) {
            if (buffer instanceof Uint8Array) {
                return Array.from(buffer)
                    .map(b => b.toString(16).padStart(2, '0'))
                    .join('');
            }
            const bytes = new Uint8Array(buffer);
            return Array.from(bytes)
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');
        }
        
        // åˆªé™¤èˆŠçš„æ´»å‹•åœ–ç‰‡ï¼ˆå¾æ•¸æ“šåº«å’Œå­˜å„²ï¼‰
        async function deleteOldEventImages(eventDate) {
            try {
                const client = getSupabaseClient();
                if (!client) {
                    console.warn('âš ï¸ Supabase å®¢æˆ¶ç«¯æœªåˆå§‹åŒ–');
                    return false;
                }
                
                console.log('ğŸ—‘ï¸ é–‹å§‹åˆªé™¤èˆŠåœ–ç‰‡ï¼Œæ´»å‹•æ—¥æœŸ:', eventDate);
                
                // æŸ¥æ‰¾ç›¸åŒæ—¥æœŸçš„èˆŠè¨˜éŒ„
                
                const { data: oldRecords, error: selectError } = await client
                    .from('invite_event_images')
                    .select('*')
                    .eq('event_date', eventDate);
                
                if (selectError) {
                    console.warn('âš ï¸ æŸ¥è©¢èˆŠè¨˜éŒ„å¤±æ•—:', selectError);
                    return false;
                }
                
                if (!oldRecords || oldRecords.length === 0) {
                    console.log('â„¹ï¸ æ²’æœ‰æ‰¾åˆ°èˆŠè¨˜éŒ„ï¼Œè·³éåˆªé™¤');
                    return true;
                }
                
                console.log(`æ‰¾åˆ° ${oldRecords.length} æ¢èˆŠè¨˜éŒ„ï¼Œé–‹å§‹åˆªé™¤...`);
                
                        // åˆªé™¤ Supabase Storage ä¸­çš„èˆŠåœ–ç‰‡æ–‡ä»¶
                        for (const record of oldRecords) {
                            try {
                                // å¾ URL ä¸­æå–æ–‡ä»¶è·¯å¾‘
                                // Supabase Storage URL æ ¼å¼: https://[project].supabase.co/storage/v1/object/public/[bucket]/[path]
                                // éœ€è¦æå– [path] éƒ¨åˆ†ï¼Œä¾‹å¦‚: hua-real-estate/invite-photo/image1_1234567890.jpg
                                if (record.image1_url) {
                                    try {
                                        const url1 = new URL(record.image1_url);
                                        // è·¯å¾‘æ ¼å¼: /storage/v1/object/public/[bucket]/[path]
                                        const pathParts = url1.pathname.split('/');
                                        const bucketIndex = pathParts.indexOf('public');
                                        if (bucketIndex !== -1 && pathParts.length > bucketIndex + 1) {
                                            // è·³é bucket åç¨±ï¼Œç²å–å¯¦éš›æ–‡ä»¶è·¯å¾‘
                                            const filePath = pathParts.slice(bucketIndex + 2).join('/');
                                            if (filePath) {
                                                const { error: deleteError1 } = await client.storage
                                                    .from(SUPABASE_CONFIG.bucketName)
                                                    .remove([filePath]);
                                                if (deleteError1) {
                                                    console.warn('âš ï¸ åˆªé™¤èˆŠåœ–ç‰‡1å¤±æ•—:', deleteError1, 'è·¯å¾‘:', filePath);
                                                } else {
                                                    console.log('âœ… å·²åˆªé™¤èˆŠåœ–ç‰‡1:', filePath);
                                                }
                                            }
                                        } else {
                                            // å¦‚æœ URL æ ¼å¼ä¸åŒï¼Œå˜—è©¦ç›´æ¥å¾è·¯å¾‘æå–
                                            const path1 = pathParts.slice(-3).join('/');
                                            if (path1 && path1.includes('invite-photo')) {
                                                const { error: deleteError1 } = await client.storage
                                                    .from(SUPABASE_CONFIG.bucketName)
                                                    .remove([path1]);
                                                if (!deleteError1) {
                                                    console.log('âœ… å·²åˆªé™¤èˆŠåœ–ç‰‡1:', path1);
                                                }
                                            }
                                        }
                                    } catch (urlError) {
                                        console.warn('âš ï¸ è§£æåœ–ç‰‡1 URLå¤±æ•—:', urlError);
                                    }
                                }
                                
                                if (record.image2_url) {
                                    try {
                                        const url2 = new URL(record.image2_url);
                                        const pathParts = url2.pathname.split('/');
                                        const bucketIndex = pathParts.indexOf('public');
                                        if (bucketIndex !== -1 && pathParts.length > bucketIndex + 1) {
                                            const filePath = pathParts.slice(bucketIndex + 2).join('/');
                                            if (filePath) {
                                                const { error: deleteError2 } = await client.storage
                                                    .from(SUPABASE_CONFIG.bucketName)
                                                    .remove([filePath]);
                                                if (deleteError2) {
                                                    console.warn('âš ï¸ åˆªé™¤èˆŠåœ–ç‰‡2å¤±æ•—:', deleteError2, 'è·¯å¾‘:', filePath);
                                                } else {
                                                    console.log('âœ… å·²åˆªé™¤èˆŠåœ–ç‰‡2:', filePath);
                                                }
                                            }
                                        } else {
                                            const path2 = pathParts.slice(-3).join('/');
                                            if (path2 && path2.includes('invite-photo')) {
                                                const { error: deleteError2 } = await client.storage
                                                    .from(SUPABASE_CONFIG.bucketName)
                                                    .remove([path2]);
                                                if (!deleteError2) {
                                                    console.log('âœ… å·²åˆªé™¤èˆŠåœ–ç‰‡2:', path2);
                                                }
                                            }
                                        }
                                    } catch (urlError) {
                                        console.warn('âš ï¸ è§£æåœ–ç‰‡2 URLå¤±æ•—:', urlError);
                                    }
                                }
                            } catch (storageError) {
                                console.warn('âš ï¸ åˆªé™¤å­˜å„²æ–‡ä»¶æ™‚ç™¼ç”ŸéŒ¯èª¤:', storageError);
                            }
                        }
                        
                        // åˆªé™¤æ•¸æ“šåº«ä¸­çš„èˆŠè¨˜éŒ„
                        const { error: deleteError } = await client
                            .from('invite_event_images')
                            .delete()
                            .eq('event_date', eventDate);
                
                if (deleteError) {
                    console.error('âŒ åˆªé™¤æ•¸æ“šåº«è¨˜éŒ„å¤±æ•—:', deleteError);
                    return false;
                }
                
                console.log(`âœ… å·²åˆªé™¤ ${oldRecords.length} æ¢èˆŠè¨˜éŒ„`);
                return true;
            } catch (error) {
                console.error('âŒ åˆªé™¤èˆŠåœ–ç‰‡æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                return false;
            }
        }
        
        // ä¿å­˜æ´»å‹•åœ–ç‰‡ URL åˆ° Supabase æ•¸æ“šåº«
        async function saveEventImagesToSupabase(image1Url, image2Url) {
            try {
                const client = getSupabaseClient();
                if (!client) {
                    console.warn('âš ï¸ Supabase å®¢æˆ¶ç«¯æœªåˆå§‹åŒ–');
                    return false;
                }
                
                // è¨ˆç®—ä¸‹é€±å››çš„æ—¥æœŸï¼ˆé€±å›› 09:00 å¾Œè‡ªå‹•åˆ‡æ›ï¼‰ï¼Œç”¨æœ¬åœ°æ—¥æœŸå­—ä¸²èˆ‡è®€å–é‚è¼¯ä¸€è‡´
                const nextThursday = getNextThursdayDate();
                const eventDate = `${nextThursday.getFullYear()}-${String(nextThursday.getMonth() + 1).padStart(2, '0')}-${String(nextThursday.getDate()).padStart(2, '0')}`;
                
                // ç”Ÿæˆæ´»å‹•æ¨™é¡Œï¼ˆæ ¼å¼ï¼šMM/DDè¯åœ°ç”¢æ—©æœƒé›™å°ˆè¬›åŒå°ï¼‰
                const dateStr = formatDateMMDD(nextThursday);
                const eventTitle = `${dateStr}è¯åœ°ç”¢æ—©æœƒé›™å°ˆè¬›åŒå°`;
                
                // å…ˆåˆªé™¤èˆŠçš„åœ–ç‰‡è¨˜éŒ„å’Œæ–‡ä»¶
                console.log('ğŸ—‘ï¸ åˆªé™¤èˆŠåœ–ç‰‡...');
                await deleteOldEventImages(eventDate);
                
                // æ’å…¥æ–°è¨˜éŒ„åˆ° Supabase
                console.log('ğŸ’¾ ä¿å­˜æ–°åœ–ç‰‡è¨˜éŒ„...');
                const { data, error } = await client
                    .from('invite_event_images')
                    .insert([
                        {
                            event_title: eventTitle,
                            event_date: eventDate,
                            image1_url: image1Url,
                            image2_url: image2Url
                        }
                    ])
                    .select();
                
                if (error) {
                    console.error('âŒ ä¿å­˜åˆ° Supabase æ•¸æ“šåº«å¤±æ•—:', error);
                    return false;
                }
                
                console.log('âœ… åœ–ç‰‡ URL å·²ä¿å­˜åˆ° Supabase æ•¸æ“šåº«:', data);
                return true;
            } catch (error) {
                console.error('âŒ ä¿å­˜åˆ° Supabase æ•¸æ“šåº«æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                return false;
            }
        }
        
        // å¾ Supabase æ•¸æ“šåº«è®€å–æ´»å‹•åœ–ç‰‡
        async function loadEventImagesFromSupabase() {
            try {
                const client = getSupabaseClient();
                if (!client) {
                    console.warn('âš ï¸ Supabase å®¢æˆ¶ç«¯æœªåˆå§‹åŒ–');
                    console.warn('ğŸ’¡ è«‹æª¢æŸ¥ Supabase é…ç½®ï¼šSUPABASE_CONFIG å’Œ initSupabase() å‡½æ•¸');
                    showEventGridFallback('æš«ç„¡æ´»å‹•é å‘Š');
                    return false;
                }
                
                console.log('ğŸ“¥ å¾ Supabase æ•¸æ“šåº«è¼‰å…¥æ´»å‹•åœ–ç‰‡...');
                
                // ç²å–ç•¶å‰æ—¥æœŸå’Œæ™‚é–“ï¼Œç”¨æ–¼é¸æ“‡æ´»å‹•
                const now = new Date();
                const currentDay = now.getDay(); // 0=é€±æ—¥, 4=é€±å››
                const currentHour = now.getHours();
                
                // è¨ˆç®—ç›®æ¨™æ—¥æœŸï¼šé€±å›› 09:00 å¾Œåˆ‡æ›åˆ°ä¸‹é€±å››
                let targetDate = new Date(now);
                targetDate.setHours(0, 0, 0, 0);
                
                if (currentDay === 4) { // ä»Šå¤©æ˜¯é€±å››
                    if (currentHour >= 9) {
                        // å·²éä»Šå¤© 09:00ï¼Œæ‰¾ä¸‹é€±å››
                        targetDate.setDate(targetDate.getDate() + 7);
                    }
                    // æœªé 09:00ï¼Œä½¿ç”¨æœ¬é€±å››ï¼ˆtargetDate ä¿æŒä¸è®Šï¼‰
                } else if (currentDay > 4 || currentDay === 0) {
                    // é€±äº”ã€é€±å…­ã€é€±æ—¥ï¼Œæ‰¾ä¸‹é€±å››
                    const daysUntilNextThursday = currentDay === 0 ? 4 : (11 - currentDay);
                    targetDate.setDate(targetDate.getDate() + daysUntilNextThursday);
                } else {
                    // é€±ä¸€åˆ°é€±ä¸‰ï¼Œæ‰¾æœ¬é€±å››
                    const daysUntilThursday = 4 - currentDay;
                    targetDate.setDate(targetDate.getDate() + daysUntilThursday);
                }
                
                // ä½¿ç”¨æœ¬åœ°æ—¥æœŸå­—ä¸²ï¼Œèˆ‡ saveEventImagesToSupabase ä¸€è‡´ï¼Œé¿å…æ™‚å€å°è‡´æŸ¥ä¸åˆ°å‰›ä¸Šå‚³çš„è³‡æ–™
                const targetDateStr = `${targetDate.getFullYear()}-${String(targetDate.getMonth() + 1).padStart(2, '0')}-${String(targetDate.getDate()).padStart(2, '0')}`;
                console.log('ğŸ“… ç›®æ¨™æ—¥æœŸï¼ˆæ‡‰è©²é¡¯ç¤ºçš„æ´»å‹•æ—¥æœŸï¼‰:', targetDateStr);
                
                // å„ªå…ˆæŸ¥æ‰¾ï¼ševent_date == targetDate çš„æ´»å‹•ï¼ˆç²¾ç¢ºåŒ¹é…ï¼‰
                const { data: exactEvents, error: exactError } = await client
                    .from('invite_event_images')
                    .select('*')
                    .eq('event_date', targetDateStr)
                    .limit(1);
                
                let eventData = null;
                
                if (!exactError && exactEvents && exactEvents.length > 0) {
                    // æ‰¾åˆ°ç²¾ç¢ºåŒ¹é…çš„æ´»å‹•
                    eventData = exactEvents[0];
                    console.log('âœ… æ‰¾åˆ°ç›®æ¨™æ—¥æœŸçš„æ´»å‹•:', eventData.event_date, eventData.event_title);
                } else {
                    // å¦‚æœæ²’æœ‰ç²¾ç¢ºåŒ¹é…ï¼ŒæŸ¥æ‰¾ <= targetDate ä¸”æœ€æ¥è¿‘çš„æ´»å‹•ï¼ˆå·²ç”Ÿæ•ˆçš„æ´»å‹•ï¼‰
                    const { data: activeEvents, error: activeError } = await client
                        .from('invite_event_images')
                        .select('*')
                        .lte('event_date', targetDateStr)
                        .order('event_date', { ascending: false })
                        .limit(1);
                    
                    if (!activeError && activeEvents && activeEvents.length > 0) {
                        eventData = activeEvents[0];
                        console.log('âœ… æ‰¾åˆ°å·²ç”Ÿæ•ˆçš„æ´»å‹•ï¼ˆæœ€æ¥è¿‘ç›®æ¨™æ—¥æœŸï¼‰:', eventData.event_date, eventData.event_title);
                    } else {
                        // å¦‚æœæ²’æœ‰å·²ç”Ÿæ•ˆçš„æ´»å‹•ï¼ŒæŸ¥æ‰¾æœªä¾†çš„æ´»å‹•ï¼ˆæœ€æ¥è¿‘ç›®æ¨™æ—¥æœŸçš„æœªä¾†æ´»å‹•ï¼‰
                        const { data: upcomingEvents, error: upcomingError } = await client
                            .from('invite_event_images')
                            .select('*')
                            .gte('event_date', targetDateStr)
                            .order('event_date', { ascending: true })
                            .limit(1);
                        
                        if (!upcomingError && upcomingEvents && upcomingEvents.length > 0) {
                            eventData = upcomingEvents[0];
                            console.log('âœ… æ‰¾åˆ°æœªä¾†çš„æ´»å‹•ï¼ˆå°‡åœ¨', eventData.event_date, 'ç”Ÿæ•ˆï¼‰:', eventData.event_title);
                        } else {
                            // å¦‚æœéƒ½æ²’æœ‰ï¼Œä½¿ç”¨æœ€æ–°çš„æ´»å‹•
                            const { data: latestEvents, error: latestError } = await client
                                .from('invite_event_images')
                                .select('*')
                                .order('created_at', { ascending: false })
                                .limit(1);
                            
                            if (!latestError && latestEvents && latestEvents.length > 0) {
                                eventData = latestEvents[0];
                                console.log('âœ… ä½¿ç”¨æœ€æ–°çš„æ´»å‹•:', eventData.event_title);
                            } else {
                                console.warn('âš ï¸ æ•¸æ“šåº«ä¸­æ²’æœ‰æ´»å‹•åœ–ç‰‡æ•¸æ“š');
                                console.warn('ğŸ’¡ è«‹å…ˆä¸Šå‚³åœ–ç‰‡ï¼Œæˆ–æª¢æŸ¥ Supabase æ•¸æ“šåº«è¡¨ invite_event_images');
                                showEventGridFallback('æš«ç„¡æ´»å‹•é å‘Š');
                                return false;
                            }
                        }
                    }
                }
                
                // ç«‹å³é–‹å§‹é è¼‰å…¥åœ–ç‰‡ï¼ˆä¸ç­‰å¾…æ¸²æŸ“ï¼‰
                if (eventData && eventData.image1_url && eventData.image2_url) {
                    // ç¢ºä¿ URL æ ¼å¼æ­£ç¢ºï¼ˆä¿®å¾©å¯èƒ½çš„ URL æ ¼å¼å•é¡Œï¼‰
                    const image1Url = ensurePublicUrl(eventData.image1_url);
                    const image2Url = ensurePublicUrl(eventData.image2_url);
                    
                    // æ¸¬è©¦åœ–ç‰‡æ˜¯å¦å¯è¨ªå•ï¼ˆè¨ºæ–·åŠŸèƒ½ï¼‰
                    testImageAccessibility(image1Url, image2Url);
                    
                    // ç«‹å³é–‹å§‹é è¼‰å…¥ï¼ˆåœ¨æ¸²æŸ“ä¹‹å‰ï¼‰
                    preloadEventImages(image1Url, image2Url);
                    // ç«‹å³æ¸²æŸ“ï¼ˆåœ–ç‰‡å¯èƒ½å·²ç¶“å¾é è¼‰å…¥ä¸­è¼‰å…¥ï¼‰
                    renderEventImages(image1Url, image2Url, eventData.event_title);
                    return true;
                } else {
                    console.warn('âš ï¸ æ´»å‹•æ•¸æ“šä¸å®Œæ•´');
                    console.warn('ğŸ’¡ è«‹æª¢æŸ¥æ•¸æ“šåº«ä¸­çš„åœ–ç‰‡ URL æ˜¯å¦å®Œæ•´');
                    showEventGridFallback('æš«ç„¡æ´»å‹•é å‘Š');
                    return false;
                }
            } catch (error) {
                console.error('âŒ å¾ Supabase è¼‰å…¥åœ–ç‰‡æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                console.warn('ğŸ’¡ è«‹æª¢æŸ¥ Supabase é…ç½®å’Œç¶²çµ¡é€£æ¥');
                showEventGridFallback('æš«ç„¡æ´»å‹•é å‘Š');
                return false;
            }
        }
        
        // é©—è­‰ä¸¦ä¿®å¾©åœ–ç‰‡ URLï¼ˆç¢ºä¿ä½¿ç”¨æ­£ç¢ºçš„å…¬é–‹ URL æ ¼å¼ï¼‰
        function ensurePublicUrl(url) {
            if (!url) return url;
            
            // å¦‚æœ URL å·²ç¶“æ˜¯æ­£ç¢ºçš„å…¬é–‹æ ¼å¼ï¼Œç›´æ¥è¿”å›
            if (url.includes('/storage/v1/object/public/')) {
                return url;
            }
            
            // å¦‚æœ URL æ ¼å¼ä¸æ­£ç¢ºï¼Œå˜—è©¦ä¿®å¾©
            // å¾ URL ä¸­æå–æ–‡ä»¶è·¯å¾‘
            try {
                const urlObj = new URL(url);
                const pathMatch = urlObj.pathname.match(/\/storage\/v1\/object\/[^/]+\/(.+)$/);
                if (pathMatch) {
                    const filePath = pathMatch[1];
                    // æ§‹å»ºæ­£ç¢ºçš„å…¬é–‹ URL
                    return `${SUPABASE_CONFIG.url}/storage/v1/object/public/${SUPABASE_CONFIG.bucketName}/${filePath}`;
                }
            } catch (e) {
                console.warn('ç„¡æ³•è§£æ URL:', url);
            }
            
            return url;
        }
        
        // æ¸¬è©¦åœ–ç‰‡å¯è¨ªå•æ€§ï¼ˆè¨ºæ–·åŠŸèƒ½ï¼‰
        function testImageAccessibility(image1Url, image2Url) {
            console.log('ğŸ” æ¸¬è©¦åœ–ç‰‡å¯è¨ªå•æ€§...');
            
            [image1Url, image2Url].forEach((url, index) => {
                const img = new Image();
                img.onload = () => {
                    console.log(`âœ… åœ–ç‰‡${index + 1}å¯è¨ªå•: ${url}`);
                };
                img.onerror = () => {
                    console.error(`âŒ åœ–ç‰‡${index + 1}ç„¡æ³•è¨ªå•: ${url}`);
                    console.error('ğŸ’¡ å¯èƒ½çš„åŸå› ï¼š');
                    console.error('   1. å­˜å„²æ¡¶æœªè¨­ç½®ç‚ºå…¬é–‹ï¼ˆPublic bucketï¼‰âš ï¸ æœ€å¸¸è¦‹');
                    console.error('   2. RLS ç­–ç•¥æœªæ­£ç¢ºé…ç½®è®€å–æ¬Šé™');
                    console.error('   3. åœ–ç‰‡æ–‡ä»¶ä¸å­˜åœ¨');
                    console.error('   4. ç¶²çµ¡é€£æ¥å•é¡Œ');
                    console.error('');
                    console.error('ğŸ”§ ç«‹å³è§£æ±ºæ–¹æ¡ˆï¼š');
                    console.error('   1. è¨ªå•ï¼šhttps://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc/storage/buckets');
                    console.error('   2. æ‰¾åˆ° "hua-real-estate" å­˜å„²æ¡¶');
                    console.error('   3. é»æ“Šå­˜å„²æ¡¶åç¨±é€²å…¥è¨­ç½®');
                    console.error('   4. é–‹å•Ÿ "Public bucket" é–‹é—œï¼ˆæœ€é‡è¦ï¼ï¼‰');
                    console.error('   5. ä¿å­˜è¨­ç½®');
                    console.error('   6. åŸ·è¡Œ SQL é…ç½® RLSï¼šhttps://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc/sql/new');
                    console.error('   7. è¤‡è£½ä¸¦åŸ·è¡Œ "å¿«é€Ÿä¿®å¾©RLSç­–ç•¥.sql" æ–‡ä»¶ä¸­çš„ SQL');
                    console.error('   8. è©³ç´°èªªæ˜è«‹æŸ¥çœ‹ï¼šç«‹å³ä¿®å¾©åœ–ç‰‡ç„¡æ³•é¡¯ç¤º.md');
                    
                    // å˜—è©¦ä½¿ç”¨ fetch æ¸¬è©¦ï¼Œç²å–æ›´è©³ç´°çš„éŒ¯èª¤ä¿¡æ¯
                    fetch(url, { method: 'HEAD', mode: 'no-cors' })
                        .then(() => {
                            // å¦‚æœæˆåŠŸï¼Œå¯èƒ½æ˜¯ CORS å•é¡Œ
                            console.warn('   âš ï¸ å¯èƒ½æ˜¯ CORS å•é¡Œï¼Œä½†æ–‡ä»¶å¯èƒ½å­˜åœ¨');
                        })
                        .catch(() => {
                            // ä½¿ç”¨ fetch ç›´æ¥æ¸¬è©¦ï¼ˆå¯èƒ½æœƒæœ‰ CORS é™åˆ¶ï¼‰
                            fetch(url)
                                .then(response => {
                                    if (!response.ok) {
                                        console.error(`   HTTP ç‹€æ…‹ç¢¼: ${response.status} ${response.statusText}`);
                                        if (response.status === 403) {
                                            console.error('   â†’ é€™æ˜¯æ¬Šé™å•é¡Œï¼å­˜å„²æ¡¶å¿…é ˆè¨­ç½®ç‚ºå…¬é–‹ï¼');
                                            console.error('   â†’ åŸ·è¡Œæ­¥é©Ÿï¼š');
                                            console.error('      1. è¨ªå•å­˜å„²æ¡¶è¨­ç½®');
                                            console.error('      2. é–‹å•Ÿ "Public bucket" é–‹é—œ');
                                            console.error('      3. åŸ·è¡Œ RLS ç­–ç•¥ SQL');
                                        } else if (response.status === 404) {
                                            console.error('   â†’ åœ–ç‰‡æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè«‹æª¢æŸ¥æ–‡ä»¶è·¯å¾‘');
                                        }
                                    }
                                })
                                .catch(err => {
                                    console.error('   ç¶²çµ¡éŒ¯èª¤:', err.message);
                                });
                        });
                };
                img.src = url;
            });
        }
        
        // é è¼‰å…¥æ´»å‹•åœ–ç‰‡ï¼ˆç«‹å³é–‹å§‹è¼‰å…¥ï¼Œä¸ç­‰å¾… DOMï¼‰
        function preloadEventImages(image1Url, image2Url) {
            if (!image1Url || !image2Url) return;
            
            // æ–¹æ³•1: ä½¿ç”¨ Image å°è±¡ç«‹å³é–‹å§‹è¼‰å…¥ï¼ˆæœ€å¿«ï¼‰
            const img1 = new Image();
            img1.src = image1Url;
            img1.fetchPriority = 'high';
            img1.decode().catch(() => {}); // éé˜»å¡è§£ç¢¼
            
            const img2 = new Image();
            img2.src = image2Url;
            img2.fetchPriority = 'high';
            img2.decode().catch(() => {}); // éé˜»å¡è§£ç¢¼
            
            // æ–¹æ³•2: ä½¿ç”¨ preload é€£çµï¼ˆç€è¦½å™¨å„ªå…ˆç´šæ›´é«˜ï¼‰
            if (document.head) {
                // ç§»é™¤èˆŠçš„ preload é€£çµï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰
                const oldLinks = document.querySelectorAll('link[rel="preload"][as="image"][data-invite-image]');
                oldLinks.forEach(link => link.remove());
                
                const link1 = document.createElement('link');
                link1.rel = 'preload';
                link1.as = 'image';
                link1.href = image1Url;
                link1.fetchPriority = 'high';
                link1.setAttribute('data-invite-image', '1');
                document.head.appendChild(link1);
                
                const link2 = document.createElement('link');
                link2.rel = 'preload';
                link2.as = 'image';
                link2.href = image2Url;
                link2.fetchPriority = 'high';
                link2.setAttribute('data-invite-image', '2');
                document.head.appendChild(link2);
            }
            
            console.log('âš¡ å·²ç«‹å³é–‹å§‹é è¼‰å…¥æ´»å‹•åœ–ç‰‡');
        }
        
        // è¨ˆç®—ä¸‹é€±å››çš„æ—¥æœŸï¼ˆé€±å›› 09:00 å¾Œè‡ªå‹•åˆ‡æ›ï¼‰
        function getNextThursdayDate() {
            const now = new Date();
            const currentDay = now.getDay(); // 0=é€±æ—¥, 4=é€±å››
            const currentHour = now.getHours();
            
            let targetDate = new Date(now);
            
            // åˆ¤æ–·æ˜¯å¦å·²éæœ¬é€±å›› 09:00
            if (currentDay === 4) { // ä»Šå¤©æ˜¯é€±å››
                if (currentHour >= 9) {
                    // å·²éä»Šå¤© 09:00ï¼Œæ‰¾ä¸‹é€±å››
                    targetDate.setDate(targetDate.getDate() + 7);
                } else {
                    // æœªé 09:00ï¼Œä½¿ç”¨æœ¬é€±å››
                    // targetDate ä¿æŒä¸è®Š
                }
            } else if (currentDay > 4 || currentDay === 0) {
                // é€±äº”ã€é€±å…­ã€é€±æ—¥ï¼Œæ‰¾ä¸‹é€±å››
                const daysUntilNextThursday = currentDay === 0 ? 4 : (11 - currentDay);
                targetDate.setDate(targetDate.getDate() + daysUntilNextThursday);
            } else {
                // é€±ä¸€åˆ°é€±ä¸‰ï¼Œæ‰¾æœ¬é€±å››
                const daysUntilThursday = 4 - currentDay;
                targetDate.setDate(targetDate.getDate() + daysUntilThursday);
            }
            
            // ç¢ºä¿æ˜¯é€±å››
            targetDate.setHours(9, 0, 0, 0);
            
            return targetDate;
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸç‚º MM/DD
        function formatDateMMDD(date) {
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${month}/${day}`;
        }
        
        // æ´»å‹•å€è¼‰å…¥å¤±æ•—æ™‚é¡¯ç¤ºä½”ä½æ–‡æ¡ˆï¼ˆéš±è—éª¨æ¶ã€é¿å…ç„¡é™è¼‰å…¥ï¼‰
        function showEventGridFallback(message) {
            message = message || 'æš«ç„¡æ´»å‹•é å‘Š';
            const eventGrid = document.getElementById('event-grid');
            if (!eventGrid || eventGrid.classList.contains('content-loaded')) return;
            eventGrid.innerHTML = `<div class="event-grid-empty">${message}</div>`;
            eventGrid.classList.add('content-loaded');
        }
        
        // æ¸²æŸ“æ´»å‹•åœ–ç‰‡
        function renderEventImages(image1Url, image2Url, eventTitle) {
            const eventGrid = document.getElementById('event-grid');
            if (!eventGrid) {
                console.warn('âš ï¸ æ‰¾ä¸åˆ° event-grid å…ƒç´ ');
                return;
            }
            
            // è¨ˆç®—æ‡‰è©²é¡¯ç¤ºçš„é€±å››æ—¥æœŸï¼ˆé€±å›› 09:00 å¾Œåˆ‡æ›åˆ°ä¸‹é€±å››ï¼‰
            const now = new Date();
            const currentDay = now.getDay();
            const currentHour = now.getHours();
            
            let displayDate = new Date(now);
            if (currentDay === 4) { // ä»Šå¤©æ˜¯é€±å››
                if (currentHour >= 9) {
                    // å·²éä»Šå¤© 09:00ï¼Œé¡¯ç¤ºä¸‹é€±å››
                    displayDate.setDate(displayDate.getDate() + 7);
                }
                // æœªé 09:00ï¼Œé¡¯ç¤ºæœ¬é€±å››ï¼ˆdisplayDate ä¿æŒä¸è®Šï¼‰
            } else if (currentDay > 4 || currentDay === 0) {
                // é€±äº”ã€é€±å…­ã€é€±æ—¥ï¼Œé¡¯ç¤ºä¸‹é€±å››
                const daysUntilNextThursday = currentDay === 0 ? 4 : (11 - currentDay);
                displayDate.setDate(displayDate.getDate() + daysUntilNextThursday);
            } else {
                // é€±ä¸€åˆ°é€±ä¸‰ï¼Œé¡¯ç¤ºæœ¬é€±å››
                const daysUntilThursday = 4 - currentDay;
                displayDate.setDate(displayDate.getDate() + daysUntilThursday);
            }
            
            const dateStr = formatDateMMDD(displayDate);
            
            // æ›´æ–°æ´»å‹•æ¨™é¡Œå’Œæ—¥æœŸ
            const eventHeader = document.querySelector('.event-header');
            if (eventHeader) {
                const title = eventHeader.querySelector('.section-title');
                if (title) {
                    // æ ¼å¼ï¼šMM/DDè¯åœ°ç”¢æ—©æœƒé›™å°ˆè¬›åŒå°
                    title.textContent = `${dateStr}è¯åœ°ç”¢æ—©æœƒé›™å°ˆè¬›åŒå°`;
                }
                
                // æ›´æ–°æ—¥æœŸé¡¯ç¤ºï¼ˆå¯é¸ï¼Œå¦‚æœéœ€è¦é¡¯ç¤ºå®Œæ•´æ—¥æœŸï¼‰
                const dateText = eventHeader.querySelector('.date-text');
                if (dateText) {
                    // å¯ä»¥é¡¯ç¤ºå®Œæ•´æ—¥æœŸæˆ–ä¿æŒåŸæ¨£ï¼ˆä½¿ç”¨ displayDate èˆ‡æœ¬å‡½æ•¸å…§è®Šæ•¸ä¸€è‡´ï¼‰
                    // dateText.textContent = `æ¯é€±å›› 09:00 | ${displayDate.toLocaleDateString('zh-TW', { month: 'long', day: 'numeric', weekday: 'long' })}`;
                }
            }
            
            console.log(`ğŸ“… æ´»å‹•æ—¥æœŸå·²æ›´æ–°ç‚º: ${dateStr} (${displayDate.toLocaleDateString('zh-TW')})`);
            
            // è½‰ç¾© URL ä¸­çš„ç‰¹æ®Šå­—ç¬¦
            const escapeHtml = (str) => {
                if (!str) return '';
                return str
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            };
            
            // ç¢ºä¿ URL æ ¼å¼æ­£ç¢º
            const safeImage1Url = ensurePublicUrl(image1Url);
            const safeImage2Url = ensurePublicUrl(image2Url);
            
            // æ¸²æŸ“åœ–ç‰‡ï¼ˆä½¿ç”¨ eager ç«‹å³è¼‰å…¥ï¼Œå› ç‚ºé€™æ˜¯é¦–å±é‡è¦å…§å®¹ï¼‰
            eventGrid.innerHTML = `
                <div class="event-card" onclick="openModal('${safeImage1Url.replace(/'/g, "\\'")}')">
                    <img src="${escapeHtml(safeImage1Url)}" alt="å°ˆè¬›é å‘Š 1" class="event-image" 
                         fetchpriority="high" decoding="async" loading="eager"
                         onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'300\\'%3E%3Crect fill=\\'%23f0f0f0\\' width=\\'400\\' height=\\'300\\'/%3E%3Ctext x=\\'50%25\\' y=\\'50%25\\' text-anchor=\\'middle\\' fill=\\'%23999\\' font-size=\\'16\\'%3Eåœ–ç‰‡è¼‰å…¥å¤±æ•—%3C/text%3E%3C/svg%3E'; console.error('åœ–ç‰‡1è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥å­˜å„²æ¡¶æ˜¯å¦è¨­ç½®ç‚ºå…¬é–‹');">
                    <div class="event-overlay">
                        <span class="event-icon">ğŸ”</span>
                        <p>é»æ“Šæ”¾å¤§</p>
                    </div>
                </div>
                <div class="event-card" onclick="openModal('${safeImage2Url.replace(/'/g, "\\'")}')">
                    <img src="${escapeHtml(safeImage2Url)}" alt="å°ˆè¬›é å‘Š 2" class="event-image" 
                         fetchpriority="high" decoding="async" loading="eager"
                         onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'300\\'%3E%3Crect fill=\\'%23f0f0f0\\' width=\\'400\\' height=\\'300\\'/%3E%3Ctext x=\\'50%25\\' y=\\'50%25\\' text-anchor=\\'middle\\' fill=\\'%23999\\' font-size=\\'16\\'%3Eåœ–ç‰‡è¼‰å…¥å¤±æ•—%3C/text%3E%3C/svg%3E'; console.error('åœ–ç‰‡2è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥å­˜å„²æ¡¶æ˜¯å¦è¨­ç½®ç‚ºå…¬é–‹');">
                    <div class="event-overlay">
                        <span class="event-icon">ğŸ”</span>
                        <p>é»æ“Šæ”¾å¤§</p>
                    </div>
                </div>
            `;
            
            // æ¨™è¨˜ç‚ºå·²è¼‰å…¥
            eventGrid.classList.add('content-loaded');
            
            // ç›£è½åœ–ç‰‡è¼‰å…¥ï¼ˆå„ªåŒ–ï¼šç«‹å³æª¢æŸ¥æ˜¯å¦å·²è¼‰å…¥ï¼‰
            const images = eventGrid.querySelectorAll('img');
            let loadedCount = 0;
            const totalImages = images.length;
            
            images.forEach((img, index) => {
                // ç«‹å³æª¢æŸ¥åœ–ç‰‡æ˜¯å¦å·²å¾é è¼‰å…¥ä¸­è¼‰å…¥å®Œæˆ
                if (img.complete && img.naturalHeight !== 0) {
                    loadedCount++;
                    img.classList.add('loaded');
                    console.log(`âœ… åœ–ç‰‡${index + 1}å·²è¼‰å…¥ï¼ˆé è¼‰å…¥ï¼‰`);
                } else {
                    // å¦‚æœåœ–ç‰‡å·²ç¶“é–‹å§‹è¼‰å…¥ï¼ˆå¾é è¼‰å…¥ï¼‰ï¼Œç­‰å¾…è¼‰å…¥å®Œæˆ
                    img.addEventListener('load', () => {
                        loadedCount++;
                        img.classList.add('loaded');
                        console.log(`âœ… åœ–ç‰‡${index + 1}è¼‰å…¥å®Œæˆ`);
                        if (loadedCount === totalImages) {
                            console.log('ğŸ‰ æ‰€æœ‰æ´»å‹•åœ–ç‰‡è¼‰å…¥å®Œæˆ');
                        }
                    }, { once: true });
                    
                    img.addEventListener('error', () => {
                        console.error(`âŒ åœ–ç‰‡${index + 1}è¼‰å…¥å¤±æ•—`);
                        img.classList.add('loaded');
                        loadedCount++;
                        if (loadedCount === totalImages) {
                            console.warn('âš ï¸ éƒ¨åˆ†åœ–ç‰‡è¼‰å…¥å¤±æ•—');
                        }
                    }, { once: true });
                }
            });
            
            // å¦‚æœæ‰€æœ‰åœ–ç‰‡éƒ½å·²è¼‰å…¥ï¼ˆå¾é è¼‰å…¥ï¼‰ï¼Œè¨˜éŒ„æ—¥èªŒ
            if (loadedCount === totalImages) {
                console.log('âš¡ æ‰€æœ‰åœ–ç‰‡å·²å¾é è¼‰å…¥è¼‰å…¥');
            }
            
            // ä¿å­˜åˆ°å¿«å–
            try {
                const cacheData = {
                    image1: image1Url,
                    image2: image2Url,
                    timestamp: Date.now()
                };
                localStorage.setItem('invite_event_images', JSON.stringify(cacheData));
            } catch (e) {
                console.warn('âš ï¸ ç„¡æ³•ä¿å­˜åˆ°å¿«å–:', e);
            }
            
            console.log('âœ… æ´»å‹•åœ–ç‰‡å·²æ¸²æŸ“');
        }
        
        // åˆå§‹åŒ–æ‹–æ”¾åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            setupDragAndDrop();
            
            // ç¶å®šä¸Šå‚³è§¸ç™¼æŒ‰éˆ•
            const uploadTriggerBtn = document.getElementById('uploadTriggerBtn');
            if (uploadTriggerBtn) {
                uploadTriggerBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ä¸Šå‚³æŒ‰éˆ•è¢«é»æ“Š');
                    openPasswordModal();
                });
                console.log('âœ… ä¸Šå‚³è§¸ç™¼æŒ‰éˆ•å·²ç¶å®š');
            } else {
                console.error('âŒ æ‰¾ä¸åˆ°ä¸Šå‚³è§¸ç™¼æŒ‰éˆ•');
            }
        });
    </script>
</body>
</html>