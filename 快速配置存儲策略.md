# âš¡ å¿«é€Ÿé…ç½® Supabase å­˜å„²ç­–ç•¥

## ğŸ¯ ç›®æ¨™

é…ç½®å­˜å„²ç­–ç•¥ï¼Œå…è¨±åŒ¿åç”¨æˆ¶ä¸Šå‚³åœ–ç‰‡åˆ° `hua-real-estate/invite-photo/` ç›®éŒ„ã€‚

## ğŸ“‹ æ­¥é©Ÿï¼ˆ3 åˆ†é˜å®Œæˆï¼‰

### æ­¥é©Ÿ 1ï¼šæ‰“é–‹ SQL ç·¨è¼¯å™¨

è¨ªå•ï¼šhttps://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc/sql/new

### æ­¥é©Ÿ 2ï¼šè¤‡è£½ SQL ä»£ç¢¼

æ‰“é–‹é …ç›®ä¸­çš„ `supabase-storage-policies.sql` æ–‡ä»¶ï¼Œè¤‡è£½å…¨éƒ¨å…§å®¹ã€‚

æˆ–è€…ç›´æ¥è¤‡è£½ä»¥ä¸‹ SQLï¼š

```sql
-- åˆªé™¤ç¾æœ‰ç­–ç•¥ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
DROP POLICY IF EXISTS "Allow public uploads to hua-real-estate project" ON storage.objects;
DROP POLICY IF EXISTS "Allow public read from hua-real-estate" ON storage.objects;

-- å‰µå»ºä¸Šå‚³ç­–ç•¥
CREATE POLICY "Allow public uploads to hua-real-estate project"
ON storage.objects
FOR INSERT
TO public
WITH CHECK (
  bucket_id = 'hua-real-estate' 
  AND (storage.foldername(name))[1] = 'hua-real-estate'
);

-- å‰µå»ºè®€å–ç­–ç•¥
CREATE POLICY "Allow public read from hua-real-estate"
ON storage.objects
FOR SELECT
TO public
USING (
  bucket_id = 'hua-real-estate' 
  AND (storage.foldername(name))[1] = 'hua-real-estate'
);
```

### æ­¥é©Ÿ 3ï¼šåŸ·è¡Œ SQL

1. å°‡ SQL ä»£ç¢¼è²¼åˆ° SQL ç·¨è¼¯å™¨
2. é»æ“Šå³ä¸‹è§’çš„ **"Run"** æŒ‰éˆ•
3. ç­‰å¾…åŸ·è¡Œå®Œæˆï¼ˆæ‡‰è©²æœƒé¡¯ç¤º "Success"ï¼‰

### æ­¥é©Ÿ 4ï¼šé©—è­‰

1. è¨ªå•ï¼šhttps://supabase.com/dashboard/project/sqgrnowrcvspxhuudrqc/storage/policies
2. é¸æ“‡ `hua-real-estate` å­˜å„²æ¡¶
3. ç¢ºèªçœ‹åˆ°å…©å€‹ç­–ç•¥ï¼š
   - `Allow public uploads to hua-real-estate project`
   - `Allow public read from hua-real-estate`

### æ­¥é©Ÿ 5ï¼šæ¸¬è©¦ä¸Šå‚³

1. åˆ·æ–° `invite.html` é é¢
2. é»æ“Šå³ä¸‹è§’çš„ä¸Šå‚³åœ–æ¨™ï¼ˆğŸ“¤ï¼‰
3. è¼¸å…¥å¯†ç¢¼ï¼š`888`
4. é¸æ“‡åœ–ç‰‡ä¸Šå‚³
5. æ‡‰è©²å¯ä»¥æˆåŠŸä¸Šå‚³äº†ï¼

---

## âœ… å®Œæˆï¼

é…ç½®å®Œæˆå¾Œï¼Œä¸Šå‚³åŠŸèƒ½å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼

---

## ğŸ› ï¸ å¦‚æœé‡åˆ°éŒ¯èª¤

### éŒ¯èª¤ï¼špolicy already exists

å¦‚æœæç¤ºç­–ç•¥å·²å­˜åœ¨ï¼Œå…ˆåŸ·è¡Œåˆªé™¤èªå¥ï¼š
```sql
DROP POLICY IF EXISTS "Allow public uploads to hua-real-estate project" ON storage.objects;
DROP POLICY IF EXISTS "Allow public read from hua-real-estate" ON storage.objects;
```

ç„¶å¾Œå†å‰µå»ºæ–°ç­–ç•¥ã€‚

### éŒ¯èª¤ï¼šbucket not found

ç¢ºèªå­˜å„²æ¡¶åç¨±æ˜¯ `hua-real-estate`ï¼Œä¸¦ä¸”å·²ç¶“å‰µå»ºã€‚

---

## ğŸ“ ç­–ç•¥èªªæ˜

- **ä¸Šå‚³ç­–ç•¥**ï¼šå…è¨±åŒ¿åç”¨æˆ¶ä¸Šå‚³æ–‡ä»¶åˆ° `hua-real-estate/` ç›®éŒ„ä¸‹
- **è®€å–ç­–ç•¥**ï¼šå…è¨±å…¬é–‹è®€å– `hua-real-estate/` ç›®éŒ„ä¸‹çš„æ–‡ä»¶
- **è·¯å¾‘é™åˆ¶**ï¼šåªå…è¨±æ“ä½œ `hua-real-estate` é …ç›®ç›®éŒ„ï¼Œä¿è­·å…¶ä»–é …ç›®
