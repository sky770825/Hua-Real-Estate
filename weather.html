<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ¥Šæ¢…å¤©æ°£è³‡è¨Š - æ¿¬ç‘’æˆ¿ç”¢ç”Ÿæ´»å¹³å°</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{
  --grad:linear-gradient(135deg,#667eea,#764ba2);
  --grad-sunny:linear-gradient(135deg,#ff9a9e,#fecfef);
  --grad-cloudy:linear-gradient(135deg,#a8edea,#fed6e3);
  --grad-rainy:linear-gradient(135deg,#d299c2,#fef9d7);
  --grad-night:linear-gradient(135deg,#2c3e50,#3498db);
  --glass-bg:rgba(255,255,255,0.85);
  --glass-dark:rgba(30,30,30,0.8);
  --shadow-light:0 8px 32px rgba(0,0,0,0.1);
  --shadow-hover:0 12px 40px rgba(0,0,0,0.15);
  --shadow-strong:0 20px 60px rgba(0,0,0,0.2);
  --border-radius:1.5rem;
  --border-radius-sm:1rem;
  --border-radius-lg:2rem;
  --transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  --bounce:all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --text-primary:#2d3748;
  --text-secondary:#4a5568;
  --accent:#667eea;
  --spacing-xs:0.25rem;
  --spacing-sm:0.5rem;
  --spacing-md:0.75rem;
  --spacing-lg:1rem;
  --spacing-xl:1.5rem;
}

body{
  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  min-height:100vh;
  transition:var(--transition);
  font-family:'PingFang TC','Microsoft JhengHei','SF Pro Display',system-ui,-apple-system,sans-serif;
  line-height:1.4;
  overflow-x:hidden;
  color:var(--text-primary);
  font-size:14px;
}

body.dark{
  background:linear-gradient(135deg,#2c3e50 0%,#3498db 100%);
  color:#f7fafc;
}

/* éŸ¿æ‡‰å¼æ–·é» */
@media (max-width: 480px) {
  body { font-size: 12px; }
}

@media (min-width: 768px) {
  body { font-size: 14px; }
}

@media (min-width: 1024px) {
  body { font-size: 16px; }
}

@media (min-width: 1440px) {
  body { font-size: 18px; }
}

.glass-card{
  background:var(--glass-bg);
  backdrop-filter:blur(20px);
  border-radius:var(--border-radius);
  border:1px solid rgba(255,255,255,0.3);
  box-shadow:var(--shadow-light);
  transition:var(--transition);
  position:relative;
  overflow:hidden;
}

.glass-card::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:1px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4),transparent);
}

.glass-card:hover{
  transform:translateY(-4px);
  box-shadow:var(--shadow-hover);
}

body.dark .glass-card{
  background:var(--glass-dark);
  border:1px solid rgba(255,255,255,0.1);
}

/* éŸ¿æ‡‰å¼å¡ç‰‡è¨­è¨ˆ */
@media (max-width: 480px) {
  .glass-card {
    margin: 0 var(--spacing-xs);
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-sm);
  }
}

@media (min-width: 768px) {
  .glass-card {
    margin: 0 var(--spacing-sm);
    padding: var(--spacing-md);
    border-radius: var(--border-radius);
  }
}

@media (min-width: 1024px) {
  .glass-card {
    margin: 0 var(--spacing-md);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
  }
}

.weather-card{
  background:rgba(255,255,255,0.8);
  border-radius:0.5rem;
  padding:0.5rem;
  margin-bottom:0.5rem;
  transition:var(--transition);
  position:relative;
  overflow:hidden;
}

.weather-card:hover{
  transform:translateY(-2px);
  box-shadow:var(--shadow-hover);
}

.weather-card::before{
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
  transition:left 0.5s;
}

.weather-card:hover::before{
  left:100%;
}

.current-weather{
  background:var(--grad-sunny);
  color:white;
  border-radius:var(--border-radius);
  padding:var(--spacing-md);
  text-align:center;
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-strong);
  backdrop-filter:blur(10px);
}

/* éŸ¿æ‡‰å¼ç•¶å‰å¤©æ°£å€å¡Š */
@media (max-width: 480px) {
  .current-weather {
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-sm);
  }
}

@media (min-width: 768px) {
  .current-weather {
    padding: var(--spacing-md);
    border-radius: var(--border-radius);
  }
}

@media (min-width: 1024px) {
  .current-weather {
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-lg);
  }
}

.current-weather::before{
  content:'';
  position:absolute;
  top:-50%;
  left:-50%;
  width:200%;
  height:200%;
  background:radial-gradient(circle,rgba(255,255,255,0.1) 0%,transparent 70%);
  animation:rotate 20s linear infinite;
}

@keyframes rotate{
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}

.weather-icon{
  font-size:3rem;
  animation:float 3s ease-in-out infinite;
  filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2));
}

@keyframes float{
  0%,100%{transform:translateY(0px);}
  50%{transform:translateY(-10px);}
}

.temperature{
  font-size:2.5rem;
  font-weight:bold;
  text-shadow:0 2px 4px rgba(0,0,0,0.3);
  animation:glow 2s ease-in-out infinite alternate;
}

@keyframes glow{
  from{text-shadow:0 2px 4px rgba(0,0,0,0.3);}
  to{text-shadow:0 2px 8px rgba(255,255,255,0.5);}
}

.forecast-item{
  background:rgba(255,255,255,0.9);
  border-radius:0.5rem;
  padding:0.5rem;
  margin-bottom:0.5rem;
  transition:var(--bounce);
  border-left:4px solid #06b6d4;
}

.forecast-item:hover{
  transform:translateY(-4px) scale(1.02);
  box-shadow:var(--shadow-hover);
}

.animated-bg{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:-1;
}

.floating-cloud{
  position:absolute;
  opacity:0.1;
  animation:floatCloud 20s linear infinite;
}

@keyframes floatCloud{
  0%{transform:translateX(-100px);}
  100%{transform:translateX(calc(100vw + 100px));}
}

#themeToggle{
  position:fixed;
  top:1rem;
  right:1rem;
  background:var(--grad);
  color:#fff;
  border:none;
  padding:.75rem 1rem;
  border-radius:9999px;
  z-index:50;
  transition:var(--bounce);
  cursor:pointer;
  font-size:1.2rem;
  box-shadow:var(--shadow-light);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.2);
}

#themeToggle:hover{
  transform:scale(1.1) rotate(180deg);
  box-shadow:var(--shadow-hover);
}

/* ç¾ä»£åŒ–æŒ‰éˆ•è¨­è¨ˆ */
.modern-btn{
  background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:var(--border-radius-sm);
  padding:0.75rem 1.5rem;
  color:white;
  font-weight:600;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor:pointer;
  position:relative;
  overflow:hidden;
}

.modern-btn::before{
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);
  transition:left 0.5s;
}

.modern-btn:hover::before{
  left:100%;
}

.modern-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(0,0,0,0.15);
}

/* ç¾ä»£åŒ–å¡ç‰‡é™°å½±æ•ˆæœ */
.modern-shadow{
  box-shadow:0 1px 3px rgba(0,0,0,0.12),0 1px 2px rgba(0,0,0,0.24);
  transition:all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.modern-shadow:hover{
  box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);
}

/* ç¾ä»£åŒ–æ¼¸å±¤æ–‡å­— */
.gradient-text{
  background:linear-gradient(135deg,#667eea,#764ba2);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

/* ç¾ä»£åŒ–è¼‰å…¥å‹•ç•« */
@keyframes shimmer{
  0%{background-position:-200px 0;}
  100%{background-position:calc(200px + 100%) 0;}
}

.shimmer{
  background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);
  background-size:200px 100%;
  animation:shimmer 1.5s infinite;
}

/* ç¾ä»£åŒ–è„ˆè¡å‹•ç•« */
@keyframes pulse-modern{
  0%,100%{opacity:1;}
  50%{opacity:0.7;}
}

.pulse-modern{
  animation:pulse-modern 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
</style>
</head>
<body>
<!-- ä¸»é¡Œåˆ‡æ› -->
<button id="themeToggle" aria-label="åˆ‡æ›ä¸»é¡Œæ¨¡å¼">ğŸŒ</button>

<!-- è¿”å›æŒ‰éˆ• -->
<button onclick="history.back()" class="fixed top-4 left-4 bg-white shadow-lg rounded-full p-3 z-50 hover:scale-105 transition">
  â†
</button>

<!-- å‹•ç•«èƒŒæ™¯ -->
<div class="animated-bg">
  <div class="floating-cloud" style="top:10%;animation-delay:0s;">â˜ï¸</div>
  <div class="floating-cloud" style="top:20%;animation-delay:5s;">â˜ï¸</div>
  <div class="floating-cloud" style="top:30%;animation-delay:10s;">â˜ï¸</div>
  <div class="floating-cloud" style="top:15%;animation-delay:15s;">â˜ï¸</div>
</div>

<!-- æ¨™é¡Œå€ -->
<header class="text-center py-3 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-y-1"></div>
  <div class="relative z-10">
    <div class="flex items-center justify-center mb-2">
      <span class="text-3xl mr-2">ğŸŒ¦</span>
      <div class="text-left">
        <h1 class="text-xl font-bold text-white">æ¥Šæ¢…å¤©æ°£</h1>
        <p class="text-xs text-white/80">æ¡ƒåœ’å¸‚æ¥Šæ¢…å€</p>
      </div>
    </div>
    <div class="flex items-center justify-center gap-2 mb-2">
      <div class="inline-flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full">
        <span class="text-xs text-white/80 mr-1">ğŸ•</span>
        <span class="text-xs text-white/80">æ›´æ–°æ™‚é–“ï¼š</span>
        <span id="updateTime" class="text-xs font-semibold text-white ml-1"></span>
      </div>
      <button id="refreshWeather" onclick="fetchWeatherData()" class="bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-white hover:bg-white/30 transition-all duration-300" title="é‡æ–°è¼‰å…¥å¤©æ°£è³‡æ–™">
        <span class="text-xs">ğŸ”„</span>
      </button>
    </div>
  </div>
</header>

<main class="px-2 py-1 pb-16 space-y-2 max-w-md mx-auto sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-4xl">
  <!-- ç•¶å‰å¤©æ°£ - ä¸»è¦é¡¯ç¤ºå€ -->
  <section class="glass-card shadow-lg">
    <div class="current-weather">
      <div class="relative z-10">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-3">
          <div class="text-left mb-2 sm:mb-0">
            <div class="text-xs opacity-80 mb-1">ç¾åœ¨</div>
            <div class="text-lg sm:text-xl font-bold">æ¥Šæ¢…å€</div>
          </div>
          <div class="weather-icon text-4xl sm:text-5xl lg:text-6xl">ğŸŒ¤ï¸</div>
        </div>
        
        <div class="text-center mb-3 sm:mb-4">
          <div class="temperature text-4xl sm:text-5xl lg:text-6xl font-bold mb-1">è¼‰å…¥ä¸­...</div>
          <div class="text-base sm:text-lg opacity-90 mb-1">è¼‰å…¥å¤©æ°£è³‡æ–™</div>
          <div class="text-xs sm:text-sm opacity-70">è«‹ç¨å€™</div>
        </div>
        
        <div class="grid grid-cols-3 gap-2 sm:gap-3 text-center">
          <div class="bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition-all duration-300">
            <div class="text-xl sm:text-2xl mb-1">ğŸ’§</div>
            <div class="text-xs opacity-80 mb-1">æ¿•åº¦</div>
            <div class="text-xs sm:text-sm font-bold">--</div>
          </div>
          <div class="bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition-all duration-300">
            <div class="text-xl sm:text-2xl mb-1">ğŸ’¨</div>
            <div class="text-xs opacity-80 mb-1">é¢¨é€Ÿ</div>
            <div class="text-xs sm:text-sm font-bold">--</div>
          </div>
          <div class="bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition-all duration-300">
            <div class="text-xl sm:text-2xl mb-1">ğŸŒ¡ï¸</div>
            <div class="text-xs opacity-80 mb-1">æ°£å£“</div>
            <div class="text-xs sm:text-sm font-bold">--</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ä»Šæ—¥é å ± -->
  <section class="glass-card shadow-lg">
    <h2 class="text-base sm:text-lg font-bold mb-2 sm:mb-3 flex items-center">
      <span class="mr-2 text-lg sm:text-xl">ğŸ“…</span>
      ä»Šæ—¥é å ±
    </h2>
    <div class="space-y-2 sm:space-y-3">
      <div class="flex items-center justify-between p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xl sm:text-2xl">ğŸŒ…</span>
          <div>
            <div class="font-semibold text-xs sm:text-sm">ä¸Šåˆ</div>
            <div class="text-xs text-gray-600">06:00-12:00</div>
          </div>
        </div>
        <div class="text-right">
          <div class="font-bold text-blue-600 text-xs sm:text-sm">22-26Â°C</div>
          <div class="text-xs text-gray-600">å¤šé›²</div>
        </div>
      </div>

      <div class="flex items-center justify-between p-2 sm:p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xl sm:text-2xl">â˜€ï¸</span>
          <div>
            <div class="font-semibold text-xs sm:text-sm">ä¸‹åˆ</div>
            <div class="text-xs text-gray-600">12:00-18:00</div>
          </div>
        </div>
        <div class="text-right">
          <div class="font-bold text-orange-600 text-xs sm:text-sm">26-28Â°C</div>
          <div class="text-xs text-gray-600">æ™´æœ—</div>
        </div>
      </div>

      <div class="flex items-center justify-between p-2 sm:p-3 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xl sm:text-2xl">ğŸŒ™</span>
          <div>
            <div class="font-semibold text-xs sm:text-sm">æ™šä¸Š</div>
            <div class="text-xs text-gray-600">18:00-24:00</div>
          </div>
        </div>
        <div class="text-right">
          <div class="font-bold text-purple-600 text-xs sm:text-sm">20-24Â°C</div>
          <div class="text-xs text-gray-600">å¤šé›²</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 7å¤©é å ± -->
  <section class="glass-card shadow-lg">
    <h2 class="text-base sm:text-lg font-bold mb-2 sm:mb-3 flex items-center">
      <span class="mr-2 text-lg sm:text-xl">ğŸ“Š</span>
      7å¤©é å ±
    </h2>
    <div class="space-y-1 sm:space-y-2">
      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border-l-4 border-yellow-400 hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">ä»Šå¤©</span>
          <span class="text-lg sm:text-xl">â˜€ï¸</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-yellow-600 text-xs sm:text-sm">22-28Â°C</div>
          <div class="text-xs text-gray-600">å¤šé›²æ™‚æ™´</div>
        </div>
      </div>

      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">æ˜å¤©</span>
          <span class="text-lg sm:text-xl">â›…</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-blue-600 text-xs sm:text-sm">23-29Â°C</div>
          <div class="text-xs text-gray-600">å¤šé›²</div>
        </div>
      </div>

      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">å¾Œå¤©</span>
          <span class="text-lg sm:text-xl">ğŸŒ§ï¸</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-gray-600 text-xs sm:text-sm">20-25Â°C</div>
          <div class="text-xs text-gray-600">çŸ­æš«é™£é›¨</div>
        </div>
      </div>

      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">é€±å››</span>
          <span class="text-lg sm:text-xl">â›…</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-blue-600 text-xs sm:text-sm">21-27Â°C</div>
          <div class="text-xs text-gray-600">å¤šé›²</div>
        </div>
      </div>

      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">é€±äº”</span>
          <span class="text-lg sm:text-xl">â˜€ï¸</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-orange-600 text-xs sm:text-sm">24-30Â°C</div>
          <div class="text-xs text-gray-600">æ™´æœ—</div>
        </div>
      </div>

      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">é€±å…­</span>
          <span class="text-lg sm:text-xl">â˜€ï¸</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-orange-600 text-xs sm:text-sm">25-31Â°C</div>
          <div class="text-xs text-gray-600">æ™´æœ—</div>
        </div>
      </div>

      <div class="flex justify-between items-center p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="flex items-center space-x-2 sm:space-x-3">
          <span class="text-xs sm:text-sm font-semibold">é€±æ—¥</span>
          <span class="text-lg sm:text-xl">â›…</span>
        </div>
        <div class="text-right">
          <div class="font-bold text-blue-600 text-xs sm:text-sm">23-28Â°C</div>
          <div class="text-xs text-gray-600">å¤šé›²</div>
        </div>
      </div>
    </div>
  </section>

  <!-- å¤©æ°£æé†’èˆ‡ç”Ÿæ´»æŒ‡æ•¸ -->
  <section class="glass-card shadow-lg">
    <h2 class="text-base sm:text-lg font-bold mb-2 sm:mb-3 flex items-center">
      <span class="mr-2 text-lg sm:text-xl">âš ï¸</span>
      å¤©æ°£æé†’
    </h2>
    <div class="space-y-2 sm:space-y-3 mb-3 sm:mb-4">
      <div class="p-2 sm:p-3 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 rounded-lg hover:shadow-md transition-all duration-300">
        <div class="flex items-center space-x-2">
          <span class="text-yellow-600 text-base sm:text-lg">âš ï¸</span>
          <span class="font-semibold text-yellow-800 text-xs sm:text-sm">ç´«å¤–ç·šæŒ‡æ•¸åé«˜</span>
        </div>
        <p class="text-xs text-yellow-700 mt-1">å»ºè­°å¤–å‡ºæ™‚åšå¥½é˜²æ›¬æªæ–½</p>
      </div>

      <div class="p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-400 rounded-lg hover:shadow-md transition-all duration-300">
        <div class="flex items-center space-x-2">
          <span class="text-blue-600 text-base sm:text-lg">ğŸ’§</span>
          <span class="font-semibold text-blue-800 text-xs sm:text-sm">ç©ºæ°£å“è³ªè‰¯å¥½</span>
        </div>
        <p class="text-xs text-blue-700 mt-1">é©åˆæˆ¶å¤–æ´»å‹•</p>
      </div>
    </div>

    <h3 class="text-base sm:text-lg font-bold mb-2 sm:mb-3 flex items-center">
      <span class="mr-2 text-lg sm:text-xl">ğŸ“Š</span>
      ç”Ÿæ´»æŒ‡æ•¸
    </h3>
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3">
      <div class="text-center p-2 sm:p-3 bg-gradient-to-b from-red-50 to-red-100 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="text-sm sm:text-base font-bold text-red-600">é«˜</div>
        <div class="text-xs text-red-800">ç´«å¤–ç·šæŒ‡æ•¸</div>
      </div>
      <div class="text-center p-2 sm:p-3 bg-gradient-to-b from-green-50 to-green-100 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="text-sm sm:text-base font-bold text-green-600">è‰¯å¥½</div>
        <div class="text-xs text-green-800">ç©ºæ°£å“è³ª</div>
      </div>
      <div class="text-center p-2 sm:p-3 bg-gradient-to-b from-blue-50 to-blue-100 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="text-sm sm:text-base font-bold text-blue-600">èˆ’é©</div>
        <div class="text-xs text-blue-800">èˆ’é©åº¦</div>
      </div>
      <div class="text-center p-2 sm:p-3 bg-gradient-to-b from-purple-50 to-purple-100 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer">
        <div class="text-sm sm:text-base font-bold text-purple-600">é©åˆ</div>
        <div class="text-xs text-purple-800">æ´—è»ŠæŒ‡æ•¸</div>
      </div>
    </div>
  </section>
</main>

<script>
// å¤©æ°£ API é…ç½®
const WEATHER_CONFIG = {
  // ä½¿ç”¨ OpenWeatherMap APIï¼ˆéœ€è¦è¨»å†Šç²å–å…è²» API keyï¼‰
  // æˆ–è€…ä½¿ç”¨å…¶ä»–å…è²»å¤©æ°£ API
  apiKey: '', // è«‹åœ¨ https://openweathermap.org/api è¨»å†Šç²å–å…è²» API key
  city: 'Yangmei', // æ¥Šæ¢…
  country: 'TW', // å°ç£
  units: 'metric', // ä½¿ç”¨æ”æ°åº¦
  lang: 'zh_tw'
};

// å¤©æ°£åœ–æ¨™æ˜ å°„
const weatherIcons = {
  '01d': 'â˜€ï¸', '01n': 'ğŸŒ™',
  '02d': 'â›…', '02n': 'â˜ï¸',
  '03d': 'â˜ï¸', '03n': 'â˜ï¸',
  '04d': 'â˜ï¸', '04n': 'â˜ï¸',
  '09d': 'ğŸŒ§ï¸', '09n': 'ğŸŒ§ï¸',
  '10d': 'ğŸŒ¦ï¸', '10n': 'ğŸŒ¦ï¸',
  '11d': 'â›ˆï¸', '11n': 'â›ˆï¸',
  '13d': 'â„ï¸', '13n': 'â„ï¸',
  '50d': 'ğŸŒ«ï¸', '50n': 'ğŸŒ«ï¸'
};

// è¼‰å…¥ç‹€æ…‹
let isLoading = false;

// æ¸…é™¤éŒ¯èª¤æ¨™è¨˜
function clearErrorBadge() {
  const errorBadge = document.querySelector('.error-badge');
  if (errorBadge) {
    errorBadge.remove();
  }
}

// ç²å–å¤©æ°£è³‡æ–™
async function fetchWeatherData() {
  if (isLoading) return;
  isLoading = true;
  
  try {
    showLoadingState();
    clearErrorBadge(); // æ¸…é™¤ä¹‹å‰çš„éŒ¯èª¤æ¨™è¨˜
    
    // æ–¹æ³•1: ä½¿ç”¨ OpenWeatherMap APIï¼ˆéœ€è¦ API keyï¼‰
    if (WEATHER_CONFIG.apiKey) {
      await fetchFromOpenWeather();
      return;
    }
    
    // æ–¹æ³•2: ä½¿ç”¨ä¸­å¤®æ°£è±¡ç½²é–‹æ”¾è³‡æ–™ï¼ˆå…è²»ï¼Œç„¡éœ€ API keyï¼‰
    await fetchFromCWA();
    
  } catch (error) {
    console.error('ç²å–å¤©æ°£è³‡æ–™å¤±æ•—:', error);
    showErrorMessage('ç„¡æ³•ç²å–å¤©æ°£è³‡æ–™ï¼Œè«‹ç¨å¾Œå†è©¦');
    // ä½¿ç”¨å‚™ç”¨è³‡æ–™ï¼ˆé¡¯ç¤ºéŒ¯èª¤ç‹€æ…‹ï¼‰
    useFallbackData();
  } finally {
    isLoading = false;
    hideLoadingState();
  }
}

// å¾ OpenWeatherMap ç²å–è³‡æ–™
async function fetchFromOpenWeather() {
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${WEATHER_CONFIG.city},${WEATHER_CONFIG.country}&appid=${WEATHER_CONFIG.apiKey}&units=${WEATHER_CONFIG.units}&lang=${WEATHER_CONFIG.lang}`;
  const forecastUrl = `https://api.openweathermap.org/data/2.5/forecast?q=${WEATHER_CONFIG.city},${WEATHER_CONFIG.country}&appid=${WEATHER_CONFIG.apiKey}&units=${WEATHER_CONFIG.units}&lang=${WEATHER_CONFIG.lang}`;
  
  const [currentResponse, forecastResponse] = await Promise.all([
    fetch(url),
    fetch(forecastUrl)
  ]);
  
  if (!currentResponse.ok) throw new Error('API è«‹æ±‚å¤±æ•—');
  
  const currentData = await currentResponse.json();
  const forecastData = await forecastResponse.ok ? await forecastResponse.json() : null;
  
  updateWeatherDisplay(currentData, forecastData);
}

// å¾ä¸­å¤®æ°£è±¡ç½²ç²å–è³‡æ–™ï¼ˆä½¿ç”¨ä»£ç†é¿å… CORS å•é¡Œï¼‰
async function fetchFromCWA() {
  // æ¥Šæ¢…å€çš„ç¶“ç·¯åº¦ç´„ç‚º 24.9075, 121.1458
  const lat = 24.9075;
  const lon = 121.1458;
  
  // ä½¿ç”¨ OpenWeatherMap çš„å…è²» APIï¼ˆç„¡éœ€ API key çš„æ›¿ä»£æ–¹æ¡ˆï¼‰
  // æˆ–è€…ä½¿ç”¨ CORS ä»£ç†
  const proxyUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=YOUR_API_KEY&units=metric&lang=zh_tw`;
  
  // å¦‚æœæ²’æœ‰ API keyï¼Œä½¿ç”¨å‚™ç”¨æ–¹æ¡ˆï¼šé€éå…¬é–‹çš„ CORS ä»£ç†
  try {
    // å˜—è©¦ä½¿ç”¨ wttr.inï¼ˆå…è²»å¤©æ°£æœå‹™ï¼Œç„¡éœ€ API keyï¼‰
    const wttrUrl = `https://wttr.in/Yangmei,Taiwan?format=j1&lang=zh-tw`;
    const response = await fetch(wttrUrl);
    
    if (response.ok) {
      const data = await response.json();
      updateWeatherFromWttr(data);
      return;
    }
  } catch (error) {
    console.warn('wttr.in API å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨è³‡æ–™');
  }
  
  // å¦‚æœæ‰€æœ‰ API éƒ½å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨è³‡æ–™
  throw new Error('ç„¡æ³•é€£æ¥åˆ°å¤©æ°£æœå‹™');
}

// å¾ wttr.in æ›´æ–°å¤©æ°£é¡¯ç¤º
function updateWeatherFromWttr(data) {
  if (!data || !data.current_condition || !data.current_condition[0]) {
    throw new Error('è³‡æ–™æ ¼å¼éŒ¯èª¤');
  }
  
  const current = data.current_condition[0];
  const today = data.weather[0];
  
  // æ›´æ–°ç•¶å‰å¤©æ°£
  const temp = parseInt(current.temp_C) || 24;
  const feelsLike = parseInt(current.FeelsLikeC) || temp;
  const humidity = parseInt(current.humidity) || 65;
  const windSpeed = parseFloat(current.windspeedKmph) || 0;
  const pressure = parseInt(current.pressure) || 1013;
  const description = current.lang_zh?.[0]?.value || current.weatherDesc?.[0]?.value || 'å¤šé›²';
  const icon = getWeatherIconFromCode(parseInt(current.weatherCode) || 116);
  
  updateCurrentWeather({
    temp,
    feelsLike,
    humidity,
    windSpeed: (windSpeed / 3.6).toFixed(1), // è½‰æ›ç‚º m/s
    pressure,
    description,
    icon
  });
  
  // æ›´æ–°ä»Šæ—¥é å ±
  if (today) {
    updateTodayForecast(today);
  }
  
  // æ›´æ–°7å¤©é å ±
  if (data.weather && data.weather.length > 0) {
    // ç¢ºä¿æ—¥æœŸæ ¼å¼æ­£ç¢º
    const forecast = data.weather.slice(0, 7).map(day => ({
      ...day,
      date: day.date || new Date().toISOString().split('T')[0]
    }));
    updateWeeklyForecast(forecast);
  }
}

// å¾å¤©æ°£ä»£ç¢¼ç²å–åœ–æ¨™
function getWeatherIconFromCode(code) {
  const codeMap = {
    113: 'â˜€ï¸', 116: 'â›…', 119: 'â˜ï¸', 122: 'â˜ï¸',
    143: 'ğŸŒ«ï¸', 176: 'ğŸŒ¦ï¸', 179: 'ğŸŒ§ï¸', 182: 'ğŸŒ§ï¸',
    185: 'ğŸŒ§ï¸', 200: 'â›ˆï¸', 227: 'â„ï¸', 230: 'â„ï¸',
    248: 'ğŸŒ«ï¸', 260: 'ğŸŒ«ï¸', 263: 'ğŸŒ¦ï¸', 266: 'ğŸŒ¦ï¸',
    281: 'ğŸŒ§ï¸', 284: 'ğŸŒ§ï¸', 293: 'ğŸŒ¦ï¸', 296: 'ğŸŒ¦ï¸',
    299: 'ğŸŒ§ï¸', 302: 'ğŸŒ§ï¸', 305: 'ğŸŒ§ï¸', 308: 'ğŸŒ§ï¸',
    311: 'ğŸŒ§ï¸', 314: 'ğŸŒ§ï¸', 317: 'ğŸŒ§ï¸', 320: 'ğŸŒ§ï¸',
    323: 'â„ï¸', 326: 'â„ï¸', 329: 'â„ï¸', 332: 'â„ï¸',
    335: 'â„ï¸', 338: 'â„ï¸', 350: 'ğŸŒ§ï¸', 353: 'ğŸŒ¦ï¸',
    356: 'ğŸŒ§ï¸', 359: 'ğŸŒ§ï¸', 362: 'ğŸŒ§ï¸', 365: 'ğŸŒ§ï¸',
    368: 'â„ï¸', 371: 'â„ï¸', 374: 'ğŸŒ§ï¸', 377: 'ğŸŒ§ï¸',
    386: 'â›ˆï¸', 389: 'â›ˆï¸', 392: 'â›ˆï¸', 395: 'â„ï¸'
  };
  return codeMap[code] || 'â˜ï¸';
}

// æ›´æ–°å¤©æ°£é¡¯ç¤ºï¼ˆOpenWeatherMap æ ¼å¼ï¼‰
function updateWeatherDisplay(currentData, forecastData) {
  const temp = Math.round(currentData.main.temp);
  const feelsLike = Math.round(currentData.main.feels_like);
  const humidity = currentData.main.humidity;
  const windSpeed = (currentData.wind.speed).toFixed(1);
  const pressure = currentData.main.pressure;
  const description = currentData.weather[0]?.description || 'å¤šé›²';
  const icon = weatherIcons[currentData.weather[0]?.icon] || 'â˜ï¸';
  
  updateCurrentWeather({
    temp,
    feelsLike,
    humidity,
    windSpeed,
    pressure,
    description,
    icon
  });
  
  if (forecastData) {
    updateForecastFromOWM(forecastData);
  }
}

// æ›´æ–°ç•¶å‰å¤©æ°£é¡¯ç¤º
function updateCurrentWeather(data) {
  const tempEl = document.querySelector('.temperature');
  const descEl = document.querySelector('.current-weather .text-base.opacity-90, .current-weather .text-lg.opacity-90');
  const feelsEl = document.querySelector('.current-weather .text-xs.opacity-70');
  const iconEl = document.querySelector('.weather-icon');
  
  // ä½¿ç”¨æ›´å…·é«”çš„é¸æ“‡å™¨ä¾†æ‰¾åˆ°æ¿•åº¦ã€é¢¨é€Ÿã€æ°£å£“
  const gridItems = document.querySelectorAll('.current-weather .grid > div');
  const humidityEl = gridItems[0]?.querySelector('.font-bold');
  const windEl = gridItems[1]?.querySelector('.font-bold');
  const pressureEl = gridItems[2]?.querySelector('.font-bold');
  
  if (tempEl) tempEl.textContent = `${data.temp}Â°C`;
  if (descEl) descEl.textContent = data.description;
  if (feelsEl) feelsEl.textContent = `é«”æ„Ÿæº«åº¦ ${data.feelsLike}Â°C`;
  if (iconEl) iconEl.textContent = data.icon;
  if (humidityEl) humidityEl.textContent = `${data.humidity}%`;
  if (windEl) windEl.textContent = `${data.windSpeed} m/s`;
  if (pressureEl) pressureEl.textContent = `${data.pressure} hPa`;
  
  // æ¸…é™¤éŒ¯èª¤æ¨™è¨˜ï¼ˆæˆåŠŸè¼‰å…¥è³‡æ–™æ™‚ï¼‰
  clearErrorBadge();
  
  // æ ¹æ“šå¤©æ°£æ›´æ–°èƒŒæ™¯æ¼¸å±¤
  updateWeatherBackground(data.description, data.icon);
}

// æ›´æ–°ä»Šæ—¥é å ±
function updateTodayForecast(today) {
  const periods = [
    { time: 'ä¸Šåˆ', start: 6, end: 12, key: 'hourly' },
    { time: 'ä¸‹åˆ', start: 12, end: 18, key: 'hourly' },
    { time: 'æ™šä¸Š', start: 18, end: 24, key: 'hourly' }
  ];
  
  // é€™è£¡å¯ä»¥æ ¹æ“šå¯¦éš› API è³‡æ–™æ›´æ–°
  // ç›®å‰ä½¿ç”¨å¹³å‡æº«åº¦ä½œç‚ºç¤ºä¾‹
  const avgTemp = today.avgtempC;
  const maxTemp = today.maxtempC;
  const minTemp = today.mintempC;
}

// æ›´æ–°7å¤©é å ±
function updateWeeklyForecast(forecast) {
  // æ‰¾åˆ°7å¤©é å ±å€å¡Š
  const forecastSection = Array.from(document.querySelectorAll('section')).find(section => {
    const h2 = section.querySelector('h2');
    return h2 && h2.textContent.includes('7å¤©é å ±');
  });
  
  if (!forecastSection) return;
  
  const items = forecastSection.querySelectorAll('.space-y-1 > div, .space-y-2 > div');
  
  forecast.forEach((day, index) => {
    if (index >= 7 || !items[index]) return;
    
    const item = items[index];
    const date = new Date(day.date);
    const dayNames = ['ä»Šå¤©', 'æ˜å¤©', 'å¾Œå¤©'];
    let dayName;
    
    if (index < 3) {
      dayName = dayNames[index];
    } else {
      const weekDays = ['é€±æ—¥', 'é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­'];
      dayName = weekDays[date.getDay()];
    }
    
    const maxTemp = Math.round(day.maxtempC || day.temp?.max || 25);
    const minTemp = Math.round(day.mintempC || day.temp?.min || 20);
    const condition = day.condition?.text || day.weather?.[0]?.main || day.weatherDesc?.[0]?.value || 'å¤šé›²';
    const icon = getWeatherIconFromCode(day.condition?.code || day.weatherCode || day.weather?.[0]?.id) || 'â˜ï¸';
    
    const dayNameEl = item.querySelector('.font-semibold, .text-xs.font-semibold, .text-sm.font-semibold');
    const iconEl = item.querySelector('.text-lg, .text-xl');
    const tempEl = item.querySelector('.font-bold');
    const descEl = Array.from(item.querySelectorAll('.text-gray-600')).pop();
    
    if (dayNameEl) dayNameEl.textContent = dayName;
    if (iconEl) iconEl.textContent = icon;
    if (tempEl) tempEl.textContent = `${minTemp}-${maxTemp}Â°C`;
    if (descEl) descEl.textContent = condition;
  });
}

// æ›´æ–°é å ±ï¼ˆOpenWeatherMap æ ¼å¼ï¼‰
function updateForecastFromOWM(forecastData) {
  // è™•ç† OpenWeatherMap çš„é å ±è³‡æ–™
  const list = forecastData.list || [];
  const dailyForecast = {};
  
  list.forEach(item => {
    const date = new Date(item.dt * 1000);
    const dayKey = date.toDateString();
    
    if (!dailyForecast[dayKey]) {
      dailyForecast[dayKey] = {
        date,
        temps: [],
        conditions: [],
        icons: []
      };
    }
    
    dailyForecast[dayKey].temps.push(item.main.temp);
    dailyForecast[dayKey].conditions.push(item.weather[0]?.description || 'å¤šé›²');
    dailyForecast[dayKey].icons.push(weatherIcons[item.weather[0]?.icon] || 'â˜ï¸');
  });
  
  // æ‰¾åˆ°7å¤©é å ±å€å¡Š
  const forecastSection = Array.from(document.querySelectorAll('section')).find(section => {
    const h2 = section.querySelector('h2');
    return h2 && h2.textContent.includes('7å¤©é å ±');
  });
  
  if (!forecastSection) return;
  
  const items = forecastSection.querySelectorAll('.space-y-1 > div, .space-y-2 > div');
  
  // æ›´æ–°7å¤©é å ±é¡¯ç¤º
  const forecastDays = Object.values(dailyForecast).slice(0, 7);
  forecastDays.forEach((day, index) => {
    if (index >= 7 || !items[index]) return;
    
    const item = items[index];
    const maxTemp = Math.round(Math.max(...day.temps));
    const minTemp = Math.round(Math.min(...day.temps));
    const condition = day.conditions[Math.floor(day.conditions.length / 2)];
    const icon = day.icons[Math.floor(day.icons.length / 2)];
    
    const dayNames = ['ä»Šå¤©', 'æ˜å¤©', 'å¾Œå¤©'];
    const weekDays = ['é€±æ—¥', 'é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­'];
    const dayName = index < 3 ? dayNames[index] : weekDays[day.date.getDay()];
    
    const dayNameEl = item.querySelector('.font-semibold, .text-xs.font-semibold, .text-sm.font-semibold');
    const iconEl = item.querySelector('.text-lg, .text-xl');
    const tempEl = item.querySelector('.font-bold');
    const descEl = Array.from(item.querySelectorAll('.text-gray-600')).pop();
    
    if (dayNameEl) dayNameEl.textContent = dayName;
    if (iconEl) iconEl.textContent = icon;
    if (tempEl) tempEl.textContent = `${minTemp}-${maxTemp}Â°C`;
    if (descEl) descEl.textContent = condition;
  });
}

// æ›´æ–°å¤©æ°£èƒŒæ™¯
function updateWeatherBackground(description, icon) {
  const currentWeatherEl = document.querySelector('.current-weather');
  if (!currentWeatherEl) return;
  
  let gradient = 'var(--grad-sunny)';
  
  if (description.includes('é›¨') || icon.includes('ğŸŒ§') || icon.includes('ğŸŒ¦')) {
    gradient = 'var(--grad-rainy)';
  } else if (description.includes('é›²') || icon.includes('â˜') || icon.includes('â›…')) {
    gradient = 'var(--grad-cloudy)';
  } else if (description.includes('æ™´') || icon.includes('â˜€')) {
    gradient = 'var(--grad-sunny)';
  } else if (description.includes('å¤œ') || icon.includes('ğŸŒ™')) {
    gradient = 'var(--grad-night)';
  }
  
  currentWeatherEl.style.background = gradient;
}

// é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
function showLoadingState() {
  const cards = document.querySelectorAll('.glass-card');
  cards.forEach(card => {
    card.style.opacity = '0.6';
    card.style.pointerEvents = 'none';
  });
  
  // é¡¯ç¤ºè¼‰å…¥æŒ‡ç¤ºå™¨
  let loader = document.getElementById('weatherLoader');
  if (!loader) {
    loader = document.createElement('div');
    loader.id = 'weatherLoader';
    loader.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-lg p-4 z-50 shadow-lg';
    loader.innerHTML = '<div class="text-center"><div class="animate-spin text-3xl mb-2">ğŸŒ¤ï¸</div><div class="text-sm text-gray-600">è¼‰å…¥å¤©æ°£è³‡æ–™ä¸­...</div></div>';
    document.body.appendChild(loader);
  }
}

// éš±è—è¼‰å…¥ç‹€æ…‹
function hideLoadingState() {
  const cards = document.querySelectorAll('.glass-card');
  cards.forEach(card => {
    card.style.opacity = '1';
    card.style.pointerEvents = 'auto';
  });
  
  const loader = document.getElementById('weatherLoader');
  if (loader) loader.remove();
}

// é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
function showErrorMessage(message) {
  const errorEl = document.createElement('div');
  errorEl.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
  errorEl.textContent = message;
  document.body.appendChild(errorEl);
  
  setTimeout(() => {
    errorEl.remove();
  }, 3000);
}

// ä½¿ç”¨å‚™ç”¨è³‡æ–™ï¼ˆAPI å¤±æ•—æ™‚é¡¯ç¤ºéŒ¯èª¤ç‹€æ…‹ï¼‰
function useFallbackData() {
  console.log('ä½¿ç”¨å‚™ç”¨å¤©æ°£è³‡æ–™');
  
  // é¡¯ç¤ºéŒ¯èª¤ç‹€æ…‹ï¼Œè€Œä¸æ˜¯ä¿ç•™ç¡¬ç·¨ç¢¼è³‡æ–™
  const tempEl = document.querySelector('.temperature');
  const descEl = document.querySelector('.current-weather .text-base.opacity-90, .current-weather .text-lg.opacity-90');
  const feelsEl = document.querySelector('.current-weather .text-xs.opacity-70');
  const iconEl = document.querySelector('.weather-icon');
  
  const gridItems = document.querySelectorAll('.current-weather .grid > div');
  const humidityEl = gridItems[0]?.querySelector('.font-bold');
  const windEl = gridItems[1]?.querySelector('.font-bold');
  const pressureEl = gridItems[2]?.querySelector('.font-bold');
  
  // é¡¯ç¤ºéŒ¯èª¤æˆ–è¼‰å…¥å¤±æ•—çš„ç‹€æ…‹
  if (tempEl) tempEl.textContent = '--Â°C';
  if (descEl) descEl.textContent = 'ç„¡æ³•è¼‰å…¥å¤©æ°£è³‡æ–™';
  if (feelsEl) feelsEl.textContent = 'è«‹æª¢æŸ¥ç¶²è·¯é€£ç·š';
  if (iconEl) iconEl.textContent = 'âš ï¸';
  if (humidityEl) humidityEl.textContent = '--';
  if (windEl) windEl.textContent = '--';
  if (pressureEl) pressureEl.textContent = '--';
  
  // åœ¨ç•¶å‰å¤©æ°£å€å¡Šé¡¯ç¤ºéŒ¯èª¤æç¤º
  const currentWeatherEl = document.querySelector('.current-weather');
  if (currentWeatherEl) {
    let errorBadge = currentWeatherEl.querySelector('.error-badge');
    if (!errorBadge) {
      errorBadge = document.createElement('div');
      errorBadge.className = 'error-badge absolute top-2 right-2 bg-red-500/80 text-white text-xs px-2 py-1 rounded-full';
      errorBadge.textContent = 'è³‡æ–™è¼‰å…¥å¤±æ•—';
      currentWeatherEl.style.position = 'relative';
      currentWeatherEl.appendChild(errorBadge);
    }
  }
}

// ä¸»é¡Œåˆ‡æ›
document.getElementById('themeToggle').addEventListener('click', () => {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  document.getElementById('themeToggle').textContent = isDark ? 'ğŸŒ™' : 'ğŸŒ';
  
  // æ·»åŠ åˆ‡æ›å‹•ç•«
  document.body.style.transition = 'all 0.5s ease';
  setTimeout(() => {
    document.body.style.transition = '';
  }, 500);
});

// æ›´æ–°æ™‚é–“
function updateTime() {
  const now = new Date();
  const timeString = now.toLocaleString('zh-TW', {
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit'
  });
  document.getElementById('updateTime').textContent = timeString;
}

// åˆå§‹æ›´æ–°æ™‚é–“
updateTime();

// æ¯åˆ†é˜æ›´æ–°ä¸€æ¬¡æ™‚é–“
setInterval(updateTime, 60000);

// é é¢è¼‰å…¥æ™‚ç²å–å¤©æ°£è³‡æ–™
document.addEventListener('DOMContentLoaded', () => {
  // å»¶é²ä¸€ä¸‹å†è¼‰å…¥ï¼Œè®“é é¢å…ˆæ¸²æŸ“
  setTimeout(() => {
    fetchWeatherData();
  }, 500);
  
  // æ¯30åˆ†é˜è‡ªå‹•æ›´æ–°ä¸€æ¬¡
  setInterval(fetchWeatherData, 30 * 60 * 1000);
  
  // åˆ·æ–°æŒ‰éˆ•å‹•ç•«
  const refreshBtn = document.getElementById('refreshWeather');
  if (refreshBtn) {
    refreshBtn.addEventListener('click', () => {
      refreshBtn.style.transform = 'rotate(360deg)';
      refreshBtn.style.transition = 'transform 0.5s ease';
      setTimeout(() => {
        refreshBtn.style.transform = 'rotate(0deg)';
      }, 500);
    });
  }
});

// å¡ç‰‡é€²å…¥å‹•ç•«
function animateCards() {
  const cards = document.querySelectorAll('.glass-card');
  cards.forEach((card, index) => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
      card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, index * 150);
  });
}

// å¤©æ°£åœ–æ¨™å‹•ç•«
function animateWeatherIcons() {
  const icons = document.querySelectorAll('.weather-icon');
  icons.forEach(icon => {
    icon.style.animation = 'none';
    setTimeout(() => {
      icon.style.animation = 'float 3s ease-in-out infinite';
    }, 100);
  });
}

// æº«åº¦æ•¸å­—å‹•ç•«
function animateTemperature() {
  const tempElement = document.querySelector('.temperature');
  if (tempElement) {
    tempElement.style.transform = 'scale(1.1)';
    setTimeout(() => {
      tempElement.style.transform = 'scale(1)';
    }, 300);
  }
}

// é å ±é …ç›®é»æ“Šæ•ˆæœ
function addForecastInteractions() {
  const forecastItems = document.querySelectorAll('.forecast-item, [class*="bg-gradient-to-r"]');
  forecastItems.forEach(item => {
    item.style.cursor = 'pointer';
    item.addEventListener('click', () => {
      item.style.transform = 'scale(0.98)';
      setTimeout(() => {
        item.style.transform = 'scale(1)';
      }, 150);
    });
  });
}

// ç”Ÿæ´»æŒ‡æ•¸å¡ç‰‡å‹•ç•«
function animateLifeIndex() {
  const indexCards = document.querySelectorAll('[class*="bg-gradient-to-b"]');
  indexCards.forEach((card, index) => {
    card.addEventListener('mouseenter', () => {
      card.style.transform = 'translateY(-4px) scale(1.05)';
      card.style.boxShadow = '0 12px 24px rgba(0,0,0,0.15)';
    });
    
    card.addEventListener('mouseleave', () => {
      card.style.transform = 'translateY(0) scale(1)';
      card.style.boxShadow = '';
    });
  });
}

// é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œå‹•ç•«
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    animateCards();
    animateWeatherIcons();
    addForecastInteractions();
    animateLifeIndex();
  }, 100);
});

// å®šæœŸæ›´æ–°å‹•ç•«æ•ˆæœ
setInterval(() => {
  animateTemperature();
}, 30000); // æ¯30ç§’æ›´æ–°ä¸€æ¬¡æº«åº¦å‹•ç•«

// æ»¾å‹•è¦–å·®æ•ˆæœ
window.addEventListener('scroll', () => {
  const scrolled = window.pageYOffset;
  const parallax = document.querySelector('.animated-bg');
  if (parallax) {
    parallax.style.transform = `translateY(${scrolled * 0.5}px)`;
  }
});

// è§¸æ§è¨­å‚™å„ªåŒ–
if ('ontouchstart' in window) {
  document.body.classList.add('touch-device');
  
  // ç‚ºè§¸æ§è¨­å‚™æ·»åŠ é¡å¤–çš„è¦–è¦ºåé¥‹
  const touchElements = document.querySelectorAll('.glass-card, [class*="bg-gradient"]');
  touchElements.forEach(element => {
    element.addEventListener('touchstart', () => {
      element.style.transform = 'scale(0.98)';
    });
    
    element.addEventListener('touchend', () => {
      setTimeout(() => {
        element.style.transform = 'scale(1)';
      }, 150);
    });
  });
}
</script>

<!-- ğŸ“ åº•éƒ¨å°èˆª -->
<nav class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-lg border-t border-gray-200 flex justify-around py-2 bottom-nav" role="navigation" aria-label="ä¸»è¦å°èˆª">
  <button onclick="window.location.href='index.html'" class="flex flex-col items-center text-gray-600 text-sm hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="å›åˆ°é¦–é ">
    <span class="text-2xl mb-0.5">ğŸ </span><span>é¦–é </span>
  </button>
  <button onclick="openTool('expense-tracker.html')" class="flex flex-col items-center text-gray-600 text-sm hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="è¨˜å¸³">
    <span class="text-2xl mb-0.5">ğŸ“</span><span>è¨˜å¸³</span>
  </button>
  <button onclick="openTool('games.html')" class="flex flex-col items-center text-gray-600 text-sm hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="éŠæˆ²å¤§å»³">
    <span class="text-2xl mb-0.5">ğŸ®</span><span>éŠæˆ²</span>
  </button>
  <button onclick="window.location.href='https://flyjung168.pages.dev/'" class="flex flex-col items-center text-gray-600 text-sm hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="æˆ¿è¨Š">
    <span class="text-2xl mb-0.5">ğŸ¢</span><span>æˆ¿è¨Š</span>
  </button>
  <button onclick="openTool('worship.html')" class="flex flex-col items-center text-gray-600 text-sm hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="æ‹œæ‹œå°ˆå€">
    <span class="text-2xl mb-0.5">ğŸ™</span><span>æ‹œæ‹œ</span>
  </button>
</nav>

<script>
// å·¥å…·é–‹å•ŸåŠŸèƒ½
function openTool(url) {
  if (url.startsWith('http')) {
    window.open(url, '_blank', 'noopener,noreferrer');
  } else {
    window.location.href = url;
  }
}
</script>
</body>
</html>
